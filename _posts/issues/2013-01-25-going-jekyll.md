---

title: Jekyll

categories: issues

layout: post

invisible: true

---

{% include setup.md %}

В [посте про перезапуск](http://kizu.ru/issues/restart/) я пообещал написать серию статей про Jekyll. Это — первая, вводная, заметка из серии.

Я не буду подробно описывать что же такое [Jekyll](https://github.com/mojombo/jekyll), как его установить, какая у него файловая структура и так далее — про это уже написано довольно много статей (см. ниже в [__ ссылках __](#Links){:quoted}). Если кратко, то это статический	 генератор сайтов с прицелом на блоги.

## GitHub Pages

Начну с главного: эту и последующие статьи я буду писать в контексте сервиса [GitHub Pages](http://pages.github.com). Дело в том, что Гитхаб, помимо обычного хостинга статики, предоставляет также и возможность хостить сайты на Jekyll. Таким образом, Jekyll — единственный способ что-то генерить прямо на Гитхабе без использования сторонних сервисов и без, возможно, чисто клиентских решений (можно попробовать извратиться как с использованием стороннего сервиса, в который будут уходить хуки и который будет что-то на каждый пуш билдить и коммитить, либо можно всё обрабатывать и собирать на клиенте, сделав весь сайт как одностраничное веб-приложение, но оба этих решения я рассматривать пока не буду).

С Jekyll же достаточно создать файл в формате markdown, добавить в начало YAML-заголовок — и можно писать текст. После пуша этого файла в репозиторий Гитхаб перегенерирует весь сайт, — и соответствующий пост появится как в виде страницы на сайте, так и во всех списках и сайдбарах на других страницах. При этом, пушить файл или изменения можно откуда угодно — хоть со своей машины, хоть через веб-интерфейс Гитхаба, хоть используя любое стороннее приложение, использующее API.

Сразу замечу, что многие вещи, о которых я буду писать в последующих статьях, можно _намного_ проще реализовать в виде плагинов. Но я не пойду «простым» (для разработчика, но не для пользователя) путём — мне интересны решения, которые будут работать где угодно, в том числе и на Гитхабе, где сторонные плагины использовать нельзя.

## Hello world

Минимальный документ, который нужно написать, чтобы файл сбилдился с помощью Jekyll, должен содержать YAML с хотя бы одним полем — `layout` (на самом деле можно и без него, но тогда у вас будет страница без заголовков и всего прочего — вряд ли вам это нужно). Так что минимально адекватный `hello-world.md` для Jekyll мог бы выглядеть так:


    ---
    layout: default
    ---

    Hello world!

В реальном мире к посту захочется добавить заголовок и ещё всяких данных, но, вообще, и такого документа достаточно.

## Дата

Одна из фишек, которая мне понравилась — файлы постов в блоге нужно называть в формате `YYYY-MM-DD-title`. Помимо того, что это организует (отчего посты в папках автоматически сортируются по дате), это избавляет от необходимости прописывать дату в самом файле. В некоторых генераторах статики, которые я использовал раньше, эту информацию приходилось дублировать, прописывая в YAML поля типа `published`. В Jekyll можно и их использовать, если, скажем, хочется уточнить время, но можно жить и без этого — дата из имени файла попадёт в данные, доступные шаблонам.

В Jekyll и остальные аспекты сделаны так же минималистично. Для создания нового поста не нужно помнить, что же там обязательно прописывать в YAML, можно просто создать текстовый документ, заполнить его и получить готовый пост на сайте после пуша.

## Prose.io

Если не хочется вручную каждый раз заполнять YAML-заголовки, то можно воспользоваться или каким-нибудь скриптом, как это сделано в Jekyll Bootstrap, или использовать сервис [Prose.io](http://prose.io) — он [позволяет](http://prose.io/help/handbook.html#metadata_defaults) в конфиге описать какие использовать данные по умолчанию при создании нового файла. Таким образом, если новые посты писать через веб, используя Prose, то о заполнении метаданных и не нужно будет заботиться (на самом деле в них всё равно нужно будет разок заглянуть, но про это я напишу в другой раз).

## Ссылки {#Links}

В сети про Jekyll уже есть очень много полезной информации. В этом разделе этого поста я попробую постепенно собирать и то, что может понадобиться для начала работы с Jekyll, и то, что нужно использовать постоянно. Итак:

- [Официальный сайт Jekyll](http://jekyllrb.com)
- [Настройки конфига для Prose.io](http://prose.io/help/handbook.html)

У проекта [Jekyll Bootstrap](http://jekyllbootstrap.com) есть отличная серия статей про Jekyll, например

- [Введение в Jekyll](http://jekyllbootstrap.com/lessons/jekyll-introduction.html)
- [Описание форматов внутренних данных](http://jekyllbootstrap.com/api/template-data-api.html)

Вся логика в Jekyll работает на шаблонизаторе [Liquid](http://www.liquidmarkup.org), недавно Гитхаб обновил версию Jekyll (вместе с Liquid, естественно), так что сейчас можно использовать все теги из документации:

- [Список стандартных тегов liquid](https://github.com/shopify/liquid/wiki/liquid-for-designers)
- [Дополнительные теги liquid в Jekyll](https://github.com/mojombo/jekyll/wiki/liquid-extensions)

До этого обновления, скажем, нельзя было использовать `split` — а в отсутствие нормального поиска и замены с регулярными выражениями это почти единственный способ сделать что-то сложное. Я уже почти разобрался как с ним работать, так что ждите статей про это.

Я очень доволен, что для своего сайта выбрал Jekyll — хотя для тонкой настройки приходится очень сильно ломать голову над Liquid, в конечном счёте это того стоит.