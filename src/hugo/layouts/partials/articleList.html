<!-- Make into a filter, so it would be possible to show all articles etc. -->
{{- $context := . -}}{{- if .context -}}{{- $context = .context -}}{{- end -}}
{{- $onlyRecent := .onlyRecent -}}
{{- $isTagsPage := eq $context.Page.Kind "taxonomyTerm" -}}

{{- if $onlyRecent -}}<span class="ArticleList-Flag" id="Everything"></span>{{- end -}}
<ul class="ArticleList" id="Articles">
  <!-- Ranges through content/post/*.md -->
  {{- $count := 0 -}}
  {{- range .data.Pages -}}
    {{- $langCheck := or $isTagsPage (eq .Site.Params.languageCode .Params.lang) -}}
    {{- if and .Title $langCheck (eq .Draft false) -}}
      {{ $count = add $count 1 }}
      <li class="ArticleList-Li"{{ if and (le $count 2) (not $isTagsPage) }} style="--priority: 1;"{{ end }}>
        <article class="ArticleList-Item">
          <h2>{{- /**/ -}}
            <a class="ArticleList-Link" href="{{ .Permalink }}">{{ .Title }}</a>
            {{- if $isTagsPage }} ({{ $context.Site.Taxonomies.tags.Count .Title }}){{ end -}}
          </h2>
          <p class="Metadata Published">
            {{ if $isTagsPage }}{{ i18n "lastPost" }}: {{ end }}{{ partial "readableDate.html" . }}{{ partial "taglist.html" . }}
          </p>
          {{- if .Params.summary -}}
            <p>{{ .Params.summary | markdownify }}</p>
          {{- end -}}
        </article>
      </li>
    {{- end -}}
  {{- end -}}
</ul>
{{- if $onlyRecent -}}
  <p><strong class="isShown-whenOnlyRecent">{{ i18n "recentShown" }}</strong><strong class="isShown-whenShownAll">{{ i18n "everythingShown" }}</strong>. <a href="#Everything" class="isShown-whenOnlyRecent Link Link_pseudo">{{ i18n "showEverything" }}</a><a href="#Articles" class="isShown-whenShownAll Link Link_pseudo">{{ i18n "showOnlyRecent" }}</a>.</p>
  <hr />
{{- end -}}
