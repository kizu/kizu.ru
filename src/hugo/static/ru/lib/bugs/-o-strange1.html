<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
	"https://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="ru">
	<head>
		<meta http-equiv="content-type" content="text/html;charset=UTF-8"/>
		<title>странный баг оперы</title>
		<style type="text/css" media="screen">
.wrap {
	position:relative;
	width:100px;
	padding-left:50px;
	height:100px;
	margin:0 0 50px;
	}
.test {
	position:relative;
	background:#FFF;
	max-width:50px;
	height:100px;
	border:1px solid green;
	}
	.normal {
		clear:both;
		}
	.float {
		float:left;
		}
	.absolute {
		position:absolute;
		left:50px;
		top:0;
		}
.inner {
	width:50px;
	height:50px;
	background:green;
	position:absolute;
	right:0;
	top:0;
	}
.block {
	width:50px;
	height:50px;
	text-align:center;
	line-height:50px;
	background:red;
	}
/* and here is a fix:*/
/*
.test:after {
	content:"";
	display:inline-block;
	}
*/

		</style>
	</head>
	<body>
		<div>
			<div class="wrap">
				<div class="test normal">
					<div class="inner"></div>
					<div class="block">Normal</div>
				</div>
			</div>
			<div class="wrap">
				<div class="test float">
					<div class="inner"></div>
					<div class="block">Float</div>
				</div>
			</div>
			<div class="wrap">
				<div class="test absolute">
					<div class="inner"></div>
					<div class="block">Abs</div>
				</div>
			</div>
		</div>
	</body>

</html>
