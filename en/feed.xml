<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>kizu.ru</title>
  <link href="http://kizu.ru/en/feed.xml" rel="self"/>
  <link href="http://kizu.ru/en/"/>
  <updated>2018-02-15T00:00:00+03:00</updated>
  <id>http://kizu.ru/en/</id>
  <author>
    <name>Roman Komarov</name>
    <email>kizmarh@ya.ru</email>
  </author>
  <entry>
    <title>Variable Order</title>
    <link href="http://kizu.ru/en/blog/variable-order/"/>
    <updated>2018-02-15T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/blog/variable-order</id>
    <content type="html">&lt;h1 id=&quot;variable-order&quot;&gt;Variable Order&lt;/h1&gt;
&lt;p&gt;&lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#disclaymer&quot; id=&quot;disclaymer&quot;&gt;Look&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;&lt;strong&gt;Important!&lt;/strong&gt; This isÂ just anÂ experiment, made inÂ order toÂ find what isÂ possible toÂ doÂ &lt;em&gt;atÂ all&lt;/em&gt; inÂ &lt;abbr&gt;CSS&lt;/abbr&gt;, this method isÂ not meant forÂ production, asÂ itÂ isÂ bad forÂ a11y.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; atÂ this table andÂ note that you can click onÂ its headers toÂ sort theÂ table byÂ corresponding columns (andÂ click again toÂ change theÂ ascending/descending order).&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/variable-order/#Demo_table&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This isÂ done just with &lt;abbr&gt;HTML&lt;/abbr&gt; andÂ &lt;abbr&gt;CSS&lt;/abbr&gt;, noÂ JavaScript involved.&lt;/p&gt;
&lt;p&gt;But how does this work?&lt;/p&gt;
&lt;h2 id=&quot;inline-css-variables&quot;&gt;Inline &lt;abbr&gt;CSS&lt;/abbr&gt; Variables&lt;/h2&gt;
&lt;p&gt;IÂ was researching &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#learn-more&quot; id=&quot;learn-more&quot;&gt;&lt;abbr&gt;CSS&lt;/abbr&gt; variables&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;IfÂ you&amp;#39;d want toÂ learn more about &lt;abbr&gt;CSS&lt;/abbr&gt; variables inÂ general, IÂ highly recommend you toÂ watch &lt;a href=&quot;https://www.youtube.com/watch?v=UQRSaG1hQ20&quot;&gt;Lea Verou&amp;#39;s talk about them&lt;/a&gt;, she articulates really nicely aÂ lot ofÂ nuances ofÂ their usage.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; rather actively forÂ the last 3 months, andÂ initially IÂ wanted toÂ write aÂ long article about just one &lt;span class=&quot;nobr&quot;&gt;aspectâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;abbr&gt;CSS&lt;/abbr&gt; variables inside inline styles. But there were just soÂ many things toÂ write about, andÂ IÂ found aÂ lot ofÂ general use-cases ofÂ variables (andÂ not just forÂ inline ones), that IÂ decided toÂ split all myÂ research into smaller articles.&lt;/p&gt;
&lt;p&gt;This isÂ anÂ article about one ofÂ theÂ examples from myÂ research ofÂ &lt;abbr&gt;CSS&lt;/abbr&gt; variables inÂ inline styles, andÂ asÂ you could see from theÂ example atÂ theÂ &lt;span class=&quot;nobr&quot;&gt;startâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;itÂ isÂ about &lt;em&gt;sorting&lt;/em&gt; stuff.&lt;/p&gt;
&lt;p&gt;TheÂ main feature that makes that possible isÂ that weÂ can use &lt;abbr&gt;CSS&lt;/abbr&gt; variables right inside theÂ &lt;code&gt;style&lt;/code&gt; attribute inÂ &lt;abbr&gt;HTML&lt;/abbr&gt;. AndÂ while itÂ could beÂ possible toÂ define all theÂ values forÂ appropriate class names orÂ nth-child-found elements, there isÂ noÂ need toÂ doÂ this when weÂ can just add them toÂ theÂ corresponding &lt;abbr&gt;HTML&lt;/abbr&gt; tags.&lt;/p&gt;
&lt;h2 id=&quot;the-sorting&quot;&gt;TheÂ Sorting&lt;/h2&gt;
&lt;p&gt;&lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#a11y&quot; id=&quot;a11y&quot;&gt;TheÂ code&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;&lt;strong&gt;Update:&lt;/strong&gt; one big problem with this method isÂ that itÂ can make UI less accessible due toÂ reordering only visually. Thanks toÂ &lt;a href=&quot;https://twitter.com/thierrykoblentz&quot;&gt;Thierry Kobientz&lt;/a&gt; andÂ &lt;a href=&quot;https://twitter.com/jensimmons/status/964360059923742720&quot;&gt;Jen Simmons&lt;/a&gt; forÂ bringing this up.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; forÂ our implementation ofÂ table sorting isÂ not really complicated.&lt;/p&gt;
&lt;p&gt;TheÂ only thing that weÂ need toÂ doÂ inÂ &lt;abbr&gt;HTML&lt;/abbr&gt; (weÂ use aÂ regular &lt;abbr&gt;HTML&lt;/abbr&gt; table forÂ this, which later &lt;span class=&quot;nobr&quot;&gt;re-style&lt;/span&gt; with flex andÂ grid) isÂ anÂ inline style forÂ its rows which weÂ sort:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;tr
  class=&amp;quot;table-row&amp;quot;
  style=&amp;quot;
    --order-by-published: 161221;
    --order-by-views: 2431;
  &amp;quot;&amp;gt;
  &amp;lt;th class=&amp;quot;table-cell&amp;quot;&amp;gt;
    &amp;lt;a href=&amp;quot;http://kizu.ru/en/fun/controlling-the-specificity/&amp;quot;&amp;gt;Controlling the Specificity&amp;lt;/a&amp;gt;
  &amp;lt;/th&amp;gt;
  &amp;lt;td class=&amp;quot;table-cell&amp;quot;&amp;gt;2016-12-21&amp;lt;/td&amp;gt;
  &amp;lt;td class=&amp;quot;table-cell&amp;quot;&amp;gt;2â€‰431&amp;lt;/td&amp;gt;
&amp;lt;/tr&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can see that theÂ values forÂ &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#noname&quot; id=&quot;noname&quot;&gt;those variables&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;You can notice that weÂ don&amp;#39;t have aÂ variable toÂ sort byÂ &lt;span class=&quot;nobr&quot;&gt;nameâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;weÂ rely onÂ &lt;abbr&gt;DOM&lt;/abbr&gt; order forÂ this.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; there are just theÂ date inÂ &lt;code&gt;YYMMDD&lt;/code&gt; &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#edgebug&quot; id=&quot;edgebug&quot;&gt;format&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Not with &lt;abbr&gt;YYYY&lt;/abbr&gt;, asÂ inÂ that case Edge would have &lt;a href=&quot;https://codepen.io/kizu/pen/MQObrW&quot;&gt;aÂ bug&lt;/a&gt; there, soÂ itÂ seems that weÂ shouldn&amp;#39;t use numbers that big forÂ &lt;code&gt;calc()&lt;/code&gt; andÂ &lt;code&gt;order&lt;/code&gt;.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; (soÂ itÂ becomes anÂ integer) andÂ the value forÂ view.&lt;/p&gt;
&lt;p&gt;ForÂ &lt;abbr&gt;CSS&lt;/abbr&gt;, ifÂ I&amp;#39;ll omit all theÂ stuff that handles its presentation andÂ UI forÂ the table, theÂ code behind theÂ sorting itself becomes really small:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.table-body {
  display: flex;
  flex-direction: column;
}

.table-row {
  order: calc(var(--order) * var(--sort-order, -1));
}

#sort-by-published:checked ~ .table &amp;gt; .table-body &amp;gt; .table-row {
  --order: var(--order-by-published);
}

#sort-by-views:checked ~ .table &amp;gt; .table-body &amp;gt; .table-row {
  --order: var(--order-by-views);
}

#sort-ascending:checked + .table {
  --sort-order: 1;
}

#sort-by-name:checked ~ #sort-ascending:checked + .table &amp;gt; .table-body {
  flex-direction: column-reverse;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This code covers sorting byÂ three possible columns, andÂ aÂ global modifier toÂ inverse theÂ direction ofÂ theÂ sorting. So, what happens there? &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;TheÂ obvious key property forÂ our solution isÂ anÂ &lt;code&gt;order&lt;/code&gt;. When used inside flex orÂ grid content, itÂ defines theÂ placement ofÂ anÂ element inÂ theÂ flow.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ForÂ most ofÂ our columns, weÂ would use aÂ special variable that defines theÂ direction ofÂ sorting: ascending orÂ descending, this variable isÂ &lt;code&gt;--sort-order&lt;/code&gt; with aÂ default value ofÂ &lt;code&gt;-1&lt;/code&gt;, which makes elements with theÂ bigger value toÂ appear earlier inÂ theÂ flow than those with lower values. AndÂ when needed weÂ can set itÂ toÂ &lt;code&gt;1&lt;/code&gt; toÂ inverse theÂ order.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Then, weÂ would define theÂ &lt;code&gt;order&lt;/code&gt; property using aÂ calculation, inÂ which weÂ would use another variable alongside our direction: &lt;code&gt;calc(var(--order) * var(--sort-order, -1))&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;AndÂ byÂ default, this variable isÂ not set, soÂ theÂ value ofÂ this calc would fallback toÂ &lt;code&gt;initial&lt;/code&gt;. AndÂ this would make theÂ content toÂ appear inÂ theÂ order itÂ isÂ present inÂ &lt;abbr&gt;HTML&lt;/abbr&gt;: this way weÂ don&amp;#39;t need toÂ introduce another variable andÂ can use theÂ &lt;abbr&gt;DOM&lt;/abbr&gt; order forÂ this.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Then, when needed (inÂ our &lt;span class=&quot;nobr&quot;&gt;caseâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;when weÂ toggle anÂ appropriate radio button, but inÂ reality this could beÂ done byÂ toggling class names orÂ setting theÂ variable byÂ any other condition), weÂ set theÂ &lt;code&gt;--order&lt;/code&gt; variable used above toÂ theÂ one weÂ want toÂ use right &lt;span class=&quot;nobr&quot;&gt;nowâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;soÂ when weÂ need toÂ sort byÂ one field, weÂ use theÂ variable forÂ it, andÂ for another field weÂ use theÂ second variable. This way ifÂ we&amp;#39;d need toÂ add aÂ fourth field which weÂ could use forÂ sorting, weÂ would need toÂ introduce just one new &lt;abbr&gt;CSS&lt;/abbr&gt; rule.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;AndÂ now asÂ weÂ say something like â€œuse variable &lt;code&gt;--order-by-published&lt;/code&gt; asÂ aÂ value forÂ &lt;code&gt;--order&lt;/code&gt; forÂ each rowâ€, theÂ value would come from theÂ inline style that weÂ defined inÂ &lt;abbr&gt;HTML&lt;/abbr&gt; andÂ all theÂ elements would beÂ automatically sorted accordingly. Yay!&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;AndÂ lastly, weÂ need toÂ handle anÂ inverted direction case forÂ our default &lt;abbr&gt;DOM&lt;/abbr&gt; order. AsÂ weÂ don&amp;#39;t have variables forÂ itÂ which weÂ could invert inside &lt;code&gt;calc&lt;/code&gt;, weÂ need toÂ doÂ something &lt;span class=&quot;nobr&quot;&gt;elseâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;andÂ I&amp;#39;m doing this byÂ changing theÂ &lt;code&gt;flex-direction&lt;/code&gt; property toÂ &lt;code&gt;column-reverse&lt;/code&gt;. This works only forÂ flex, andÂ ifÂ weÂ would have aÂ grid, asÂ far asÂ IÂ know, weÂ would need toÂ use aÂ variable forÂ our default sorting asÂ well. But here weÂ can cheat aÂ bit.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;caveats&quot;&gt;Caveats&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;This solution works theÂ best forÂ anything that can beÂ represented asÂ anÂ integer. InÂ all theÂ other cases weÂ would need toÂ first, onÂ theÂ &lt;abbr&gt;HTML&lt;/abbr&gt; generation step, toÂ somehow represent our value inÂ integer. ForÂ some values its possible toÂ do, forÂ &lt;span class=&quot;nobr&quot;&gt;othersâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;much harder. ItÂ isÂ also possible toÂ pre-sort our data per each field andÂ instead ofÂ values, use their indexes forÂ each field. But then theÂ sorting itself still could beÂ done just byÂ very simple &lt;abbr&gt;CSS&lt;/abbr&gt;. AndÂ don&amp;#39;t forget that weÂ always have theÂ default &lt;abbr&gt;DOM&lt;/abbr&gt; order forÂ non-integer values: inÂ myÂ table, itÂ isÂ used forÂ sorting theÂ names inÂ alphabetical order.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;This solution isÂ not really aÂ solution, but anÂ experiment, andÂ can beÂ bad forÂ &lt;span class=&quot;nobr&quot;&gt;accessibilityâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;right now its not possible toÂ reorder stuff inÂ aÂ way itÂ would beÂ accessible with keyboard (without confusing teleporting focus) orÂ screen readers. AndÂ while forÂ them weÂ can totally gate theÂ sorting feature out, soÂ itÂ would beÂ anÂ enhancement forÂ those who won&amp;#39;t have problems with it, its better not toÂ doÂ soÂ outside ofÂ experiments, andÂ rely onÂ JS solutions forÂ sorting instead.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;WeÂ can&amp;#39;t animate this sorting, asÂ itÂ uses theÂ default layout mechanism andÂ asÂ long asÂ theÂ &lt;code&gt;order&lt;/code&gt; isÂ not animatable inÂ &lt;abbr&gt;CSS&lt;/abbr&gt; (or, more precisely, isÂ animated inÂ aÂ discrete way), weÂ can&amp;#39;t doÂ much. TheÂ ideal would beÂ ifÂ theÂ &lt;code&gt;order&lt;/code&gt; could beÂ animated byÂ using theÂ transition from its starting dimensions toÂ its final ones, but weÂ don&amp;#39;t even have transitions forÂ &lt;code&gt;auto&lt;/code&gt; width &amp;amp; height, soÂ weÂ can&amp;#39;t expect theÂ same forÂ &lt;code&gt;order&lt;/code&gt; anytime soon (orÂ maybe ever).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;IÂ think this example shows how powerful &lt;abbr&gt;CSS&lt;/abbr&gt; variables can beÂ when used asÂ aÂ part ofÂ data: weÂ can pre-fill some ofÂ theÂ values which weÂ won&amp;#39;t use right away asÂ some variables, andÂ then later use them when needed. This can beÂ used toÂ sort lists, tables andÂ any other stuff, andÂ even toÂ sort byÂ multiple fields (though this would require aÂ bit more code andÂ couldn&amp;#39;t beÂ applied inÂ &lt;em&gt;every&lt;/em&gt; case, IÂ recommend you toÂ try andÂ implement this yourself).&lt;/p&gt;
&lt;p&gt;This was theÂ first article from myÂ recent research ofÂ &lt;abbr&gt;CSS&lt;/abbr&gt; variables, stay tuned andÂ try toÂ sort your stuff using just &lt;abbr&gt;CSS&lt;/abbr&gt; andÂ &lt;abbr&gt;HTML&lt;/abbr&gt; inÂ theÂ meantime!&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Counters and Stones</title>
    <link href="http://kizu.ru/en/blog/counters-and-stones/"/>
    <updated>2018-01-04T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/blog/counters-and-stones</id>
    <content type="html">&lt;h1 id=&quot;counters-and-stones&quot;&gt;Counters andÂ Stones&lt;/h1&gt;
&lt;p&gt;Today&amp;#39;s article isÂ aÂ bit special forÂ me: I&amp;#39;ll explain aÂ solution which IÂ couldn&amp;#39;t find forÂ more than four years. TheÂ problem isÂ not very practical: itÂ was one aspect ofÂ &lt;abbr&gt;CSS&lt;/abbr&gt;-only stuff that could beÂ much easier handled byÂ JS, but IÂ really wanted toÂ find aÂ clean &lt;abbr&gt;HTML&lt;/abbr&gt;&amp;amp;&lt;abbr&gt;CSS&lt;/abbr&gt;-only solution for. AndÂ IÂ have found it. AndÂ inÂ this article, I&amp;#39;ll explain what was theÂ problem andÂ how theÂ solution works.&lt;/p&gt;
&lt;p&gt;But first, IÂ need toÂ say thanks toÂ &lt;a href=&quot;https://twitter.com/Una&quot;&gt;Una&lt;/a&gt;. IÂ was browsing internets andÂ found out myself looking atÂ onÂ one ofÂ her &lt;span class=&quot;nobr&quot;&gt;articlesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;a href=&quot;https://una.im/css-games/&quot;&gt;â€œPure &lt;abbr&gt;CSS&lt;/abbr&gt; Games with Counter-Incrementâ€&lt;/a&gt;. While IÂ had read this article aÂ few times before (IÂ really like &lt;abbr&gt;CSS&lt;/abbr&gt; experiments like that asÂ you can guess!), this time something clicked. IÂ remembered &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#fronteers&quot; id=&quot;fronteers&quot;&gt;one ofÂ myÂ older unfinished experiments&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;I&amp;#39;ve mentioned this experiment inÂ myÂ old lightning talk &lt;a href=&quot;https://fronteers.nl/congres/2013/jam-session/dont-look-into-the-source&quot;&gt;â€œDonâ€™t look into theÂ sourceâ€&lt;/a&gt; atÂ Fronteers 2013 Jam Session.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; which was aÂ bit similar toÂ one ofÂ theÂ games Una created, andÂ how both our examples didn&amp;#39;t solve one hard aspect. But looking atÂ this article now, when IÂ just wrote theÂ article onÂ &lt;a href=&quot;http://kizu.ru/en/blog/flexible-overflow/&quot;&gt;Flexible Overflow&lt;/a&gt;, IÂ looked atÂ theÂ â€œCounter-Incrementâ€ part andÂ the puzzle inÂ myÂ head completed.&lt;/p&gt;
&lt;p&gt;I&amp;#39;ll explain theÂ problem andÂ the solution later, but now look atÂ this, myÂ now finished &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#renju&quot; id=&quot;renju&quot;&gt;experiment&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;This isÂ aÂ really basic implementation ofÂ &lt;a href=&quot;https://en.wikipedia.org/wiki/Gomoku&quot;&gt;Gomoku&lt;/a&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;aÂ game where two players compete onÂ who could purt five consecutive stones first. Only theÂ very basic winning rules are implemented ofÂ course.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; from theÂ past:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/counters-and-stones/#Demo_13x13&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Things you can notice:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;You can place â€œstonesâ€ byÂ clicking/tapping onÂ theÂ line intersections.&lt;/li&gt;
&lt;li&gt;When you place each new stone, theÂ turn passes toÂ another player.&lt;/li&gt;
&lt;li&gt;When aÂ player places five stones inÂ aÂ row, they win.&lt;/li&gt;
&lt;li&gt;Everything there isÂ done using just &lt;abbr&gt;HTML&lt;/abbr&gt;&amp;amp;&lt;abbr&gt;CSS&lt;/abbr&gt;, noÂ JS involved.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Until recently, itÂ was known how toÂ achieve most ofÂ those points inÂ &lt;abbr&gt;CSS&lt;/abbr&gt;: you can see itÂ inÂ Una&amp;#39;s games, forÂ example. &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#except&quot; id=&quot;except&quot;&gt;Except&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;&lt;strong&gt;2018.01.10 update:&lt;/strong&gt; &lt;a href=&quot;https://twitter.com/finnhvman&quot;&gt;Bence&lt;/a&gt; &lt;a href=&quot;https://twitter.com/finnhvman/status/916015929565302784&quot;&gt;solved&lt;/a&gt; this problem independently inÂ his &lt;a href=&quot;https://css-tricks.com/roman-empire-made-pure-css-connect-4-possible/&quot;&gt;â€œConnect 4â€ game&lt;/a&gt;, inÂ aÂ very similar way, but with aÂ few differences.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; forÂ the second &lt;span class=&quot;nobr&quot;&gt;pointâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;passing turns ended upÂ toÂ beÂ theÂ hardest thing. When IÂ did myÂ demo forÂ Fronteers, IÂ had toÂ pass turns manually, byÂ doing anÂ extra click after putting aÂ stone. Una handled this byÂ allowing 5 seconds forÂ each player&amp;#39;s turn, which isÂ also far from ideal.&lt;/p&gt;
&lt;p&gt;InÂ this article, I&amp;#39;ll show you how this can beÂ handled inÂ aÂ way you&amp;#39;d need toÂ click only once toÂ put aÂ stone toÂ pass aÂ turn.&lt;/p&gt;
&lt;p&gt;TheÂ basic idea isÂ that weÂ need toÂ have some kind ofÂ aÂ logic switch, which weÂ would use toÂ change theÂ states ofÂ our elements: turn them onÂ andÂ off. While this can beÂ achieved byÂ using theÂ &lt;code&gt;:checked&lt;/code&gt; state (andÂ inÂ aÂ lot ofÂ cases itÂ isÂ still much better than what I&amp;#39;ll describe there), forÂ our &lt;span class=&quot;nobr&quot;&gt;caseâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;when we&amp;#39;d need toÂ change turns &lt;em&gt;atÂ theÂ same time&lt;/em&gt; when weÂ place stones onÂ aÂ field itÂ wasn&amp;#39;t enough. We&amp;#39;d need toÂ have something that would &lt;em&gt;toggle&lt;/em&gt; theÂ state with each consecutive click onÂ &lt;em&gt;different&lt;/em&gt; items. Here isÂ what IÂ came upÂ with.&lt;/p&gt;
&lt;h2 id=&quot;logic-unit&quot;&gt;Logic Unit&lt;/h2&gt;
&lt;p&gt;TheÂ main idea forÂ our main building block isÂ toÂ use &lt;abbr&gt;CSS&lt;/abbr&gt; &lt;em&gt;counters&lt;/em&gt;. They have this unique property forÂ &lt;abbr&gt;CSS&lt;/abbr&gt;: you can increment them, decrement, andÂ their values would beÂ available all theÂ way down theÂ context they were declared at.&lt;/p&gt;
&lt;p&gt;But here isÂ aÂ problem: weÂ can&amp;#39;t use them anywhere but theÂ &lt;code&gt;content&lt;/code&gt; &lt;abbr&gt;CSS&lt;/abbr&gt; property. So, forÂ aÂ long time, IÂ thought &lt;span class=&quot;nobr&quot;&gt;thatâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;yeah &lt;span class=&quot;nobr&quot;&gt;coolâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;weÂ can have those counters, but weÂ couldn&amp;#39;t use them forÂ anything that deals with logic, only forÂ visual stuff, like representing theÂ number ofÂ things etc.&lt;/p&gt;
&lt;p&gt;Until IÂ looked atÂ this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;0
42
100
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Those are integers that &lt;abbr&gt;CSS&lt;/abbr&gt; counters are able toÂ add toÂ our &lt;abbr&gt;HTML&lt;/abbr&gt; byÂ using &lt;code&gt;content&lt;/code&gt; property. DoÂ you see it? Those numbers have different lengths. One symbol, two symbols, three symbolsâ€¦ That means that based onÂ different values ofÂ aÂ counter, itÂ can actually affect theÂ page&amp;#39;s layout, asÂ theÂ generated content from them would have different widths. AndÂ asÂ IÂ played aÂ lot with stuff that depends onÂ theÂ elements&amp;#39; widths inÂ &lt;a href=&quot;http://kizu.ru/en/blog/flexible-overflow/&quot;&gt;myÂ previous article&lt;/a&gt;, when IÂ noticed this IÂ immediately thought ofÂ how that aspect ofÂ counters can beÂ used!&lt;/p&gt;
&lt;p&gt;IfÂ weÂ would take our example that has aÂ flexible overflow, then make itÂ soÂ itÂ would have some fixed width, then we&amp;#39;d add theÂ counter&amp;#39;s content inside its â€œjumping downâ€ partâ€¦ Look:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/counters-and-stones/#Demo_logic-unit-draft&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can see how when you click there, theÂ checked input increments our counter byÂ &lt;code&gt;100000&lt;/code&gt;, andÂ you can see how theÂ flexible overflow makes this counter toÂ jump down (IÂ removed &lt;code&gt;overflow:hidden&lt;/code&gt; from theÂ container forÂ you toÂ see it) andÂ our hidden content appears.&lt;/p&gt;
&lt;p&gt;That isÂ theÂ basic idea: weÂ use theÂ counter toÂ influence theÂ display ofÂ anÂ element, andÂ when weÂ use theÂ input weÂ didn&amp;#39;t use any combinators like &lt;code&gt;+&lt;/code&gt; orÂ &lt;code&gt;~&lt;/code&gt; toÂ achieve it!&lt;/p&gt;
&lt;p&gt;Now, you can see that it&amp;#39;s kinda strange toÂ increment byÂ &lt;code&gt;100000&lt;/code&gt; just inÂ order forÂ aÂ counter toÂ fit into our box. That isÂ really easy toÂ solve inÂ aÂ way we&amp;#39;d need toÂ change one order ofÂ counter toÂ achieve theÂ same:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/counters-and-stones/#Demo_logic-unit-shorter&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can see how not only itÂ works with just changing from 0 toÂ 10, but itÂ also works with any width.&lt;/p&gt;
&lt;p&gt;IÂ achieved this byÂ reducing theÂ inner width ofÂ theÂ element containing theÂ counter inÂ aÂ way itÂ could fit only one digit:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;box-sizing: border-box;
padding-left: calc(100% - 1.5ch);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I&amp;#39;m using theÂ &lt;code&gt;1.5ch&lt;/code&gt; instead ofÂ &lt;code&gt;1ch&lt;/code&gt; there toÂ ensure there won&amp;#39;t beÂ any weird stuff happening onÂ theÂ edge values: 1 digit would always fit &lt;code&gt;1.5ch&lt;/code&gt;, andÂ two digits would always overflow it.&lt;/p&gt;
&lt;p&gt;You can remember what &lt;code&gt;ch&lt;/code&gt; stands forÂ from &lt;a href=&quot;https://www.w3.org/TR/css-values-3/#ch&quot;&gt;theÂ specs&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€˜ch unitâ€™&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;equal toÂ theÂ used advance measure ofÂ theÂ &amp;quot;0&amp;quot; (&lt;abbr&gt;ZERO&lt;/abbr&gt;, U+0030) glyph found inÂ theÂ font used toÂ render it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;AndÂ that&amp;#39;s exactly theÂ unit we&amp;#39;d like toÂ use there.&lt;/p&gt;
&lt;h3 id=&quot;the-code&quot;&gt;TheÂ code&lt;/h3&gt;
&lt;p&gt;Here isÂ theÂ source forÂ this last example. &lt;abbr&gt;HTML&lt;/abbr&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;input class=&amp;quot;logic-unit&amp;quot; type=&amp;quot;checkbox&amp;quot; id=&amp;quot;LogicUnit&amp;quot;
/&amp;gt;&amp;lt;label for=&amp;quot;LogicUnit&amp;quot;&amp;gt; Click me!&amp;lt;/label&amp;gt;
&amp;lt;span class=&amp;quot;overflower&amp;quot;&amp;gt;
  &amp;lt;span class=&amp;quot;overflower-short&amp;quot;&amp;gt;
    ğŸ™€ ğŸ™€ ğŸ™€
  &amp;lt;/span&amp;gt;
  &amp;lt;span class=&amp;quot;overflower-long&amp;quot;&amp;gt;
  &amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;AndÂ &lt;abbr&gt;CSS&lt;/abbr&gt; (with some unneeded visual stuff omited):&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.logic-unit:checked {
  counter-increment: logic-unit 10;
}

.overflower {
  display: flex;
  flex-wrap: wrap;
}

.overflower-short {
  overflow: hidden;
  flex-grow: 1;
  width: 0;
}

.overflower-long {
  flex-basis: 100%;
  box-sizing: border-box;
  padding-left: calc(100% - 1.5ch);
}

.overflower-long:before {
  content: counter(logic-unit);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;and-or-not-xor&quot;&gt;And, Or, Not, Xor&lt;/h3&gt;
&lt;p&gt;TheÂ best thing with counters: weÂ can use multiple counters atÂ theÂ same time. That means, weÂ can try toÂ implement some logic forÂ multiple counters!&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/counters-and-stones/#Demo_logic-unit-and-or&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;WeÂ achieve this byÂ setting different starting values forÂ our counters andÂ byÂ allowing aÂ different amount ofÂ digits toÂ fit it:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ForÂ &lt;strong&gt;&lt;abbr&gt;AND&lt;/abbr&gt;/OR&lt;/strong&gt; weÂ need toÂ overflow only onÂ 3 digits. Any new digit would beÂ enough.&lt;/li&gt;
&lt;li&gt;ForÂ &lt;strong&gt;&lt;abbr&gt;AND&lt;/abbr&gt;&lt;/strong&gt; weÂ need toÂ overflow only onÂ 4 digits. WeÂ would need toÂ have both counters set.&lt;/li&gt;
&lt;li&gt;ForÂ &lt;strong&gt;&lt;abbr&gt;NOT&lt;/abbr&gt;&lt;/strong&gt; weÂ need toÂ invert theÂ logic andÂ start from theÂ longer number, decreasing itÂ later.&lt;/li&gt;
&lt;li&gt;Finally, &lt;strong&gt;&lt;abbr&gt;XOR&lt;/abbr&gt;&lt;/strong&gt; isÂ achieved byÂ playing with theÂ numbers aÂ bit soÂ any counter would add aÂ digit, but addition ofÂ another one would reduce itÂ back.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;All ofÂ this can beÂ achieved forÂ any number ofÂ counters, andÂ the best part isÂ that weÂ don&amp;#39;t need toÂ know how those counters would beÂ set.&lt;/p&gt;
&lt;h2 id=&quot;board-game&quot;&gt;Board Game&lt;/h2&gt;
&lt;p&gt;All ofÂ this allows usÂ toÂ doÂ aÂ lot ofÂ interesting stuff. InÂ our game these basic logic units are used for:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Passing aÂ turn from one player toÂ another.&lt;/li&gt;
&lt;li&gt;Setting aÂ â€œcheckedâ€ state forÂ each stone&amp;#39;s label.&lt;/li&gt;
&lt;li&gt;Disabling aÂ stone ofÂ another color from being placed inÂ theÂ already &lt;span class=&quot;nobr&quot;&gt;filled-in&lt;/span&gt; space.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;passing-a-turn&quot;&gt;Passing aÂ Turn&lt;/h3&gt;
&lt;p&gt;So, how isÂ theÂ passing ofÂ aÂ turn implemented? It&amp;#39;s rather simple: weÂ need toÂ toggle theÂ state ofÂ our counter that tells which turn itÂ is:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.board {
  counter-reset: White 0 Black 10;
}
.board &amp;gt; input:checked {
  counter-increment: White 10 Black -10;
}
.board &amp;gt; input[id^=White]:checked {
  counter-increment: White -10 Black 10;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Here weÂ handle this forÂ each color, soÂ itÂ would beÂ easier toÂ use later:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.board &amp;gt; section &amp;gt; label &amp;gt; span:after {
  content: counter(Black);
}

.board &amp;gt; section &amp;gt; label[for^=White]:after {
  content: counter(White);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Our board has two layers ofÂ labels: one set forÂ white stones, andÂ &lt;span class=&quot;nobr&quot;&gt;anotherâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;forÂ black ones. They&amp;#39;re positioned one over another, soÂ what weÂ would need toÂ doÂ next isÂ toÂ hide each other layer onÂ each other&amp;#39;s turn. AndÂ our overflower mechanism allows usÂ toÂ doÂ it. Then weÂ add &lt;code&gt;visibility: hidden&lt;/code&gt; onÂ all items ofÂ aÂ layer, andÂ restore itÂ using &lt;code&gt;visibility: visible&lt;/code&gt; only onÂ theÂ part that would beÂ shown onÂ each turn. All ofÂ this makes itÂ soÂ only theÂ proper labels are clickable atÂ each moment, andÂ with each click things change.&lt;/p&gt;
&lt;h3 id=&quot;checked-state&quot;&gt;Checked state&lt;/h3&gt;
&lt;p&gt;This isÂ aÂ part that could beÂ implemented inÂ aÂ different way, &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#selectors&quot; id=&quot;selectors&quot;&gt;forÂ example&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;OrÂ byÂ using 338 selectors forÂ each input-label pair. ItÂ would beÂ effective, but not that interesting.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;, byÂ using theÂ &lt;code&gt;:checked&lt;/code&gt; alongside aÂ lot ofÂ &lt;code&gt;+&lt;/code&gt; combinators. But there are two problems: itÂ would beÂ harder toÂ handle all theÂ stuff forÂ labels, asÂ they would need toÂ beÂ onÂ theÂ same level, andÂ asÂ IÂ found out, Edge has aÂ limit forÂ aÂ number ofÂ combinators that can appear inÂ any given &lt;span class=&quot;nobr&quot;&gt;selectorâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;63. Edge won&amp;#39;t like &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#manycombinators&quot; id=&quot;manycombinators&quot;&gt;this selector&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;There are 337 &lt;span class=&quot;nobr&quot;&gt;starsâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;calculated asÂ 13 columns Ã— 13 rows Ã— 2 âˆ’ 1.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;:checked+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+*+label
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So, inÂ order toÂ beÂ more browser-compatible, andÂ toÂ play more with counters, I&amp;#39;ve implemented theÂ checked state using them. But how? Wouldn&amp;#39;t weÂ need toÂ declare aÂ counter forÂ each input andÂ then somehow connect them toÂ labels?&lt;/p&gt;
&lt;p&gt;Here isÂ when &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#inline&quot; id=&quot;inline&quot;&gt;inline styles andÂ &lt;abbr&gt;CSS&lt;/abbr&gt; variables&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;IÂ really like how you can use &lt;abbr&gt;CSS&lt;/abbr&gt; variables inÂ inline styles, andÂ I&amp;#39;m working onÂ anÂ article toÂ showcase just that, soÂ keep tuned!&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; comes into play:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;input id=&amp;quot;Black1&amp;quot; type=&amp;quot;radio&amp;quot; style=&amp;quot;--stone:B1;&amp;quot;/&amp;gt;

&amp;lt;label for=&amp;quot;Black1&amp;quot; style=&amp;quot;--stone:B1;&amp;quot;&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/label&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Those are &lt;abbr&gt;HTML&lt;/abbr&gt; forÂ anÂ input andÂ aÂ corresponding label. Notice theÂ inline style that has theÂ B1 identifier. WeÂ now can use itÂ inÂ &lt;abbr&gt;CSS&lt;/abbr&gt;, so, when weÂ check anÂ input, weÂ need toÂ set more counters:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.board &amp;gt; input:checked {
  counter-increment: White 10 Black -10 var(--stone) 10;
}
.board &amp;gt; input[id^=White]:checked {
  counter-increment: White -10 Black 10 var(--stone) 10;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note how weÂ can use aÂ &lt;abbr&gt;CSS&lt;/abbr&gt; variable toÂ pass theÂ identifier ofÂ aÂ counter that weÂ want toÂ increment! That works, asÂ well asÂ theÂ following calling ofÂ theÂ counter inside our label:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.board &amp;gt; section &amp;gt; label &amp;gt; span:after {
  content: counter(var(--stone));
}
.board &amp;gt; section &amp;gt; label:after {
  content: counter(Black) counter(var(--stone));
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Here weÂ use theÂ logic unit forÂ this counter inside theÂ label (notice how useful isÂ theÂ inheritance ofÂ theÂ &lt;abbr&gt;CSS&lt;/abbr&gt; variables: weÂ can catch itÂ onÂ theÂ inner span&amp;#39;s pseudo-element), andÂ also asÂ anÂ &lt;strong&gt;OR&lt;/strong&gt; forÂ our label, soÂ weÂ would see itÂ both onÂ theÂ appropriate player&amp;#39;s turn, andÂ when itÂ isÂ checked.&lt;/p&gt;
&lt;p&gt;What isÂ also interesting here isÂ that weÂ don&amp;#39;t need toÂ &lt;em&gt;declare&lt;/em&gt; any ofÂ those &lt;span class=&quot;nobr&quot;&gt;countersâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;code&gt;counter-increment&lt;/code&gt; isÂ enough andÂ byÂ doing soÂ weÂ can create any number ofÂ counters right inÂ your &lt;abbr&gt;HTML&lt;/abbr&gt; (though, IÂ can imagine there can beÂ some limitations).&lt;/p&gt;
&lt;h3 id=&quot;disabling-other-stones&quot;&gt;Disabling Other Stones&lt;/h3&gt;
&lt;p&gt;TheÂ only thing left now isÂ toÂ disable theÂ stone ofÂ another color that isÂ placed atÂ theÂ same spot. With other methods forÂ passing &lt;code&gt;:checked&lt;/code&gt; state weÂ could use other &lt;abbr&gt;CSS&lt;/abbr&gt; properties, like just using &lt;code&gt;z-index&lt;/code&gt; toÂ place our checked label over anything else. But our counter logic allows usÂ toÂ only handle theÂ width, andÂ that isÂ not what weÂ can use forÂ this purpose.&lt;/p&gt;
&lt;p&gt;But weÂ can use theÂ logical &lt;strong&gt;&lt;abbr&gt;NOT&lt;/abbr&gt;&lt;/strong&gt;! So, each stone would know which other stone toÂ disable:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;input id=&amp;quot;Black1&amp;quot; type=&amp;quot;radio&amp;quot; style=&amp;quot;--stone:B1;--notstone:W1;&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;AndÂ then we&amp;#39;d change theÂ counter logic aÂ bit:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.board &amp;gt; input {
  counter-increment: var(--stone) 10;
}
.board &amp;gt; input:checked {
  counter-increment: White 10 Black -10 var(--stone) 100 var(--notstone) -10;
}
.board &amp;gt; input[id^=White]:checked {
  counter-increment: White -10 Black 10 var(--stone) 100 var(--notstone) -10;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ByÂ doing this, when weÂ check one stone, itÂ would make itÂ soÂ another stone won&amp;#39;t achieve its turn state andÂ would always beÂ off!&lt;/p&gt;
&lt;p&gt;InÂ theÂ final example ofÂ theÂ game atÂ theÂ start ofÂ this article you can see that weÂ use theÂ turn state inÂ one other place: forÂ displaying which player&amp;#39;s turn isÂ &lt;span class=&quot;nobr&quot;&gt;nowâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;andÂ that&amp;#39;s aÂ really nice feature ofÂ our method: once added, weÂ can then later use those counters asÂ we&amp;#39;d seem fit.&lt;/p&gt;
&lt;h3 id=&quot;win-conditions-amp-other-stuff&quot;&gt;Win Conditions &amp;amp; Other Stuff&lt;/h3&gt;
&lt;p&gt;Here are aÂ few other fun things about our board game:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;WeÂ can use &lt;code&gt;&amp;lt;button type=&amp;quot;reset&amp;quot;&amp;gt;&lt;/code&gt; to, well, reset theÂ game state when we&amp;#39;d want, asÂ itÂ would reset all our inputs.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Our inputs are inÂ fact &lt;code&gt;radio&lt;/code&gt; inputs. AndÂ you can notice theÂ absence ofÂ theÂ &lt;code&gt;name&lt;/code&gt; 
attribute: this isÂ important, asÂ weÂ don&amp;#39;t want toÂ have any &lt;em&gt;groups&lt;/em&gt; ofÂ inputs, andÂ weÂ don&amp;#39;t want forÂ any checked input toÂ beÂ able toÂ become unchecked onÂ theÂ following click onÂ its label.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;WeÂ have implemented aÂ win condition: 5 consecutive stones ofÂ any color.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This last win condition isÂ aÂ thing that IÂ couldn&amp;#39;t find aÂ counters solution for. Wellâ€¦ there were some ideas, but all ofÂ them would have some serious drawbacks. SoÂ I&amp;#39;ve used theÂ win condition based onÂ combinators. Here are theÂ selectors that determine which player would win:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.board &amp;gt; :not(:nth-child(13n-0)):not(:nth-child(13n-1)):not(:nth-child(13n-2)):not(:nth-child(13n-3))[id^=W]:checked + :checked + :checked + :checked + :checked ~ footer,
.board &amp;gt; :not(:nth-child(13n+1)):not(:nth-child(13n+2)):not(:nth-child(13n+3)):not(:nth-child(13n+4))[id^=W]:checked +*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+:checked ~ footer,
.board &amp;gt; [id^=W]:checked +*+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+*+:checked ~ footer,
.board &amp;gt; :not(:nth-child(13n-0)):not(:nth-child(13n-1)):not(:nth-child(13n-2)):not(:nth-child(13n-3))[id^=W]:checked +*+*+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+*+*+:checked ~ footer {
  --endgame: grid;
  --endmessage: &amp;#39;White won!&amp;#39;;
}

.board &amp;gt; :not(:nth-child(13n-0)):not(:nth-child(13n-1)):not(:nth-child(13n-2)):not(:nth-child(13n-3)):checked + :checked + :checked + :checked + [id^=B]:checked ~ footer,
.board &amp;gt; :not(:nth-child(13n+1)):not(:nth-child(13n+2)):not(:nth-child(13n+3)):not(:nth-child(13n+4)):checked+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+ [id^=B]:checked ~ footer,
.board &amp;gt; :checked+*+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+*+ [id^=B]:checked ~ footer,
.board &amp;gt; :not(:nth-child(13n-0)):not(:nth-child(13n-1)):not(:nth-child(13n-2)):not(:nth-child(13n-3)):checked+*+*+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+*+*+:checked+*+*+*+*+*+*+*+*+*+*+*+*+*+ [id^=B]:checked ~ footer {
  --endgame: grid;
  --endmessage: &amp;#39;Black won!&amp;#39;;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;InÂ each selector group theÂ first one isÂ determining theÂ condition forÂ 5 stones inÂ aÂ horizontal row [â‹¯], theÂ second &lt;span class=&quot;nobr&quot;&gt;oneâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;forÂ first diagonal [â‹°]ï¸, &lt;span class=&quot;nobr&quot;&gt;thirdâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;5 stones inÂ aÂ vertical column [ â‹® ], andÂ the last &lt;span class=&quot;nobr&quot;&gt;oneâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;forÂ another diagonal [ï¸â‹±].&lt;/li&gt;
&lt;li&gt;Each selector except forÂ the vertical one has anÂ extra condition that prevents theÂ false positives. Those are possible, asÂ our rows are not isolated andÂ the stones goÂ one after another, soÂ five stones inÂ aÂ row could beÂ matched when some ofÂ them are inÂ different rows.&lt;/li&gt;
&lt;li&gt;WeÂ can omit most ofÂ theÂ extra stuff, but inÂ order toÂ properly determine which stones are selected, weÂ need toÂ either check theÂ color ofÂ theÂ first orÂ last one inÂ aÂ selector.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;scaling-and-edge-bugs&quot;&gt;Scaling andÂ Edge bugs&lt;/h3&gt;
&lt;p&gt;This kind ofÂ selectors can beÂ done forÂ aÂ board ofÂ any size andÂ for any number ofÂ consecutive stones toÂ win, however, there isÂ Edge. ItÂ won&amp;#39;t allow usÂ toÂ have selectors with &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#combinators&quot; id=&quot;combinators&quot;&gt;63 orÂ more combinators&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Combined, ofÂ any kind, you can see theÂ reduced case inÂ this &lt;a href=&quot;https://codepen.io/kizu/pen/aEydrr&quot;&gt;codepen&lt;/a&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;theÂ selector which have 62 combinators isÂ applied inÂ Edge, but theÂ one containing one extra isÂ not.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;. Look atÂ this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;[id^=W]:not(:nth-child(15n-3)):not(:nth-child(15n-2)):not(:nth-child(15n-1)):not(:nth-child(15n)):checked + *+*+*+*+*+*+*+*+*+*+*+*+*+*+* + :checked + *+*+*+*+*+*+*+*+*+*+*+*+*+*+* + :checked + *+*+*+*+*+*+*+*+*+*+*+*+*+*+* + :checked + *+*+*+*+*+*+*+*+*+*+*+*+*+*+* + :checked ~ p
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ItÂ isÂ aÂ selector forÂ one ofÂ theÂ conditions forÂ the 15Ã—15 grid, andÂ that condition won&amp;#39;t work inÂ Edge. So, basically, our board game &lt;em&gt;still&lt;/em&gt; could beÂ played &lt;span class=&quot;nobr&quot;&gt;thereâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;theÂ counters conditions would &lt;span class=&quot;nobr&quot;&gt;workâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;but weÂ would need toÂ determine who won manually.&lt;/p&gt;
&lt;p&gt;This isÂ aÂ case where I&amp;#39;d really like toÂ see aÂ way inÂ &lt;abbr&gt;CSS&lt;/abbr&gt; toÂ say â€œskip NÂ consecutive elementsâ€ orÂ â€œskin NÂ wrappersâ€, orÂ nth- variants ofÂ theÂ &lt;code&gt;+&lt;/code&gt; andÂ &lt;code&gt;&amp;gt;&lt;/code&gt; combinators. While this would help with anÂ Edge problem (which should beÂ fixed anyway, inÂ myÂ opinion), IÂ often see cases like this orÂ similar, where weÂ need toÂ skip aÂ predetermined number ofÂ elements orÂ wrappers, andÂ right now theÂ only tool weÂ have isÂ that clunky rows ofÂ stars. AndÂ itÂ would beÂ nice toÂ have something better.&lt;/p&gt;
&lt;h3 id=&quot;generated-boards&quot;&gt;Generated Boards&lt;/h3&gt;
&lt;p&gt;When IÂ was playing with all ofÂ that, IÂ created &lt;a href=&quot;https://codepen.io/kizu/pen/goLLdp?editors=1000&quot;&gt;aÂ Codepen&lt;/a&gt; that generates &lt;abbr&gt;HTML&lt;/abbr&gt; forÂ our boards based onÂ theÂ number ofÂ columns andÂ rows, soÂ you can test different layouts andÂ see how, forÂ example, 3x3 orÂ 19x19 would work (orÂ &lt;span class=&quot;nobr&quot;&gt;notâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;inÂ Edge).&lt;/p&gt;
&lt;p&gt;AÂ few things toÂ note:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;TheÂ only &lt;abbr&gt;CSS&lt;/abbr&gt; generated (from Pug, soÂ noÂ need inÂ &lt;abbr&gt;CSS&lt;/abbr&gt;-preprocessor) are those win conditions.&lt;/li&gt;
&lt;li&gt;Everything else isÂ handled byÂ &lt;abbr&gt;CSS&lt;/abbr&gt; variables.&lt;/li&gt;
&lt;li&gt;IÂ set theÂ number ofÂ columns andÂ rows from pug asÂ inline &lt;abbr&gt;CSS&lt;/abbr&gt; variables, soÂ you can just change those two numbers andÂ get theÂ result!&lt;/li&gt;
&lt;li&gt;Some ofÂ theÂ board layouts are untested, forÂ example, theÂ board isÂ drawn using &lt;abbr&gt;CSS&lt;/abbr&gt; gradients, andÂ not everything could work perfectly onÂ each board size.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;ItÂ was very fun forÂ meÂ toÂ play with this newfound way toÂ express logic inÂ &lt;abbr&gt;CSS&lt;/abbr&gt;. ItÂ isÂ sad that there are aÂ lot ofÂ drawbacks with it: that its only appliable forÂ handling stuff that isÂ based onÂ element&amp;#39;s dimensions, andÂ what weÂ can&amp;#39;t use transitions anywhere. But yeah, completing anÂ experiment started inÂ 2013 was really nice.&lt;/p&gt;
&lt;p&gt;AndÂ what would beÂ also very nice isÂ toÂ have something like that inÂ &lt;abbr&gt;CSS&lt;/abbr&gt; natively. Maybe Tab Atkins&amp;#39; ideas about &lt;a href=&quot;https://tabatkins.github.io/specs/css-toggle-states/&quot;&gt;Toggle States&lt;/a&gt; would beÂ there someday? WeÂ can only dream. GoÂ andÂ ping your spec authors andÂ browser developers, create your examples ofÂ handling logic inÂ &lt;abbr&gt;CSS&lt;/abbr&gt; (IÂ can see how these logic units could beÂ used forÂ form validation, forÂ example), andÂ let usÂ move &lt;abbr&gt;CSS&lt;/abbr&gt; forward, soÂ weÂ would have even more stuff toÂ play with.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Flexible Overflow</title>
    <link href="http://kizu.ru/en/blog/flexible-overflow/"/>
    <updated>2017-11-28T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/blog/flexible-overflow</id>
    <content type="html">&lt;h1 id=&quot;flexible-overflow&quot;&gt;Flexible Overflow&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;http://kizu.ru/en/blog/flexible-overflow/sad-lions.gif&quot; alt=&quot;Gif animation showing this article&amp;#39;s effect in action&quot;&gt;&lt;/p&gt;
&lt;p&gt;AÂ lot ofÂ people love responsive sites, andÂ weÂ used toÂ make them with theÂ help ofÂ Media Queries. Today, inÂ theÂ era ofÂ components, weÂ can&amp;#39;t rely just onÂ theÂ width ofÂ our viewport anymore. Our components need toÂ beÂ independent andÂ work inÂ any conditions.&lt;/p&gt;
&lt;p&gt;One ofÂ theÂ solutions everyone isÂ waiting forÂ isÂ &lt;a href=&quot;https://github.com/w3c/csswg-drafts/issues/1031&quot;&gt;Container Queries&lt;/a&gt; (formerly known asÂ Element Queries). But their future isÂ not certain, andÂ while there are &lt;a href=&quot;https://github.com/marcj/css-element-queries&quot;&gt;polyfills&lt;/a&gt; that allow usÂ toÂ use some ofÂ their possible features, theÂ need toÂ polyfill everything can beÂ daunting.&lt;/p&gt;
&lt;p&gt;But should weÂ rely onÂ JS orÂ look atÂ our news feeds inÂ anticipation ofÂ Container Queries all theÂ time? What ifÂ &lt;abbr&gt;CSS&lt;/abbr&gt; isÂ already powerful enough toÂ solve some ofÂ theÂ potential Container Queries use cases right now? What ifÂ &lt;abbr&gt;CSS&lt;/abbr&gt; could even solve some ofÂ theÂ responsive cases that even Container Queries probably &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#queryless&quot; id=&quot;queryless&quot;&gt;couldn&amp;#39;t solve&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Very often weÂ don&amp;#39;t know theÂ dimensions weÂ could rely on, even onÂ per-component basis, soÂ &lt;em&gt;queries&lt;/em&gt; not always could help us, andÂ weÂ need toÂ learn how toÂ use more complex &lt;abbr&gt;CSS&lt;/abbr&gt; toÂ achieve what weÂ want.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;?&lt;/p&gt;
&lt;p&gt;Today I&amp;#39;ll present you with one ofÂ those cases.&lt;/p&gt;
&lt;h2 id=&quot;long-line-of-text-becomes-shorter&quot;&gt;Long Line ofÂ Text Becomes Shorter&lt;/h2&gt;
&lt;p&gt;Whenever weÂ have aÂ very long string that won&amp;#39;t fit our available space, theÂ most obvious solution isÂ &lt;code&gt;text-overflow: ellipsis&lt;/code&gt;. But very often weÂ don&amp;#39;t want toÂ just truncate our long text strings: weÂ could want toÂ substitute itÂ with some other text instead, remove some parts, orÂ replace itÂ with just anÂ icon. That&amp;#39;s what you could see happening inÂ theÂ gif atÂ theÂ start ofÂ this article, andÂ here isÂ aÂ much simpler live example (try toÂ resize theÂ wrapper orÂ toggle theÂ toggler toÂ see how itÂ would behave):&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/flexible-overflow/#Demo_1&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;TheÂ code beyond this example isÂ just some &lt;abbr&gt;HTML&lt;/abbr&gt; &amp;amp; &lt;abbr&gt;CSS&lt;/abbr&gt; which &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#fallback&quot; id=&quot;fallback&quot;&gt;uses&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;With fallback toÂ just &lt;code&gt;text-overflow: ellipsis&lt;/code&gt; when there isÂ noÂ support forÂ &lt;code&gt;flex-wrap&lt;/code&gt;.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; flexbox, andÂ isÂ made toÂ beÂ accessible toÂ screen-readers which would read only theÂ longest part, ignoring theÂ shorter one. Ah, andÂ also whenever you see theÂ shorter line, theÂ longer part would beÂ also accessible asÂ anÂ &lt;abbr&gt;HTML&lt;/abbr&gt; title.&lt;/p&gt;
&lt;h2 id=&quot;the-implementation&quot;&gt;TheÂ Implementation&lt;/h2&gt;
&lt;p&gt;I&amp;#39;ll goÂ straight toÂ theÂ code andÂ would explain some parts ofÂ itÂ later. Here isÂ theÂ &lt;abbr&gt;CSS&lt;/abbr&gt; I&amp;#39;ve written forÂ the above example:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.overflower {
  display: inline-block;
  overflow: hidden;

  box-sizing: border-box;
  max-width: 100%;
  height: 1.5em;
  line-height: 1.5em;

  white-space: nowrap;
  text-overflow: ellipsis;
}

.overflower-long {
  display: inline;
}

.overflower-short {
  display: none;
}

@supports (flex-wrap: wrap) {
  .overflower {
    display: inline-flex;
    flex-wrap: wrap;
  }

  .overflower-short {
    display: block;
    overflow: hidden;

    flex-grow: 1;
    width: 0;

    text-overflow: ellipsis;
  }

  .overflower-long {
    flex-basis: 100%;
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Here isÂ how theÂ markup looks forÂ it:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;span class=&amp;quot;overflower&amp;quot;&amp;gt;
  &amp;lt;span
    class=&amp;quot;overflower-short&amp;quot;
    aria-hidden=&amp;quot;true&amp;quot;
    title=&amp;quot;Some long text that could become shorter&amp;quot;
  &amp;gt;
    Short text here is.
  &amp;lt;/span&amp;gt;
  &amp;lt;span class=&amp;quot;overflower-long&amp;quot;&amp;gt;
    Some long text that could become shorter.
  &amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;TheÂ best part here isÂ that you can nest this construction, thus gaining more than two possible length variations:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/flexible-overflow/#Demo_2&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;AndÂ two more examples: header andÂ aÂ menu, asÂ theÂ more common use cases forÂ something like this:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/flexible-overflow/#Demo_header&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/flexible-overflow/#Demo_menu&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;flex&quot;&gt;Flex&lt;/h3&gt;
&lt;p&gt;So, how andÂ why does this work? Let&amp;#39;s look atÂ &lt;abbr&gt;CSS&lt;/abbr&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;TheÂ first thing you can notice isÂ that most ofÂ theÂ styles are beyond theÂ &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#ie11&quot; id=&quot;ie11&quot;&gt;&lt;code&gt;@supports&lt;/code&gt;&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;WeÂ miss IE11 here, andÂ maybe with some hacks, weÂ could make itÂ work asÂ well, but IÂ don&amp;#39;t think itÂ would worth theÂ effort. You can try though ifÂ you want.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;: that isÂ because everything works only when weÂ can have &lt;code&gt;flex-wrap&lt;/code&gt;, soÂ weÂ would need toÂ have some fallback inÂ case there won&amp;#39;t beÂ any (UC Browser forÂ Android, hello).&lt;/li&gt;
&lt;li&gt;TheÂ next thing isÂ that weÂ need toÂ make theÂ height ofÂ our block fixed (andÂ &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#lh-unit&quot; id=&quot;lh-unit&quot;&gt;equal toÂ line-height&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;That would beÂ anÂ ideal case forÂ &lt;a href=&quot;https://drafts.csswg.org/css-values/#lh&quot;&gt;theÂ lhÂ unit&lt;/a&gt;, can weÂ have itÂ already, please?&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; forÂ simplicity), soÂ weÂ could trim everything that would beÂ wrapped later (rather aÂ common trick I&amp;#39;d say).&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Now, theÂ most interesting part: weÂ need toÂ make theÂ shorter part toÂ disappear when there isÂ enough space forÂ our long part, but then toÂ appear when there won&amp;#39;t be. WeÂ doÂ this byÂ making theÂ short part toÂ take all theÂ remaining space ofÂ theÂ flex flow andÂ then making theÂ long part toÂ take all 100%.&lt;/p&gt;
&lt;p&gt; When there isÂ enough space forÂ the long part itÂ would always take this space. But when its parent would become shorter than theÂ contents ofÂ theÂ long part, theÂ magic part would happen: itÂ would jump toÂ theÂ new line asÂ there was another item before it, andÂ that shorter item, that had basically 0 width before, would &lt;em&gt;grow&lt;/em&gt; toÂ take all theÂ suddenly vacant space.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;InÂ theÂ end, theÂ &lt;abbr&gt;CSS&lt;/abbr&gt; forÂ this effect isÂ rather short. WeÂ just utilize multiple aspects ofÂ flexbox together: wrapping, growing andÂ shrinking.&lt;/p&gt;
&lt;h3 id=&quot;accessibility&quot;&gt;Accessibility&lt;/h3&gt;
&lt;p&gt;While there are some minor caveats that are hard toÂ overcome (when theÂ shorter variant isÂ shown, you could select &amp;amp; copy itÂ alongside theÂ longer &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#overflower-text&quot; id=&quot;overflower-text&quot;&gt;variant&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;ItÂ isÂ possible toÂ work around that byÂ not having theÂ shorter variants asÂ &lt;abbr&gt;HTML&lt;/abbr&gt; content, but inserting itÂ asÂ pseudo-elements byÂ using attributes, see theÂ example with Header above.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;), most ofÂ theÂ a11y stuff isÂ fixable inÂ &lt;abbr&gt;HTML&lt;/abbr&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ForÂ screen readers weÂ need only theÂ longest part, soÂ weÂ can hide everything else using &lt;code&gt;aria-hidden=&amp;#39;true&amp;#39;&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;WeÂ can enhance theÂ experience forÂ users who can use aÂ pointer device andÂ can see theÂ &lt;code&gt;title&lt;/code&gt; attribute&amp;#39;s tooltip byÂ adding itÂ forÂ the short part only. This way, when theÂ text would beÂ displayed atÂ full, weÂ won&amp;#39;t have this tooltip. AndÂ when atÂ least something isÂ hidden we&amp;#39;d get theÂ tooltip onÂ hover.&lt;/li&gt;
&lt;li&gt;IfÂ weÂ would use this method byÂ nesting it, we&amp;#39;d need just one &lt;code&gt;aria-hidden&lt;/code&gt; andÂ &lt;code&gt;title&lt;/code&gt;, both onÂ theÂ topmost short variant.&lt;/li&gt;
&lt;li&gt;AsÂ theÂ crucial part ofÂ this method isÂ based onÂ &lt;code&gt;flex-wrap&lt;/code&gt;, forÂ those who don&amp;#39;t support itÂ weÂ make aÂ fallback toÂ just &lt;code&gt;text-overflow: ellipsis&lt;/code&gt;, soÂ things won&amp;#39;t break inÂ older browsers.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;play-with-flex-css-amp-everything&quot;&gt;Play With Flex, &lt;abbr&gt;CSS&lt;/abbr&gt; &amp;amp; Everything&lt;/h2&gt;
&lt;p&gt;This was just one ofÂ theÂ possible effects you can achieve using powerful modern &lt;abbr&gt;CSS&lt;/abbr&gt;. AndÂ asÂ flexbox isÂ already really wide supported, andÂ fallbacks forÂ itÂ are easy, nothing should stop you from using it. I&amp;#39;ll continue myÂ experiments with flexbox, andÂ later with grids, soÂ stay tuned forÂ more responsive, queryless solutions from me. Ah, andÂ there isÂ also some space forÂ good old floats, they&amp;#39;re still cool andÂ can sometimes achieve stuff that isÂ really hard toÂ doÂ otherwise.&lt;/p&gt;
&lt;p&gt;Things were interesting inÂ &lt;abbr&gt;CSS&lt;/abbr&gt;, they are now, andÂ they&amp;#39;ll always be.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Bemto-Components</title>
    <link href="http://kizu.ru/en/blog/bemto-components/"/>
    <updated>2017-11-23T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/blog/bemto-components</id>
    <content type="html">&lt;h1 id=&quot;bemto-components&quot;&gt;Bemto-Components&lt;/h1&gt;
&lt;p&gt;Here isÂ aÂ thing I&amp;#39;m working onÂ atÂ myÂ free time these days:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kizu.ru/bemto-components/&quot;&gt;bemto-components&lt;/a&gt; (&lt;a href=&quot;https://github.com/kizu/bemto-components&quot;&gt;github repo&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;InÂ theÂ last 6 months, IÂ was working mostly with &lt;abbr&gt;CSS&lt;/abbr&gt; forÂ projects using React andÂ I&amp;#39;ve tried aÂ few ways ofÂ doing components andÂ styles forÂ them. ForÂ styling purposes IÂ found out that &lt;a href=&quot;https://www.styled-components.com&quot;&gt;styled-components&lt;/a&gt; work theÂ best forÂ me: you write proper &lt;abbr&gt;CSS&lt;/abbr&gt; there (andÂ not some kinds ofÂ JS object abominations), andÂ everything works pretty nice.&lt;/p&gt;
&lt;p&gt;However, what IÂ missed isÂ some stuff that IÂ got used toÂ while working with markup inÂ &lt;a href=&quot;https://en.bem.info/&quot;&gt;&lt;abbr&gt;BEM&lt;/abbr&gt;&lt;/a&gt; way. With styled-components you can essentially get only really simple andÂ small components. IfÂ you&amp;#39;d need complex internal structure, you&amp;#39;d need toÂ doÂ more work with plain React/&lt;abbr&gt;JSX&lt;/abbr&gt;, andÂ ifÂ you&amp;#39;d need variations, then you were left just with either extending (which isÂ cumbersome forÂ when you need multiple modifications), orÂ byÂ using interpolations with props inside styled-components (which can become &lt;nobr&gt;&lt;abbr&gt;CSS&lt;/abbr&gt;-in&lt;/nobr&gt;-&lt;span class=&quot;nobr&quot;&gt;JS-in&lt;/span&gt;-&lt;nobr&gt;&lt;abbr&gt;CSS&lt;/abbr&gt;-in&lt;/nobr&gt;-JS rather easily which isÂ unfortunate andÂ not very readable).&lt;/p&gt;
&lt;p&gt;After some experiments, I&amp;#39;ve come upÂ with theÂ project that IÂ think would solve most ofÂ theÂ problems IÂ had with React+styled-components andÂ would provide aÂ lot ofÂ &lt;span class=&quot;nobr&quot;&gt;quality-of&lt;/span&gt;-life features I&amp;#39;ve missed from theÂ &lt;abbr&gt;BEM&lt;/abbr&gt; andÂ &lt;abbr&gt;HTML&lt;/abbr&gt; preprocessors days.&lt;/p&gt;
&lt;h2 id=&quot;so-what-are-they-&quot;&gt;SoÂ What Are They?&lt;/h2&gt;
&lt;p&gt;IÂ won&amp;#39;t goÂ toÂ lengths there, asÂ I&amp;#39;ve already written &lt;a href=&quot;http://kizu.ru/bemto-components/&quot;&gt;aÂ lot ofÂ docs&lt;/a&gt;, soÂ I&amp;#39;ll copy theÂ beginning there:&lt;/p&gt;
&lt;p&gt;Bemto-components are smart components forÂ using &lt;abbr&gt;BEM&lt;/abbr&gt; methodology with React. Best used together with styled-components.&lt;/p&gt;
&lt;p&gt;They provide:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://kizu.ru/bemto-components/#html-structure&quot;&gt;Reusable, configurable, easy toÂ create &lt;abbr&gt;HTML&lt;/abbr&gt; elements.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://kizu.ru/bemto-components/#bem&quot;&gt;Elements andÂ Modifiers from &lt;abbr&gt;BEM&lt;/abbr&gt;.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://kizu.ru/bemto-components/#styled-components&quot;&gt;Styled-components support from theÂ box&lt;/a&gt;, totally optional.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Links above goÂ toÂ theÂ corresponding sections ofÂ theÂ docs, andÂ there are too many features toÂ mention inÂ aÂ blog post, soÂ goÂ there â†‘, each example there isÂ anÂ interactive playground byÂ theÂ way.&lt;/p&gt;
&lt;h2 id=&quot;bemto-button&quot;&gt;Bemto-button&lt;/h2&gt;
&lt;p&gt;However, ifÂ you&amp;#39;d want toÂ see aÂ more real-life example, there isÂ another project: &lt;a href=&quot;https://github.com/bemto/bemto-button&quot;&gt;bemto-button&lt;/a&gt;, itÂ isÂ aÂ foundation forÂ all theÂ buttons IÂ use inÂ myÂ markup forÂ more than 4 years, now inÂ aÂ form ofÂ aÂ React component.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kizu.ru/bemto-components/#bemtobutton&quot;&gt;TheÂ docs forÂ it&lt;/a&gt; are incorporated into theÂ docs forÂ bemto-components, andÂ there isÂ anÂ interactive playground inÂ all theÂ examples asÂ well.&lt;/p&gt;
&lt;p&gt;This button component isÂ theÂ example ofÂ why IÂ made bemto-components: itÂ was really easy toÂ create, andÂ now itÂ isÂ really easy toÂ use.&lt;/p&gt;
&lt;h2 id=&quot;future&quot;&gt;Future&lt;/h2&gt;
&lt;p&gt;All ofÂ this isÂ just aÂ start: not all theÂ features ofÂ bemto-components are there inÂ theÂ docs (andÂ those docs probably contain aÂ lot ofÂ typos andÂ overall bad-written, asÂ IÂ didn&amp;#39;t yet have time toÂ review them), but I&amp;#39;m planning toÂ add new features, write new docs, andÂ create new components similar toÂ bemto-button.&lt;/p&gt;
&lt;p&gt;IfÂ you&amp;#39;re using React andÂ styled-components (or, forÂ bemto-components, anything else, asÂ they are pretty styling system agnostic atÂ theÂ moment), IÂ hope you&amp;#39;ll try them andÂ would tell meÂ what doÂ you think.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Keyboard-Only Focus</title>
    <link href="http://kizu.ru/en/blog/keyboard-only-focus/"/>
    <updated>2017-06-27T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/blog/keyboard-only-focus</id>
    <content type="html">&lt;h1 id=&quot;keyboard-only-focus&quot;&gt;Keyboard-Only Focus&lt;/h1&gt;
&lt;p&gt;One ofÂ theÂ things IÂ couldn&amp;#39;t manage toÂ find aÂ solution forÂ aÂ long time was aÂ problem ofÂ focus styles onÂ interactive elements. TheÂ problem was: when you have anÂ element with some &lt;code&gt;:focus&lt;/code&gt; styles, they&amp;#39;re applied not only toÂ theÂ focused state itself but also after you just click onÂ this element (andÂ itÂ behaves differently forÂ different elements inÂ different browsers, ofÂ course).&lt;/p&gt;
&lt;p&gt;What this meant isÂ that whenever you wanted toÂ have some custom element, you would need toÂ compromise inÂ how theÂ focus state would look like, because ifÂ you&amp;#39;d make itÂ too bright orÂ distinct from theÂ normal state, users would see itÂ whenever they&amp;#39;d click theÂ elements with those styles. SoÂ you&amp;#39;re either getting theÂ too noticeable effect when itÂ isÂ not needed orÂ not enough noticeable effect when itÂ isÂ needed. Accessibility-wise, theÂ former is, ofÂ course, better, but what ifÂ weÂ could make those styles not toÂ apply when you click atÂ all?&lt;/p&gt;
&lt;p&gt;InÂ this post, I&amp;#39;ll present toÂ you &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#solution&quot; id=&quot;solution&quot;&gt;theÂ solution&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;You can jump straight toÂ &lt;a href=&quot;#proper-solution&quot;&gt;theÂ final solution&lt;/a&gt;, but IÂ recommend you toÂ read theÂ whole post anyway inÂ order toÂ better understand it.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; IÂ had found. ItÂ isÂ not perfect, but IÂ think this isÂ enough forÂ usÂ toÂ start making our elements both having aÂ distinct bright focus state andÂ beÂ good looking when users would use aÂ mouse, aÂ trackpad etc.&lt;/p&gt;
&lt;h2 id=&quot;current-state-of-the-problem&quot;&gt;Current State ofÂ theÂ Problem&lt;/h2&gt;
&lt;p&gt;ToÂ understand theÂ problem better, weÂ should look atÂ how things behave inÂ different browsers forÂ the simplest test case.&lt;/p&gt;
&lt;p&gt;Try toÂ hover, click andÂ switch focus over those controls:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/keyboard-only-focus/#Demo_1&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#safari&quot; id=&quot;safari&quot;&gt;Browsers&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Note that theÂ Safari doesn&amp;#39;t get keyboard focus forÂ links byÂ default (you need toÂ enable itÂ inÂ its preferences forÂ this), but still gets theÂ state onÂ click.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; behave aÂ bit differently there:&lt;/p&gt;
&lt;h3 id=&quot;which-browsers-get-the-focus-ring-after-click&quot;&gt;Which Browsers Get theÂ Focus Ring After Click&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:left&quot;&gt;Browser&lt;/th&gt;
&lt;th&gt;Button&lt;/th&gt;
&lt;th&gt;Link&lt;/th&gt;
&lt;th&gt;Span&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;Chrome&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;Edge&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;Firefox Win&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;Firefox Mac&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;No&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;Safari&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;No&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Yes*&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;WeÂ can already see that forÂ most elements inÂ all browsers weÂ would get that focused state when we&amp;#39;d click our custom element, while forÂ the &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt;sÂ inÂ Safari andÂ Firefox forÂ Mac weÂ won&amp;#39;t.&lt;/p&gt;
&lt;h2 id=&quot;possible-solution-in-the-specs-&quot;&gt;Possible Solution inÂ theÂ Specs?&lt;/h2&gt;
&lt;p&gt;One thing weÂ should always doÂ when weÂ start experimenting isÂ toÂ see ifÂ there isÂ already aÂ solution inÂ current orÂ incoming specifications.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://drafts.csswg.org/selectors-4/#the-focusring-pseudo&quot;&gt;TheÂ latest draft ofÂ Selectors Level 4&lt;/a&gt; provides usÂ with two new focus-related pseudo-classes: &lt;code&gt;focus-within&lt;/code&gt; andÂ &lt;code&gt;focus-ring&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;:focus-within&lt;/code&gt; isÂ essentially aÂ &lt;code&gt;:focus&lt;/code&gt; that works like &lt;code&gt;:hover&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;whenever children ofÂ anÂ element would get &lt;code&gt;:focus&lt;/code&gt;, theÂ element would get &lt;code&gt;:focus-within&lt;/code&gt; (andÂ the element would get itÂ when focused itself, ofÂ course). IÂ can see how that would beÂ aÂ really useful tool inÂ future, but forÂ our case it&amp;#39;s rather useless (unless we&amp;#39;d try toÂ doÂ some really wild things).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;:focus-ring&lt;/code&gt; seems like aÂ tool made specifically forÂ our use-&lt;span class=&quot;nobr&quot;&gt;caseâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;itÂ isÂ kinda theÂ old &lt;code&gt;:focus&lt;/code&gt;, but with this added: &lt;q&gt;[â€¦] andÂ the UA determines via heuristics that theÂ focus should beÂ specially indicated onÂ theÂ element&lt;/q&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;InÂ theory, &lt;code&gt;:focus-ring&lt;/code&gt; should &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#although&quot; id=&quot;although&quot;&gt;help us&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;OfÂ course, we&amp;#39;d need toÂ implement itÂ using progressive enhancement: declaring all theÂ styles forÂ &lt;code&gt;:focus&lt;/code&gt;, then removing theÂ styles onÂ &lt;code&gt;:not(:focus-ring)&lt;/code&gt;, asÂ otherwise, weÂ would lose inÂ keyboard accessibility atÂ older browsers.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;: weÂ could use itÂ forÂ keyboard focus styles while leaving theÂ normal &lt;code&gt;:focus&lt;/code&gt; without anything excess. But there are two problems: noÂ browser, asÂ far asÂ IÂ know, supports theÂ property from theÂ spec andÂ only Firefox supports its &lt;code&gt;:-moz-focusring&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/:-moz-focusring&quot;&gt;old proprietary pseudo-class&lt;/a&gt;, which was aÂ base forÂ aÂ new one. AndÂ this pseudo-class isÂ already aÂ bit flawed:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/keyboard-only-focus/#Demo_2&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;IfÂ you&amp;#39;d look atÂ this example inÂ Firefox, you could see two different issues:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;AtÂ Firefox forÂ Mac itÂ would work properly unless you&amp;#39;d click onÂ aÂ styled span, inÂ which case you&amp;#39;ll see theÂ focus-ring. That&amp;#39;s unfortunate, asÂ while forÂ proper native controls things are ok, I&amp;#39;m sure there would beÂ cases when people would like toÂ have this kind ofÂ control over interactive parts ofÂ pages that should have theÂ same behavior asÂ theÂ native controls. But asÂ things are work asÂ intended atÂ Windows, maybe that behavior atÂ Mac isÂ aÂ bug? Probably weÂ could see itÂ fixed inÂ future.&lt;/li&gt;
&lt;li&gt;This issue isÂ bigger andÂ &lt;span class=&quot;nobr&quot;&gt;worseâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;asÂ &lt;a href=&quot;https://twitter.com/patrick_h_lauke/status/879808288669433857&quot;&gt;Patrick has mentioned&lt;/a&gt;, there isÂ aÂ really weird heuristic which makes theÂ &lt;code&gt;:-moz-focusring&lt;/code&gt; toÂ apply all-the-time once you&amp;#39;ve used aÂ keyboard navigation onÂ page atÂ least once. That makes this solution not stable enough. Especially, given that inÂ some cases IÂ managed toÂ â€œbreakâ€ Firefox making itÂ toÂ consider &lt;strong&gt;every&lt;/strong&gt; page toÂ beÂ inÂ this keyboard-navigation &lt;span class=&quot;nobr&quot;&gt;always-on&lt;/span&gt; from theÂ start andÂ onÂ refresh, which was fixed only after theÂ browser restart.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;InÂ other browsers, you shouldn&amp;#39;t see anything there unless someone would already implement theÂ &lt;code&gt;:focus-ring&lt;/code&gt;. IfÂ that would &lt;span class=&quot;nobr&quot;&gt;happenâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;tell meÂ andÂ I&amp;#39;ll update this post!&lt;/p&gt;
&lt;h2 id=&quot;my-initial-solution&quot;&gt;MyÂ Initial Solution&lt;/h2&gt;
&lt;p&gt;IÂ was playing with one ofÂ myÂ favorite &lt;abbr&gt;CSS&lt;/abbr&gt; &lt;span class=&quot;nobr&quot;&gt;propertiesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;code&gt;visibility&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;when IÂ had myÂ â€œbingoâ€ moment. After validating myÂ idea andÂ seeing itÂ work IÂ was really surprised IÂ didn&amp;#39;t come toÂ this solution before. After &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#nope&quot; id=&quot;nope&quot;&gt;some testing&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Apparently, IÂ didn&amp;#39;t test enough :( AsÂ &lt;a href=&quot;https://twitter.com/iandevlin&quot;&gt;Ian&lt;/a&gt; &lt;a href=&quot;https://twitter.com/iandevlin/status/879796311566012416&quot;&gt;pointed out&lt;/a&gt; after IÂ initially published this post, IÂ didn&amp;#39;t test theÂ solution enough atÂ Firefox forÂ Windows. That meant two things: atÂ Windows theÂ &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt; still had theÂ focusring visible, andÂ IÂ didn&amp;#39;t know about theÂ heuristic ofÂ theÂ &lt;code&gt;:-moz-focusring&lt;/code&gt; that made theÂ button with myÂ solution completely unusable after user would use keyboard forÂ atÂ least once. IÂ leave this solution toÂ show what could beÂ done ifÂ not forÂ Firefox, andÂ invite you toÂ look atÂ theÂ &lt;a href=&quot;#proper-solution&quot;&gt;final proper solution&lt;/a&gt; below.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;, IÂ found out that not everything isÂ soÂ smooth, but more onÂ this later.&lt;/p&gt;
&lt;h3 id=&quot;visibility&quot;&gt;Visibility&lt;/h3&gt;
&lt;p&gt;IÂ think this property deserves its own separate article just toÂ show all theÂ things you can doÂ with it. But forÂ now I&amp;#39;ll briefly tell which its features would beÂ really useful forÂ our case:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Whenever you have anÂ element with &lt;code&gt;visibility: hidden&lt;/code&gt;, you can use &lt;code&gt;visibility: visible&lt;/code&gt; onÂ its children toÂ make them visible.&lt;/li&gt;
&lt;li&gt;Whenever you hide anÂ element using &lt;code&gt;visibility: hidden&lt;/code&gt;, itÂ would not only become visually invisible (like with &lt;code&gt;opacity&lt;/code&gt;), but itÂ wouldn&amp;#39;t also get keyboard focus andÂ wouldn&amp;#39;t beÂ visible toÂ assistive technologies. You can guess that theÂ part about theÂ keyboard focus isÂ what interests usÂ there.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;You could already see where all ofÂ this leads usÂ to: what ifÂ we&amp;#39;ll add another element inside our interactive element, then use &lt;code&gt;visibility: hidden&lt;/code&gt; onÂ theÂ element itself, but then return its contents back with &lt;code&gt;visibility: visible&lt;/code&gt;?&lt;/p&gt;
&lt;p&gt;TheÂ answer: theÂ element would become accessible only using pointing-and-clicking devices, asÂ clicking onÂ theÂ insides ofÂ aÂ hidden element still triggers all theÂ events onÂ it. OfÂ course, that&amp;#39;s not exactly what weÂ need, asÂ weÂ actually need theÂ keyboard focus andÂ don&amp;#39;t want toÂ lose inÂ accessibility inÂ any way.&lt;/p&gt;
&lt;h3 id=&quot;when-to-hide&quot;&gt;When toÂ Hide&lt;/h3&gt;
&lt;p&gt;But then IÂ was wondering: what ifÂ weÂ would use this method ofÂ hiding-and-showing only when theÂ pointer device isÂ used? TheÂ pseudo-classes &lt;code&gt;:hover&lt;/code&gt; andÂ &lt;code&gt;:active&lt;/code&gt; come toÂ mind.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IfÂ we&amp;#39;d use &lt;code&gt;:hover&lt;/code&gt; there, everything would work almost asÂ weÂ would intend, but there would beÂ aÂ small issue ofÂ when we&amp;#39;d hover anÂ element, andÂ then we&amp;#39;d want toÂ use keyboard navigation, weÂ couldn&amp;#39;t get aÂ focus onÂ this element.&lt;/li&gt;
&lt;li&gt;IfÂ we&amp;#39;d use &lt;code&gt;:active&lt;/code&gt;, then things would almost work, but theÂ problem would beÂ that when you call anÂ action onÂ anÂ interactive element using aÂ keyboard, then some browsers actually apply &lt;code&gt;:active&lt;/code&gt; state onÂ this element. TheÂ action would pass, but atÂ theÂ same time, we&amp;#39;ll lose theÂ focused state onÂ theÂ element.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;After playing aÂ bit with different combinations, theÂ most logical way would beÂ toÂ use both states: &lt;code&gt;:hover:active&lt;/code&gt;. Unless weÂ interact with anÂ element with something that isÂ actually pointing itÂ weÂ won&amp;#39;t trigger this state. With it, our solution would look like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.Button:active:hover {
    visibility: hidden;
}

:active:hover &amp;gt; .Button-Content {
    visibility: visible;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;OfÂ course, inÂ that case, we&amp;#39;d need toÂ move all theÂ visual styling ofÂ theÂ button toÂ theÂ inner element, andÂ use theÂ parent element only forÂ layout.&lt;/p&gt;
&lt;p&gt;AndÂ then when we&amp;#39;d need toÂ declare all theÂ states like &lt;code&gt;:hover&lt;/code&gt;, &lt;code&gt;:active&lt;/code&gt; andÂ &lt;code&gt;:focus&lt;/code&gt;, we&amp;#39;d need toÂ doÂ them using &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#itsok&quot; id=&quot;itsok&quot;&gt;selectors&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Note that weÂ don&amp;#39;t need toÂ add theÂ parent&amp;#39;s element class toÂ theÂ state when itÂ isÂ used like &lt;span class=&quot;nobr&quot;&gt;thatâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;there are noÂ performance issues due toÂ how theÂ selector matching works inÂ browsers.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; like &lt;code&gt;:focus &amp;gt; .Button-Content&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Here, look atÂ this example (better not inÂ Firefox forÂ now):&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/keyboard-only-focus/#Demo_3&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We&amp;#39;re almost there! IfÂ you&amp;#39;d look atÂ this example inÂ Chrome orÂ Edge, everything would work perfectly: when you&amp;#39;d click those buttons, they would work andÂ won&amp;#39;t become visibly focused, but you would still beÂ able toÂ focus them from theÂ keyboard andÂ see theÂ focus ring.&lt;/p&gt;
&lt;p&gt;However, there are aÂ few issues inÂ other browsers: Safari andÂ Firefox. InÂ Safari theÂ first button (theÂ one that isÂ made using &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt;) would suddenly have theÂ focus state clipped asÂ ifÂ theÂ parent button had &lt;code&gt;overflow: hidden&lt;/code&gt; (while this isÂ not theÂ case). This isÂ easily fixed byÂ adding &lt;code&gt;position: relative&lt;/code&gt; onÂ theÂ inner element which somehow fixes &lt;a href=&quot;https://bugs.webkit.org/show_bug.cgi?id=173872&quot;&gt;this bug&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;But inÂ Firefoxâ€¦ Well, our &lt;code&gt;:hover:active&lt;/code&gt; stuff just doesn&amp;#39;t work. AndÂ even more toÂ it, ifÂ we&amp;#39;d actually listen toÂ theÂ button&amp;#39;s events, then onÂ &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt; &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#fxbug&quot; id=&quot;fxbug&quot;&gt;weÂ won&amp;#39;t get&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;IÂ suspect that there isÂ &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=1375877&quot;&gt;aÂ related bug inÂ bugzilla&lt;/a&gt; forÂ this, but maybe there are others, feel free toÂ find ifÂ some other bug fits better!&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; aÂ &lt;code&gt;click&lt;/code&gt; when weÂ click (andÂ that should beÂ aÂ &lt;em&gt;click&lt;/em&gt;, not aÂ tap!). That only happens when you change theÂ &lt;code&gt;visibility&lt;/code&gt; ofÂ aÂ &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt; onÂ theÂ &lt;code&gt;:active&lt;/code&gt; state.&lt;/p&gt;
&lt;h3 id=&quot;fixing-firefox&quot;&gt;Fixing Firefox&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Update from 28 June 2017:&lt;/strong&gt; AtÂ theÂ time ofÂ writing this part IÂ didn&amp;#39;t test things inÂ Firefox forÂ Win. After testing itÂ there IÂ found out that this solution isÂ completely unusable due toÂ various problems inÂ Firefox forÂ Windows&amp;#39; implementation ofÂ buttons. &lt;strong&gt;DoÂ not use this fix&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;After spending aÂ lot ofÂ time onÂ trying toÂ find aÂ fix forÂ Firefox, theÂ best fix IÂ could find was this:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;TheÂ &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt; itself actually worked asÂ intended always inÂ Firefox, soÂ weÂ don&amp;#39;t need toÂ doÂ anything forÂ it.&lt;/p&gt;
&lt;p&gt; So, only forÂ Firefox, we&amp;#39;d need toÂ restore its visibility forÂ the active state: &lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;  button.Button:active:not(:-moz-focusring) {
     visibility: inherit;
  }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; Two things toÂ note there:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;We&amp;#39;re restoring theÂ &lt;code&gt;visibility&lt;/code&gt; using &lt;code&gt;inherit&lt;/code&gt;, asÂ inÂ all cases when you need toÂ &lt;strong&gt;restore&lt;/strong&gt; theÂ &lt;code&gt;visibility&lt;/code&gt; it&amp;#39;s better toÂ use &lt;code&gt;inherit&lt;/code&gt; instead ofÂ &lt;code&gt;visible&lt;/code&gt;, because otherwise inside aÂ &lt;code&gt;visibility: hidden&lt;/code&gt; context weÂ would suddenly make our element visible. InÂ our case, itÂ doesn&amp;#39;t matter much, but it&amp;#39;s just aÂ good practice toÂ get used to.&lt;/li&gt;
&lt;li&gt;ForÂ applying styles just forÂ Firefox I&amp;#39;m using theÂ pseudo-class that only FxÂ &lt;span class=&quot;nobr&quot;&gt;understandsâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;code&gt;:-moz-focusring&lt;/code&gt;, wrapping itÂ with &lt;code&gt;:not()&lt;/code&gt; asÂ that&amp;#39;s theÂ case when we&amp;#39;d want itÂ toÂ work.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ForÂ interactive links, spans andÂ other non-button elements we&amp;#39;d need toÂ use our method onÂ &lt;code&gt;:hover&lt;/code&gt;, which isÂ not ideal asÂ IÂ mentioned before, but what can weÂ do? AtÂ least, weÂ can add anÂ extra guard not toÂ hide elements onÂ hover when they&amp;#39;re already focused. AndÂ we&amp;#39;d also use theÂ same &lt;code&gt;:not(:-moz-focusring)&lt;/code&gt; hack, andÂ itÂ even would make some sense there!&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;  .Button:not(button):hover:not(:focus):not(:-moz-focusring) {
      visibility: hidden;
  }

  :not(button):hover:not(:focus):not(:-moz-focusring) &amp;gt; .Button-Content {
      visibility: visible;
  }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; Note that weÂ doÂ this not forÂ buttons, asÂ adding this stuff forÂ them onÂ hover would make them flicker, andÂ weÂ already have native buttons inÂ FxÂ toÂ behave like weÂ want them to.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;final-initial-solution&quot;&gt;Final Initial Solution&lt;/h3&gt;
&lt;p&gt;With all those fixes, our example would look like this andÂ should work theÂ same inÂ all modern browsers:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/keyboard-only-focus/#Demo_4&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;But not that fast. InÂ Firefox forÂ Windows there are severe problems with buttons&amp;#39; implementation which lead toÂ this solution being unusable. Thanks forÂ &lt;a href=&quot;https://twitter.com/iandevlin&quot;&gt;Ian Devlin&lt;/a&gt; forÂ pointing this out. InÂ Firefox forÂ Windows you still would see theÂ focus ring over theÂ &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt; there onÂ click, andÂ after you&amp;#39;d use keyboard navigation atÂ least once, things would goÂ completely &lt;span class=&quot;nobr&quot;&gt;wrongâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;Firefox would treat each &lt;code&gt;:focus&lt;/code&gt; asÂ ifÂ itÂ has &lt;code&gt;:-moz-focusring&lt;/code&gt;, which would beÂ multiplied byÂ another problem with buttons which would lead toÂ &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt; not toÂ register clicks.&lt;/p&gt;
&lt;p&gt;You can see how this initial solution worked onÂ &lt;a href=&quot;https://codepen.io/kizu/pen/dRZzyP?editors=1100&quot;&gt;this CodePen pen&lt;/a&gt;, without any extra styling (except forÂ &lt;code&gt;all: initial&lt;/code&gt; onÂ buttons).&lt;/p&gt;
&lt;h2 id=&quot;proper-solution&quot;&gt;Proper Solution&lt;/h2&gt;
&lt;p&gt;After writing andÂ publishing this article, andÂ then finding out theÂ actual solution just don&amp;#39;t work inÂ Firefox forÂ Windows (andÂ not just not &lt;span class=&quot;nobr&quot;&gt;workâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;inÂ some conditions itÂ makes theÂ buttons inaccessible), I&amp;#39;ve tried toÂ find aÂ proper solution. And, IÂ think, IÂ found it! Still not ideal atÂ Firefox forÂ Windows, but without those severe problems. IÂ hope.&lt;/p&gt;
&lt;p&gt;TheÂ solution came after watching &lt;a href=&quot;https://www.youtube.com/watch?v=Pe0Ce1WtnUM&quot;&gt;this video byÂ Rob Dobson&lt;/a&gt; that &lt;a href=&quot;https://twitter.com/pepelsbey_&quot;&gt;Vadim Makeev&lt;/a&gt; had suggested toÂ meÂ andÂ reading &lt;a href=&quot;https://www.sitepoint.com/when-do-elements-take-the-focus/&quot;&gt;this article about tabindex&lt;/a&gt; that was suggested byÂ &lt;a href=&quot;https://twitter.com/patrick_h_lauke&quot;&gt;Patrick H. Lauke&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Look atÂ it:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/keyboard-only-focus/#Demo_5&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;IfÂ should work everywhere &lt;em&gt;except&lt;/em&gt; forÂ one case: only inÂ Firefox forÂ Windows after you&amp;#39;ll use keyboard navigation atÂ least once, you&amp;#39;ll see focus ring after clicking onÂ theÂ &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt; element. Maybe itÂ isÂ possible toÂ fix this case, but its &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#ihatefx&quot; id=&quot;ihatefx&quot;&gt;not critical&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Everything would work properly except forÂ the visual focus ring even inÂ this case, not like with theÂ previous solution, andÂ its theÂ Firefox that should start with fixing its own problems with theÂ &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt;, not usÂ finding hacky workarounds forÂ them.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;TheÂ fun thing: this solution isÂ even simpler than theÂ previous one.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;We&amp;#39;re just adding aÂ &lt;code&gt;tabindex=&amp;quot;-1&amp;quot;&lt;/code&gt; toÂ theÂ inner element, which makes all browsers toÂ set actual focus not onÂ theÂ interactive element itself, but onÂ its insides. AndÂ when anÂ element has focus inside ofÂ it, all theÂ keyboard events would still work properly, soÂ you could â€œclickâ€ this button from keyboard without any problems. This isÂ possible due toÂ how browsers handle that negative &lt;span class=&quot;nobr&quot;&gt;tabindexâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;they don&amp;#39;t put elements with itÂ toÂ theÂ keyboard focus list, but make itÂ possible toÂ focus those elements byÂ clicking onÂ them orÂ byÂ setting focus programmatically.&lt;/li&gt;
&lt;li&gt;TheÂ only place where this fix doesn&amp;#39;t work isÂ Firefox forÂ Windows. There, only forÂ aÂ &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt; element, you would still see theÂ focus ring. I&amp;#39;ve fixed itÂ using theÂ &lt;code&gt;:-moz-focusring&lt;/code&gt; byÂ removing theÂ focus styles when weÂ don&amp;#39;t need them. OfÂ course, due toÂ Firefox&amp;#39; strange heuristic, after you&amp;#39;ll use keyboard navigation atÂ least once, you&amp;#39;ll then see this focusring onÂ click, but that&amp;#39;s aÂ minor drawback andÂ everything would still work otherwise.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Here isÂ anÂ &lt;abbr&gt;HTML&lt;/abbr&gt; &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#similar&quot; id=&quot;similar&quot;&gt;similar&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Here andÂ inÂ theÂ later &lt;abbr&gt;CSS&lt;/abbr&gt; example IÂ used more simplified classnames andÂ overall changed things aÂ bit forÂ them toÂ beÂ more readable, asÂ well asÂ not mentioning all theÂ reset andÂ visual styles forÂ our buttons.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; toÂ theÂ one used forÂ this solution:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;button class=&amp;quot;Button&amp;quot; type=&amp;quot;button&amp;quot; tabindex=&amp;quot;0&amp;quot;&amp;gt;
    &amp;lt;span class=&amp;quot;Button-Content&amp;quot; tabindex=&amp;quot;-1&amp;quot;&amp;gt;
        I&amp;#39;m a button!
    &amp;lt;/span&amp;gt;
&amp;lt;/button&amp;gt;

&amp;lt;a class=&amp;quot;Button&amp;quot; href=&amp;quot;#x&amp;quot; tabindex=&amp;quot;0&amp;quot;&amp;gt;
    &amp;lt;span class=&amp;quot;Button-Content&amp;quot; tabindex=&amp;quot;-1&amp;quot;&amp;gt;
        I&amp;#39;m a link!
    &amp;lt;/span&amp;gt;
&amp;lt;/a&amp;gt;

&amp;lt;span class=&amp;quot;Button&amp;quot; tabindex=&amp;quot;0&amp;quot;&amp;gt;
    &amp;lt;span class=&amp;quot;Button-Content&amp;quot; tabindex=&amp;quot;-1&amp;quot;&amp;gt;
        I&amp;#39;m a span!
    &amp;lt;/span&amp;gt;
&amp;lt;/span&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;AndÂ here isÂ theÂ &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#codepen&quot; id=&quot;codepen&quot;&gt;final &lt;abbr&gt;CSS&lt;/abbr&gt;&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;You can see how itÂ works with this literal &lt;abbr&gt;CSS&lt;/abbr&gt; onÂ &lt;a href=&quot;https://codepen.io/kizu/pen/OgzMeQ?editors=1100&quot;&gt;this CodePen pen&lt;/a&gt;, without any extra styling (except forÂ &lt;code&gt;all: initial&lt;/code&gt; onÂ buttons).&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; forÂ our method:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;/* Fixing the Safari bug for `&amp;lt;button&amp;gt;`s overflow */
.Button-Content {
    position: relative;
}

/* All the states on the inner element */
:hover &amp;gt; .Button-Content {
    background: blue;
}

:active &amp;gt; .Button-Content {
    background: darkorange;
}

:focus &amp;gt; .Button-Content {
    box-shadow: 0 0 3px 7px lime;
}

/* Removing the focus ring styles specifically for button in Firefox */
button:not(:-moz-focusring):focus &amp;gt; .ComplexButton-Content {
    box-shadow: none;
}

/* Removing default outline only after we&amp;#39;ve added our custom one */
.Button:focus,
.Button-Content:focus {
    outline: none;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that while theÂ parent element isÂ not hidden atÂ any moment unlike atÂ theÂ previous solution with &lt;code&gt;visibility&lt;/code&gt;, itÂ isÂ still better toÂ have all theÂ styles forÂ our element onÂ theÂ inner element due toÂ various reasons.&lt;/p&gt;
&lt;p&gt;AsÂ anÂ added bonus, ifÂ we&amp;#39;d want, weÂ can now choose how we&amp;#39;d want toÂ have our element when focusing itÂ programmatically: weÂ can have aÂ visual focus byÂ focusing anÂ outer element, orÂ weÂ can choose not toÂ have focus byÂ focusing theÂ inner element. Even more toÂ it: ifÂ we&amp;#39;d add another inner element with theÂ &lt;code&gt;tabindex=&amp;quot;-1&amp;quot;&lt;/code&gt;, then weÂ could style element differently now inÂ three cases: onÂ keyboard focus, onÂ click focus andÂ onÂ programmatic focus.&lt;/p&gt;
&lt;h3 id=&quot;remaining-problems&quot;&gt;Remaining Problems&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;InÂ Firefox forÂ Windows after using theÂ keyboard navigation atÂ least once weÂ would see theÂ focus ring over theÂ &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt; elements. That&amp;#39;s unfortunate, but itÂ doesn&amp;#39;t break theÂ functionality andÂ should beÂ aÂ rather rare andÂ minor case.&lt;/li&gt;
&lt;li&gt;inÂ IE11 theÂ solution would work forÂ links andÂ other elements, but you&amp;#39;ll always see theÂ focus ring forÂ &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;This method needs anÂ extra element andÂ won&amp;#39;t work forÂ &lt;code&gt;&amp;lt;input type=&amp;quot;button&amp;quot;&amp;gt;&lt;/code&gt; obviously (which IÂ don&amp;#39;t recommend using forÂ buttons anyway) andÂ there isÂ literally nothing bad inÂ adding anÂ extra span when itÂ helps usÂ toÂ fix aÂ problem. Extra divs andÂ spans are not not semantic.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So, not aÂ lot ofÂ problems after all. IfÂ you&amp;#39;ll see anything inÂ theÂ final example inÂ theÂ browser you use, let meÂ know!&lt;/p&gt;
&lt;h2 id=&quot;final-words&quot;&gt;Final Words&lt;/h2&gt;
&lt;p&gt;Now weÂ can use aÂ nice andÂ noticeable keyboard focus state forÂ our interactive elements without compromising inÂ how itÂ would look forÂ others. That&amp;#39;s theÂ thing IÂ tried toÂ fix forÂ years andÂ IÂ don&amp;#39;t even remember theÂ number ofÂ attempts IÂ did toÂ fix it. I&amp;#39;m really glad IÂ finally nailed it, andÂ IÂ hope browsers would start supporting theÂ &lt;code&gt;:focus-ring&lt;/code&gt; pseudo-class, andÂ that itÂ wouldn&amp;#39;t have that annoying heuristic that itÂ has now andÂ would work forÂ any elements that have aÂ set &lt;code&gt;tabindex&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Thank you forÂ reading.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Label-to-Input States</title>
    <link href="http://kizu.ru/en/blog/label-to-input/"/>
    <updated>2017-05-31T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/blog/label-to-input</id>
    <content type="html">&lt;h1 id=&quot;label-to-input-states&quot;&gt;&lt;span class=&quot;nobr&quot;&gt;Label-to&lt;/span&gt;-Input States&lt;/h1&gt;
&lt;p&gt;When fiddling with inputs &amp;amp; labels forÂ them, IÂ remembered one thing that amused meÂ &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#for-a-long-time&quot; id=&quot;for-a-long-time&quot;&gt;forÂ aÂ long time&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Fun fact: when IÂ started theÂ research forÂ this article, IÂ found &lt;a href=&quot;https://stackoverflow.com/questions/9098581/why-is-hover-for-input-triggered-on-corresponding-label-in-css&quot;&gt;this question&lt;/a&gt; atÂ StackOverflow, with aÂ really detailed answer byÂ BoltClock. TheÂ fun part isÂ that IÂ was theÂ one who asked this question atÂ this far February ofÂ theÂ year 2012, andÂ now totally forgot about it. Also, theÂ â€œEven moreâ€ part ofÂ this question isÂ still actual forÂ Webkits/Blinks.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;. Look atÂ this &lt;abbr&gt;HTML&lt;/abbr&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;label&amp;gt;
    Here is an input: 
    &amp;lt;input type=&amp;quot;text&amp;quot; /&amp;gt;
&amp;lt;/label&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;TheÂ fact that amuses meÂ isÂ that when you declare aÂ state forÂ anÂ input inÂ &lt;abbr&gt;CSS&lt;/abbr&gt;, like with &lt;code&gt;:hover&lt;/code&gt; orÂ &lt;code&gt;:active&lt;/code&gt; pseudo classes, andÂ then you have aÂ label forÂ that input, then triggering those states over theÂ label would actually trigger theÂ same states onÂ theÂ input.&lt;/p&gt;
&lt;p&gt;Here isÂ anÂ excerpt from theÂ &lt;a href=&quot;https://drafts.csswg.org/selectors-4/#the-hover-pseudo&quot;&gt;latest Selectors Level 4 spec&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Document languages may define additional ways inÂ which anÂ element can match :hover. ForÂ example, [&lt;abbr&gt;HTML&lt;/abbr&gt;5] defines aÂ labeled control element asÂ matching :hover when its label isÂ hovered.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Here isÂ aÂ simple example ofÂ this behaviour:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/label-to-input/#Demo_1&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;IfÂ you&amp;#39;re using any modern browser, you could see theÂ input toÂ beÂ highlighted both when you hover theÂ input itself andÂ the label associated with it.&lt;/p&gt;
&lt;p&gt;TheÂ &lt;abbr&gt;CSS&lt;/abbr&gt; forÂ this example isÂ trivial:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;input.example:hover {
  background: lime;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;but-what-about-ancestors-&quot;&gt;But What About Ancestors?&lt;/h2&gt;
&lt;p&gt;IfÂ you&amp;#39;d look atÂ that place about theÂ hover inÂ &lt;a href=&quot;https://drafts.csswg.org/selectors-4/#the-hover-pseudo&quot;&gt;theÂ spec&lt;/a&gt;, you&amp;#39;d see theÂ following sentence above:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;AnÂ element also matches :hover ifÂ one ofÂ its descendants inÂ theÂ flat tree (including non-element nodes, such asÂ text nodes) matches theÂ above conditions.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Which isÂ aÂ thing you could possibly already know: when you hover over aÂ descendant, then this state isÂ also triggered &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#all-of-them&quot; id=&quot;all-of-them&quot;&gt;onÂ all theÂ ancestors&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Even ifÂ theÂ element isÂ out ofÂ theÂ ancestor&amp;#39;s bounds, like being positioned orÂ moved outside using some other method, andÂ even ifÂ theÂ ancestor would have &lt;code&gt;pointer-events: none&lt;/code&gt; orÂ &lt;code&gt;display: contents&lt;/code&gt;, itÂ still would beÂ marked asÂ theÂ one having theÂ same state asÂ theÂ descendant.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;, which can beÂ used inÂ aÂ lot ofÂ useful ways.&lt;/p&gt;
&lt;p&gt;But what ifÂ weÂ have those connected label andÂ input, andÂ the label would beÂ placed not inÂ one ofÂ theÂ input&amp;#39;s ancestor&amp;#39;s flat tree?&lt;/p&gt;
&lt;p&gt;Like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;ul&amp;gt;
    &amp;lt;li&amp;gt;
        Here is
        &amp;lt;label class=&amp;quot;example-label&amp;quot; for=&amp;quot;Example2&amp;quot;&amp;gt;a label&amp;lt;/label&amp;gt;
        for the input inside another list item. Hover it!
    &amp;lt;/li&amp;gt;
    &amp;lt;li&amp;gt;
        And here is the input for the above label:
        &amp;lt;input class=&amp;quot;example&amp;quot; id=&amp;quot;Example2&amp;quot; type=&amp;quot;text&amp;quot; /&amp;gt;
    &amp;lt;/li&amp;gt;
&amp;lt;/ul&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;AndÂ ifÂ we&amp;#39;d add theÂ same &lt;abbr&gt;CSS&lt;/abbr&gt; asÂ forÂ the example above, we&amp;#39;d get theÂ same result:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/label-to-input/#Demo_2&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;ForÂ now theÂ result isÂ theÂ same. But there isÂ one big difference. Let&amp;#39;s add some styles like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;ul.example3 &amp;gt; li:hover {
    box-shadow: 0 0 0 3px blue;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now look atÂ theÂ following example andÂ try toÂ hover over theÂ input itself andÂ the associated label:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/label-to-input/#Demo_3&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You should see there that, asÂ probably expected, only theÂ actual list item that isÂ hovered would obtain theÂ above styles. Giving theÂ input theÂ &lt;code&gt;:hover&lt;/code&gt; state using theÂ label trick won&amp;#39;t trigger theÂ &lt;code&gt;:hover&lt;/code&gt; over its parent. All like was written inÂ theÂ specs.&lt;/p&gt;
&lt;p&gt;AndÂ what this also means isÂ that asÂ weÂ have this behaviour, theÂ following selector that could look like nonsense atÂ theÂ first glance would actually mean something:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;:not(:hover) &amp;gt; input#Example4:hover {
  background: blue;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;IfÂ we&amp;#39;d take our first example andÂ would just wrap anÂ input into aÂ simple span:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;span&amp;gt;&amp;lt;input class=&amp;quot;example&amp;quot; id=&amp;quot;Example4&amp;quot; type=&amp;quot;text&amp;quot; /&amp;gt;&amp;lt;/span&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This new selector would actually target &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#not-only&quot; id=&quot;not-only&quot;&gt;only&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Actually, there isÂ atÂ least one other way toÂ trigger &lt;span class=&quot;nobr&quot;&gt;itâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;byÂ using theÂ developer tools andÂ checking theÂ &lt;code&gt;:hover&lt;/code&gt; state only forÂ the input there. AndÂ ifÂ you&amp;#39;d find out other cases where this would &lt;span class=&quot;nobr&quot;&gt;workâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;please, report them toÂ me!&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; theÂ hover state ofÂ this input that isÂ caused byÂ hovering over label.&lt;/p&gt;
&lt;p&gt;AndÂ that means that weÂ can now actually style both hover states inÂ different ways!&lt;/p&gt;
&lt;p&gt;Here isÂ that example working:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/label-to-input/#Demo_4&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;selecting-siblings&quot;&gt;Selecting Siblings&lt;/h2&gt;
&lt;p&gt;AsÂ with aÂ lot ofÂ other places inÂ &lt;abbr&gt;CSS&lt;/abbr&gt;, you could research aÂ lot ofÂ things surrounding this behaviour. ForÂ example, not only theÂ &lt;code&gt;:hover&lt;/code&gt; state can beÂ delegated this way, but also atÂ least theÂ &lt;code&gt;:active&lt;/code&gt; one.&lt;/p&gt;
&lt;p&gt;But I&amp;#39;d like toÂ mention one nuance that could beÂ rather useful, but which isÂ prevented byÂ IE/Edge not supporting it.&lt;/p&gt;
&lt;p&gt;AsÂ weÂ saw, theÂ parent is, per spec, won&amp;#39;t get theÂ hover state ofÂ such delegated &lt;code&gt;:hover&lt;/code&gt;. But what ifÂ we&amp;#39;d want toÂ use this &lt;code&gt;:hover&lt;/code&gt; asÂ aÂ prerequisite toÂ something else? What ifÂ weÂ would add aÂ combinator after itÂ andÂ then would try toÂ select some siblings that will come after theÂ input?&lt;/p&gt;
&lt;p&gt;Like this:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/label-to-input/#Demo_5&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;InÂ Firefox andÂ browsers based onÂ Webkit/Blink you could see theÂ link that goes after theÂ input toÂ beÂ highlighted even when you hover theÂ label inside another list item! InÂ Edge, sadly, nothing happens there.&lt;/p&gt;
&lt;p&gt;And, asÂ inÂ theÂ browsers that support it, this behaviour would work even ifÂ theÂ input isÂ disabled, weÂ then could hide itÂ using theÂ often used technique (using &lt;code&gt;clip&lt;/code&gt; etc.), andÂ then use labels atÂ one part ofÂ theÂ page toÂ highlight stuff atÂ any other part ofÂ theÂ page without any JS. What fun could weÂ get out ofÂ it?&lt;/p&gt;
&lt;h2 id=&quot;breaking-the-specs-in-the-end&quot;&gt;Breaking theÂ Specs inÂ theÂ End&lt;/h2&gt;
&lt;p&gt;TheÂ most &lt;input disabled aria-hidden=&quot;true&quot; class=&quot;lol-example&quot; id=&quot;Example6-5&quot; type=&quot;radio&quot; /&gt;&lt;span class=&quot;example-target&quot;&gt;fun&lt;/span&gt; thing what IÂ found when doing quick experiments &lt;input disabled aria-hidden=&quot;true&quot; class=&quot;lol-example&quot; id=&quot;Example6-6&quot; type=&quot;radio&quot; /&gt;&lt;span class=&quot;example-target&quot;&gt;is&lt;/span&gt; this:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/label-to-input/#Demo_6&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Sadly, there IÂ used theÂ &lt;input disabled aria-hidden=&quot;true&quot; class=&quot;lol-example&quot; id=&quot;Example6-7&quot; type=&quot;radio&quot; /&gt;&lt;span class=&quot;example-target&quot;&gt;forbidden inÂ specs&lt;/span&gt; nesting ofÂ labels inside other labels (which weÂ could actually overcome inÂ terms ofÂ &lt;em&gt;validity&lt;/em&gt; using either theÂ method forÂ &lt;a href=&quot;/en/fun/nested-links/&quot;&gt;nesting links&lt;/a&gt; orÂ byÂ &lt;abbr&gt;DOM&lt;/abbr&gt; manipulation), which surprisingly works asÂ we&amp;#39;d expect: you hover one (visually) item, andÂ then you get visual feedback from any number ofÂ places all over theÂ page.&lt;/p&gt;
&lt;p&gt;Imagine ifÂ this would beÂ theÂ thing weÂ could use without hacks andÂ without relying onÂ theÂ &lt;span class=&quot;nobr&quot;&gt;label-to&lt;/span&gt;-input state delegation.&lt;/p&gt;
&lt;p&gt;AndÂ here weÂ have itÂ &lt;em&gt;implemented&lt;/em&gt; inÂ some way, soÂ its entirely possible toÂ doÂ inÂ browsers andÂ we&amp;#39;d only need theÂ specs toÂ support it? What doÂ you think, doÂ weÂ need aÂ way toÂ delegate states from one element toÂ another inÂ native &lt;abbr&gt;CSS&lt;/abbr&gt;? IfÂ you think that weÂ need, tell your fellow spec writers and/or browser vendors, orÂ even come upÂ with aÂ draft ofÂ what itÂ could look like inÂ aÂ spec byÂ yourself!&lt;/p&gt;
&lt;p&gt;There isÂ aÂ &lt;em&gt;chance&lt;/em&gt;, that such stuff would beÂ possible with extensive usage ofÂ &lt;code&gt;:has()&lt;/code&gt; (&lt;a href=&quot;https://drafts.csswg.org/selectors-4/#relational&quot;&gt;atÂ theÂ same spec&lt;/a&gt;) ifÂ itÂ would beÂ ever implemented, but yeah, only ifÂ itÂ would beÂ ever implemented.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Controlling the Specificity</title>
    <link href="http://kizu.ru/en/fun/controlling-the-specificity/"/>
    <updated>2016-12-21T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/fun/controlling-the-specificity</id>
    <content type="html">&lt;h1 id=&quot;controlling-the-specificity&quot;&gt;Controlling theÂ Specificity&lt;/h1&gt;
&lt;p&gt;InÂ &lt;a href=&quot;/en/fun/conditions-for-css-variables/&quot;&gt;theÂ previous article about conditions forÂ &lt;abbr&gt;CSS&lt;/abbr&gt; variables&lt;/a&gt; IÂ talked about things that could beÂ used rather soon, even ifÂ theÂ support forÂ them isÂ not there yet. InÂ this article I&amp;#39;ll goÂ even &lt;span class=&quot;nobr&quot;&gt;furtherâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;I&amp;#39;ll beÂ talking about one thing from theÂ &lt;a href=&quot;https://drafts.csswg.org/selectors-4/&quot;&gt;&lt;abbr&gt;CSS&lt;/abbr&gt; Selectors Level 4&lt;/a&gt;, which isÂ even less adopted.&lt;/p&gt;
&lt;p&gt;TheÂ part ofÂ this spec I&amp;#39;ll beÂ looking atÂ today isÂ theÂ new, enhanced &lt;code&gt;:not()&lt;/code&gt;. Important disclaimer: theÂ feature IÂ would talk about have almost toÂ noÂ support atÂ theÂ moment (only latest Safari?), andÂ even ifÂ itÂ did, IÂ wouldn&amp;#39;t recommend toÂ use itÂ asÂ something other than experiment. You&amp;#39;ll see why. AndÂ after discussing what becomes possible with this new &lt;code&gt;:not()&lt;/code&gt; I&amp;#39;ll describe one more usable similar thing andÂ then propose aÂ few things that IÂ think should beÂ there inÂ &lt;abbr&gt;CSS&lt;/abbr&gt; instead.&lt;/p&gt;
&lt;h2 id=&quot;the-all-new-negation-pseudoclass&quot;&gt;TheÂ All-New Negation Pseudoclass&lt;/h2&gt;
&lt;p&gt;InÂ Selectors Level 3 &lt;code&gt;:not()&lt;/code&gt; could have only aÂ single simple selector inside ofÂ it. TheÂ &lt;span class=&quot;nobr&quot;&gt;leveled-up&lt;/span&gt; version allows forÂ soÂ much more!&lt;/p&gt;
&lt;p&gt;TheÂ &lt;a href=&quot;https://drafts.csswg.org/selectors-4/#negation&quot;&gt;specification forÂ the &lt;code&gt;:not()&lt;/code&gt;&lt;/a&gt; doesn&amp;#39;t say much about its new features. Almost all itÂ says isÂ that instead ofÂ aÂ simple selector you can put aÂ &lt;strong&gt;selector list&lt;/strong&gt; inside. But that alone means aÂ lot.&lt;/p&gt;
&lt;h3 id=&quot;selector-lists&quot;&gt;Selector Lists&lt;/h3&gt;
&lt;p&gt;So, now weÂ can use comma-separated selector lists inside any &lt;code&gt;:not()&lt;/code&gt;. TheÂ commas inÂ usual comma-separated selector lists are anÂ equivalent ofÂ logical &lt;strong&gt;or&lt;/strong&gt;, but when used inside theÂ &lt;code&gt;:not()&lt;/code&gt; they actually become &lt;strong&gt;and&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Look atÂ this &lt;span class=&quot;nobr&quot;&gt;exampleâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;such selector would target all buttons that are not hovered andÂ not focused &lt;em&gt;atÂ theÂ same time&lt;/em&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;button:not(:hover, :focus)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;AndÂ itÂ isÂ basically anÂ equivalent of&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;button:not(:hover):not(:focus)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;TheÂ difference there isÂ how theÂ specificity works forÂ selector lists inside &lt;code&gt;:not()&lt;/code&gt;, here isÂ &lt;a href=&quot;https://drafts.csswg.org/selectors-4/#specificity-rules&quot;&gt;what Spec says&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;TheÂ specificity ofÂ aÂ &lt;code&gt;:not()&lt;/code&gt; pseudo-class isÂ replaced byÂ theÂ specificity ofÂ theÂ most specific complex selector inÂ its selector list argument.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That means that theÂ specificity ofÂ &lt;code&gt;:not(:hover, :focus)&lt;/code&gt; isÂ theÂ same asÂ theÂ specificity ofÂ aÂ single class, soÂ itÂ isÂ really different than ifÂ you&amp;#39;d just use multiple &lt;code&gt;:not()&lt;/code&gt;s. You can fit any number ofÂ selectors inside aÂ selector list inside &lt;code&gt;:not()&lt;/code&gt;, andÂ you still would get theÂ specificity ofÂ only theÂ highest one. AndÂ ifÂ theÂ specificity would beÂ theÂ same forÂ each selector inÂ aÂ list, you&amp;#39;ll get only this specificity.&lt;/p&gt;
&lt;p&gt;This isÂ aÂ first crucial feature forÂ our case.&lt;/p&gt;
&lt;h3 id=&quot;complex-selectors&quot;&gt;Complex Selectors&lt;/h3&gt;
&lt;p&gt;TheÂ second crucial feature isÂ that those selector lists can now contain complex selectors. Before, you could put only aÂ simple selector inside &lt;code&gt;:not()&lt;/code&gt;, but now there won&amp;#39;t beÂ such limit, soÂ you could doÂ stuff like &lt;code&gt;:not(a.foo:nth-child(2n+1):hover)&lt;/code&gt; andÂ itÂ would just work.&lt;/p&gt;
&lt;p&gt;Another interesting thing inÂ &lt;code&gt;:not()&lt;/code&gt; now accepting complex selectors, isÂ that itÂ can also accept selectors with combinators like &lt;code&gt;:not(.foo + .bar)&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&quot;negation-of-negation&quot;&gt;Negation ofÂ Negation&lt;/h3&gt;
&lt;p&gt;OfÂ course, since theÂ &lt;code&gt;:not()&lt;/code&gt; selector isÂ itself aÂ complex one, you can now use itÂ inside other &lt;code&gt;:not()&lt;/code&gt;s.&lt;/p&gt;
&lt;p&gt;And, yeah, we&amp;#39;re atÂ theÂ point where theÂ magic would happen. What does double negation mean inÂ logic? ItÂ returns theÂ value toÂ its original binary state.&lt;/p&gt;
&lt;p&gt;IfÂ we&amp;#39;d have something like that:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;:not(:not(:hover))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;That would work just theÂ same asÂ aÂ &lt;code&gt;:hover&lt;/code&gt; pseudoclass. That&amp;#39;s rather simple. But what would happen ifÂ we&amp;#39;d have aÂ selector list there?&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;:not(:not(:hover), :not(:focus))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;AsÂ theÂ selector lists inside &lt;code&gt;:not()&lt;/code&gt; work asÂ aÂ logical &lt;strong&gt;and&lt;/strong&gt;, andÂ given that each ofÂ theÂ selectors would beÂ returned toÂ its original meaning, theÂ result would beÂ almost theÂ same asÂ &lt;code&gt;:hover:focus&lt;/code&gt;. TheÂ difference would beÂ that theÂ specificity ofÂ theÂ double negated selector wouldn&amp;#39;t beÂ theÂ same asÂ ofÂ theÂ usual complex one. Each ofÂ theÂ nested &lt;code&gt;:not()&lt;/code&gt; would have aÂ specificity ofÂ aÂ single pseudoclass, andÂ due toÂ how selector lists work inside &lt;code&gt;:not()&lt;/code&gt;, theÂ specificity ofÂ theÂ whole construction would beÂ equal, again, toÂ aÂ specificity ofÂ aÂ single pseudoclass.&lt;/p&gt;
&lt;h2 id=&quot;reducing-the-specificity&quot;&gt;Reducing theÂ Specificity&lt;/h2&gt;
&lt;p&gt;IÂ think you can already guess what all ofÂ this means. That&amp;#39;s &lt;span class=&quot;nobr&quot;&gt;rightâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;using theÂ new &lt;code&gt;:not()&lt;/code&gt; weÂ can now write selectors with aÂ specificity ofÂ aÂ single class. And, actually, weÂ can write &lt;em&gt;almost any selector&lt;/em&gt; this way.&lt;/p&gt;
&lt;p&gt;So, ifÂ we&amp;#39;d like toÂ have aÂ multiclass selector with some states, like &lt;code&gt;.foo.bar.baz:link:hover&lt;/code&gt; andÂ for itÂ toÂ have aÂ specificity ofÂ aÂ single class, soÂ itÂ could beÂ easier overridden later on, weÂ could rewrite this selector this way:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;:not(:not(.foo), :not(.bar), :not(.baz), :not(:link), :not(:hover))
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;what-about-combinators-&quot;&gt;What About Combinators?&lt;/h3&gt;
&lt;p&gt;But what ifÂ we&amp;#39;d like toÂ have more complex selectors with combinators, like this one?&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.foo:hover &amp;gt; .bar .baz
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;They&amp;#39;re possible too, but with aÂ slightly more complex code. What would help usÂ isÂ aÂ universal selector. Here isÂ how theÂ selector above could look like ifÂ we&amp;#39;d want itÂ toÂ have aÂ specificity ofÂ aÂ single class:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;:not(:not(:not(:not(:not(:not(.foo), :not(:hover)) &amp;gt; *), :not(.bar)) *), :not(.baz))
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;That looks awful, right? But &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#works&quot; id=&quot;works&quot;&gt;that works!&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Here isÂ aÂ &lt;a href=&quot;http://codepen.io/kizu/pen/PbgYNV&quot;&gt;test atÂ CodePen&lt;/a&gt; with this selector, ifÂ you&amp;#39;d open itÂ inÂ theÂ latest Safari, you&amp;#39;ll see itÂ inÂ action.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;OfÂ course, itÂ would become aÂ bit readable ifÂ we&amp;#39;d use some indentations andÂ stuff:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;:not(
    :not(
        :not(
            :not(
                :not(
                    :not(.foo),
                    :not(:hover)
                ) &amp;gt; *
            ),
            :not(.bar)
        ) *
    ),
    :not(.baz)
)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Still ugly, but manageable (andÂ now, ifÂ you&amp;#39;d imagine all ofÂ theÂ &lt;code&gt;:not()&lt;/code&gt; andÂ universal selectors would disappear, you could read itÂ almost asÂ our original selector).&lt;/p&gt;
&lt;p&gt;But why itÂ works? Due toÂ how theÂ selector matching mechanism works, theÂ selectors with combinators would match from right toÂ left, soÂ theÂ rightmost selector would beÂ always theÂ one that matches theÂ element we&amp;#39;re testing theÂ &lt;code&gt;:not()&lt;/code&gt; on, soÂ weÂ could safely use just aÂ universal selector instead ofÂ itÂ ifÂ weÂ need toÂ just check theÂ parents. AndÂ the universal selector brings noÂ specificity with it.&lt;/p&gt;
&lt;p&gt;TheÂ algorithm beyond rewriting theÂ selector this way isÂ rather simple: weÂ goÂ from right toÂ left, replacing recursively all theÂ parts with theÂ double negations, soÂ forÂ when weÂ have nested combinators, weÂ would have more nested &lt;code&gt;:not()&lt;/code&gt;s. AndÂ this way weÂ would always beÂ guaranteed toÂ have theÂ same specificity onÂ each step.&lt;/p&gt;
&lt;h2 id=&quot;complete-control&quot;&gt;Complete Control&lt;/h2&gt;
&lt;p&gt;ItÂ worth mentioning that weÂ can already increase theÂ specificity ofÂ any given class just byÂ &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#foofoofoo&quot; id=&quot;foofoofoo&quot;&gt;multiplying it&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;You can read about this method inÂ Harry Roberts&amp;#39; &lt;a href=&quot;http://csswizardry.com/2014/07/hacks-for-dealing-with-specificity/#safely-increasing-specificity&quot;&gt;article onÂ specificity hacks&lt;/a&gt; (and, asÂ Harry, IÂ first saw this method inÂ &lt;a href=&quot;https://speakerdeck.com/mathiasbynens/3-dot-14-things-i-didnt-know-about-css-at-css-day-2014&quot;&gt;Mathias Bynens&amp;#39; talk&lt;/a&gt;).&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;, soÂ &lt;code&gt;.foo.foo.foo&lt;/code&gt; matches just theÂ same asÂ &lt;code&gt;.foo&lt;/code&gt;, but with aÂ specificity ofÂ three classes. AndÂ asÂ weÂ can now both reduce andÂ increase theÂ specificity ofÂ almost any given selectors, that means weÂ can, finally, &lt;strong&gt;control&lt;/strong&gt; theÂ specificity ofÂ our selectors, regardless ofÂ their complexity. OfÂ course, with theÂ exception that weÂ can&amp;#39;t reduce theÂ specificity toÂ beÂ less than theÂ one ofÂ theÂ biggest single selector&amp;#39;s one, soÂ weÂ can&amp;#39;t make aÂ selector that contains aÂ class toÂ beÂ asÂ specific asÂ anÂ element selector orÂ aÂ universal one.&lt;/p&gt;
&lt;h2 id=&quot;preprocessors-&quot;&gt;Preprocessors?&lt;/h2&gt;
&lt;p&gt;Yes, itÂ isÂ possible toÂ programmatically convert almost any selector toÂ theÂ same selector with any custom specificity from one class toÂ any given number. But IÂ intentionally won&amp;#39;t implement itÂ now. AsÂ IÂ mentioned atÂ theÂ &lt;span class=&quot;nobr&quot;&gt;startâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;theÂ browser support forÂ the new &lt;code&gt;:not()&lt;/code&gt; isÂ not yet there, andÂ even ifÂ itÂ would beÂ there, theÂ generated code we&amp;#39;d get forÂ such selectors would beÂ awful. IfÂ you&amp;#39;d like aÂ small challenge, you can goÂ andÂ implement itÂ just forÂ fun using any preprocessor orÂ postprocessor you like, but IÂ don&amp;#39;t recommend onÂ using itÂ anywhere close toÂ production.&lt;/p&gt;
&lt;h2 id=&quot;possible-usage&quot;&gt;Possible Usage&lt;/h2&gt;
&lt;p&gt;One ofÂ theÂ easiest targets forÂ controlling theÂ specificity are any resets orÂ normalizing &lt;span class=&quot;nobr&quot;&gt;stylesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;right now they often contain things like attribute selectors andÂ pseudoclasses like &lt;code&gt;:nth-child&lt;/code&gt;, andÂ given that those selectors would also have theÂ element selectors, they would always beÂ higher than aÂ single class inÂ specificity, which would make itÂ harder toÂ override itÂ inÂ theÂ code forÂ your blocks.&lt;/p&gt;
&lt;p&gt;ForÂ example, you can look atÂ &lt;a href=&quot;https://github.com/necolas/normalize.css/blob/1da0911/normalize.css#L125&quot;&gt;one part&lt;/a&gt; ofÂ Nicolas Gallagher&amp;#39;s normalize.css:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;/**
 * 1. Remove the bottom border in Firefox 39-.
 * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.
 */
abbr[title] {
  border-bottom: none; /* 1 */
  text-decoration: underline; /* 2 */
  text-decoration: underline dotted; /* 2 */
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Here ifÂ you&amp;#39;d like toÂ have aÂ component that uses &lt;code&gt;&amp;lt;abbr&amp;gt;&lt;/code&gt; andÂ you&amp;#39;d want aÂ border orÂ text-decoration other than underlined, you couldn&amp;#39;t use aÂ single class forÂ this component inÂ your &lt;abbr&gt;CSS&lt;/abbr&gt; alongside using normalize.&lt;span class=&quot;nobr&quot;&gt;cssâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;you&amp;#39;d need toÂ override theÂ specificity ofÂ two classes instead.&lt;/p&gt;
&lt;p&gt;But ifÂ weÂ could reduce theÂ specificity ofÂ each selector inÂ our resets andÂ normalizes toÂ theÂ &lt;span class=&quot;nobr&quot;&gt;smallestâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;ofÂ aÂ single element orÂ aÂ single &lt;span class=&quot;nobr&quot;&gt;classâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;those tools would become even more powerful andÂ flexible.&lt;/p&gt;
&lt;p&gt;Another area where theÂ control over specificity isÂ aÂ must have are any complex &lt;abbr&gt;CSS&lt;/abbr&gt; methodologies. TheÂ easiest example would beÂ Harry Roberts&amp;#39; &lt;a href=&quot;http://itcss.io&quot;&gt;it&lt;abbr&gt;CSS&lt;/abbr&gt;&lt;/a&gt; &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#itcss&quot; id=&quot;itcss&quot;&gt;which&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;There isÂ not much written onÂ itÂ anywhere, ifÂ you&amp;#39;d like toÂ read more onÂ it, you can try &lt;a href=&quot;https://www.xfive.co/blog/itcss-scalable-maintainable-css-architecture/&quot;&gt;this article&lt;/a&gt; byÂ Lubos Kmetko.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; have layers ofÂ selectors united byÂ similar area ofÂ responsibility. IfÂ weÂ could split those layers soÂ they wouldn&amp;#39;t merge inÂ their specificity, weÂ would obtain theÂ ultimate power over &lt;abbr&gt;CSS&lt;/abbr&gt; (ok, IÂ exaggerated itÂ aÂ bit there).&lt;/p&gt;
&lt;p&gt;Our general styles forÂ typography would beÂ always higher inÂ specificity than theÂ resets; our generic objects would always override theÂ typography styles ofÂ any complexity; our components would always beÂ guaranteed toÂ override theÂ styles ofÂ generic objects; andÂ any utilities would always override anything else, andÂ all without using &lt;code&gt;!important&lt;/code&gt;. AndÂ weÂ could even handle things inside each layer byÂ creating sub-layers, toÂ allow modifiers forÂ components toÂ override their base styles even ifÂ those base styles are somewhat complex.&lt;/p&gt;
&lt;h3 id=&quot;try-it-today&quot;&gt;Try ItÂ Today&lt;/h3&gt;
&lt;p&gt;Talking about all ofÂ &lt;span class=&quot;nobr&quot;&gt;thisâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;weÂ can already kinda implement our styles this way using nothing but theÂ increasing ofÂ specificity available already.&lt;/p&gt;
&lt;p&gt;TheÂ algorithm would beÂ simple: forÂ each layer weÂ need toÂ calculate theÂ maximum specificity, then add aÂ number ofÂ redundant matching class selectors toÂ each selector inÂ aÂ way they would split all theÂ things into groups.&lt;/p&gt;
&lt;p&gt;Let&amp;#39;s say weÂ have anÂ abstract object&amp;#39;s selector: &lt;code&gt;.button:hover&lt;/code&gt;, then aÂ component &lt;code&gt;.MyBlock-Submit&lt;/code&gt;, and, finally, aÂ utility &lt;code&gt;.is-hidden&lt;/code&gt;. WeÂ can leave alone theÂ first layer forÂ the object, itÂ would beÂ theÂ most bottom one. Then weÂ calculate that itÂ have two class-level selectors, soÂ weÂ add that number (plus one, toÂ guarantee theÂ override ofÂ any possible generic selector there) toÂ each selector ofÂ theÂ second layer ofÂ components. Then weÂ calculate theÂ specificity ofÂ theÂ component layer (here weÂ have just one class initially, inÂ reality, itÂ would beÂ often much larger, plus theÂ three classes from theÂ previous layer, plus one forÂ reliability) andÂ add theÂ corresponding number ofÂ redundant class selectors toÂ anything inÂ utility group.&lt;/p&gt;
&lt;p&gt;TheÂ easiest (andÂ the one method with theÂ most support) way toÂ add theÂ desired specificity isÂ possible ifÂ you have control over theÂ &lt;abbr&gt;HTML&lt;/abbr&gt; ofÂ aÂ page: just add aÂ class containing aÂ single underscore toÂ &lt;code&gt;html&lt;/code&gt; &lt;span class=&quot;nobr&quot;&gt;elementâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;code&gt;&amp;lt;html class=&amp;quot;_&amp;quot;&amp;gt;&lt;/code&gt;, andÂ then use theÂ chains ofÂ &lt;code&gt;._._&lt;/code&gt; before your selectors. ItÂ would look like this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;.button:hover {}
._._._ .MyBlock-Submit {}
._._._._._ .is-hidden {}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;TheÂ only issue that can happen isÂ that one ofÂ theÂ selectors you&amp;#39;re prefixing would have aÂ part that targets aÂ root selector. InÂ case ofÂ &lt;code&gt;:root&lt;/code&gt; orÂ &lt;code&gt;html&lt;/code&gt; ones weÂ could rather easily properly attach this part toÂ theÂ actual selector, forÂ more ambiguous selectors we&amp;#39;d need toÂ duplicate itÂ like &lt;code&gt;._._._._.is-hidden, ._._._._ .is-hidden&lt;/code&gt;, though, ifÂ you know that you&amp;#39;re doing, you probably wouldn&amp;#39;t want toÂ use any other classes onÂ root.&lt;/p&gt;
&lt;p&gt;AndÂ here weÂ have all ofÂ theÂ layers separated inÂ aÂ way their order doesn&amp;#39;t matter atÂ all andÂ you could make any layer asÂ complex asÂ you like without theÂ fear ofÂ theÂ need toÂ override itÂ later. AndÂ yes, you&amp;#39;d still have all theÂ usual &lt;abbr&gt;CSS&lt;/abbr&gt; specificity rules inside ofÂ layers ifÂ you&amp;#39;d want toÂ use them forÂ more granular control ofÂ things.&lt;/p&gt;
&lt;h2 id=&quot;proposal-for-native-tools&quot;&gt;Proposal ForÂ Native Tools&lt;/h2&gt;
&lt;p&gt;InÂ this article, IÂ have shown that itÂ would beÂ already possible toÂ set theÂ specificity ofÂ any selector toÂ any given number from one class toÂ eternity. This could beÂ used forÂ more fine-grained control over your libraries&amp;#39; code andÂ components, andÂ inÂ myÂ practice, IÂ had numerous occasions where itÂ would beÂ tremendously helpful.&lt;/p&gt;
&lt;p&gt;That&amp;#39;s why IÂ propose toÂ add theÂ necessary tools toÂ native &lt;nobr&gt;&lt;abbr&gt;CSS&lt;/abbr&gt;&amp;#8202;â€”&lt;/nobr&gt;&amp;#8202;toÂ allow developers toÂ control theÂ specificity. Otherwise, itÂ isÂ possible developers inÂ need would rely onÂ hacks andÂ awful code inÂ theÂ future.&lt;/p&gt;
&lt;p&gt;What exactly IÂ propose? Certainly &lt;strong&gt;not&lt;/strong&gt; something like aÂ pseudoclass forÂ modifying theÂ specificity ofÂ aÂ given selector. That would have too complex syntax (how would you pass theÂ specificity toÂ it?) andÂ you&amp;#39;ll need toÂ use this just anywhere when solving your usual &lt;abbr&gt;CSS&lt;/abbr&gt; problems. That&amp;#39;s bad.&lt;/p&gt;
&lt;p&gt;What I&amp;#39;d like toÂ see isÂ some kind ofÂ aÂ more general way ofÂ controlling theÂ specificity not forÂ specific selectors orÂ rules, but forÂ groups ofÂ rules. IÂ think ofÂ some kind ofÂ anÂ @-rule forÂ it, soÂ you could group any number ofÂ rules inÂ aÂ â€œlayerâ€, then somehow determine theÂ relationships ofÂ those layers between themselves, andÂ voilÃ &lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;you&amp;#39;d have aÂ way toÂ control theÂ &lt;em&gt;cascade&lt;/em&gt; itself, theÂ thing that always was out ofÂ touch when you were developing your stylesheets.&lt;/p&gt;
&lt;p&gt;AndÂ the best &lt;span class=&quot;nobr&quot;&gt;partâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;specificity isÂ aÂ part ofÂ &lt;abbr&gt;CSS&lt;/abbr&gt; that isÂ applied only forÂ selectors, itÂ doesn&amp;#39;t depend onÂ &lt;abbr&gt;DOM&lt;/abbr&gt;, onÂ any inheritance there etc. SoÂ there shouldn&amp;#39;t beÂ aÂ lot ofÂ troubles implementing something that changes theÂ specificity itself (orÂ creates groups ofÂ itÂ like itÂ isÂ already there with theÂ different parts ofÂ theÂ cascade).&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;&lt;abbr&gt;CSS&lt;/abbr&gt; isÂ fun, andÂ asÂ this article shows, would beÂ really powerful with theÂ tools new Specs would provide. There would beÂ incredible things possible through hacks. There are already hacks like &lt;code&gt;.foo.foo.foo&lt;/code&gt; forÂ modifying theÂ specificity, andÂ those tools can allow usÂ toÂ write andÂ reuse theÂ code that isÂ more effective andÂ maintainable than ever.&lt;/p&gt;
&lt;p&gt;But I&amp;#39;d like toÂ see those things possible not through hacks, but using theÂ native &lt;abbr&gt;CSS&lt;/abbr&gt;. IÂ think this isÂ entirely possible toÂ implement inÂ browsers.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Conditions for CSS Variables</title>
    <link href="http://kizu.ru/en/fun/conditions-for-css-variables/"/>
    <updated>2016-10-21T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/fun/conditions-for-css-variables</id>
    <content type="html">&lt;h1 id=&quot;conditions-for-css-variables&quot;&gt;Conditions forÂ &lt;abbr&gt;CSS&lt;/abbr&gt; Variables&lt;/h1&gt;
&lt;p&gt;I&amp;#39;ll start from this: &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#not-those&quot; id=&quot;not-those&quot;&gt;there are no&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;There isÂ aÂ module named â€œ&lt;a href=&quot;https://www.w3.org/TR/css3-conditional/&quot;&gt;&lt;abbr&gt;CSS&lt;/abbr&gt; Conditional Rules&lt;/a&gt;â€, but don&amp;#39;t expect itÂ toÂ cover theÂ &lt;abbr&gt;CSS&lt;/abbr&gt; &lt;span class=&quot;nobr&quot;&gt;variablesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;itÂ covers some &lt;span class=&quot;nobr&quot;&gt;at-rules&lt;/span&gt; stuff. There isÂ even aÂ &lt;a href=&quot;https://tabatkins.github.io/specs/css-when-else/&quot;&gt;proposal&lt;/a&gt; forÂ &lt;code&gt;@when&lt;/code&gt;/&lt;code&gt;@else&lt;/code&gt; &lt;span class=&quot;nobr&quot;&gt;at-rules&lt;/span&gt;, which, again, doÂ not anything inÂ common with variables.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; conditions inÂ specs toÂ use with &lt;a href=&quot;https://www.w3.org/TR/css-variables-1/&quot;&gt;&lt;abbr&gt;CSS&lt;/abbr&gt; variables&lt;/a&gt;. IÂ think that this isÂ aÂ really big flaw inÂ specs, asÂ while variables already provide aÂ lot ofÂ things that were not possible inÂ any other way before, theÂ absence ofÂ conditions isÂ really frustrating, asÂ there could beÂ aÂ lot ofÂ uses forÂ them.&lt;/p&gt;
&lt;p&gt;But what ifÂ we&amp;#39;d need those imaginary conditional statements forÂ our &lt;abbr&gt;CSS&lt;/abbr&gt; variables &lt;em&gt;now&lt;/em&gt;? Well, asÂ with aÂ lot ofÂ other &lt;abbr&gt;CSS&lt;/abbr&gt; stuff, weÂ can hack our way around forÂ same cases.&lt;/p&gt;
&lt;h2 id=&quot;the-problem-39-s-definition&quot;&gt;TheÂ Problem&amp;#39;s Definition&lt;/h2&gt;
&lt;p&gt;So, what weÂ need isÂ aÂ way toÂ use aÂ single &lt;abbr&gt;CSS&lt;/abbr&gt; variable forÂ setting different &lt;abbr&gt;CSS&lt;/abbr&gt; properties toÂ &lt;em&gt;different&lt;/em&gt; values, but not based directly onÂ this variable (that &lt;span class=&quot;nobr&quot;&gt;isâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;those values shouldn&amp;#39;t beÂ &lt;em&gt;calculated&lt;/em&gt; from our variable). WeÂ need &lt;strong&gt;conditions&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&quot;using-calculations-for-binary-conditions&quot;&gt;Using Calculations forÂ Binary Conditions&lt;/h2&gt;
&lt;p&gt;Long story short, I&amp;#39;ll just present theÂ solution toÂ you right now andÂ would explain itÂ later:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;:root {
    --is-big: 0;
}

.is-big {
    --is-big: 1;
}

.block {
    padding: calc(
        25px * var(--is-big) +
        10px * (1 - var(--is-big))
    );
    border-width: calc(
        3px * var(--is-big) +
        1px * (1 - var(--is-big))
    );
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;InÂ this example, we&amp;#39;re making all our elements with &lt;code&gt;.block&lt;/code&gt; toÂ have paddings equal toÂ &lt;code&gt;10px&lt;/code&gt; andÂ border widths toÂ &lt;code&gt;1px&lt;/code&gt; unless theÂ &lt;code&gt;--is-big&lt;/code&gt; variable onÂ those elements won&amp;#39;t beÂ &lt;code&gt;1&lt;/code&gt;, inÂ which case they would become &lt;code&gt;25px&lt;/code&gt; andÂ &lt;code&gt;3px&lt;/code&gt; respectively.&lt;/p&gt;
&lt;p&gt;TheÂ mechanism beyond this isÂ rather simple: weÂ use both our possible values inÂ aÂ single calculation using &lt;code&gt;calc()&lt;/code&gt;, where weÂ nullify one andÂ keep another value based onÂ theÂ variable&amp;#39;s value which can beÂ either &lt;code&gt;1&lt;/code&gt; orÂ &lt;code&gt;0&lt;/code&gt;. InÂ other words, we&amp;#39;ll have &lt;code&gt;25px * 1 + 10px * 0&lt;/code&gt; inÂ one case andÂ &lt;code&gt;25px * 0 + 10px * 1&lt;/code&gt; inÂ another.&lt;/p&gt;
&lt;h2 id=&quot;more-complex-conditions&quot;&gt;More Complex Conditions&lt;/h2&gt;
&lt;p&gt;WeÂ can use this method toÂ choose not only from 2 possible values but forÂ choosing from 3 orÂ more values. However, forÂ each new added possible value theÂ calculation becomes more complex. ForÂ choosing between 3 possible values itÂ would already look like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.block {
    padding: calc(
        100px * (1 - var(--foo)) * (2 - var(--foo)) * 0.5 +
         20px * var(--foo) * (2 - var(--foo)) +
          3px * var(--foo) * (1 - var(--foo)) * -0.5
    );
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This could accept &lt;code&gt;0&lt;/code&gt;, &lt;code&gt;1&lt;/code&gt; andÂ &lt;code&gt;2&lt;/code&gt; values forÂ &lt;code&gt;--foo&lt;/code&gt; variable andÂ calculate theÂ padding toÂ &lt;code&gt;100px&lt;/code&gt;, &lt;code&gt;20px&lt;/code&gt; orÂ &lt;code&gt;3px&lt;/code&gt; correspondingly.&lt;/p&gt;
&lt;p&gt;TheÂ principle isÂ theÂ same: weÂ just need toÂ multiply each possible value toÂ anÂ expression that would beÂ equal toÂ &lt;code&gt;1&lt;/code&gt; when theÂ condition forÂ this value isÂ theÂ one weÂ need andÂ toÂ &lt;code&gt;0&lt;/code&gt; inÂ other cases. AndÂ this expression can beÂ composed rather easily: weÂ just need toÂ nullify each other possible value ofÂ our conditional variable. After doing this we&amp;#39;d need toÂ add our triggering value there toÂ see ifÂ we&amp;#39;d need toÂ adjust theÂ result soÂ itÂ would beÂ equal toÂ 1. AndÂ that&amp;#39;s it.&lt;/p&gt;
&lt;h3 id=&quot;a-possible-trap-in-the-specs&quot;&gt;AÂ Possible Trap inÂ theÂ Specs&lt;/h3&gt;
&lt;p&gt;With theÂ increasing complexity ofÂ such calculations, there isÂ aÂ chance atÂ one point they would stop from working. Why? There isÂ this note inÂ &lt;a href=&quot;https://drafts.csswg.org/css-values-3/#calc-syntax&quot;&gt;specs&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;UAs must support calc() expressions ofÂ atÂ least 20 terms, where each &lt;abbr&gt;NUMBER&lt;/abbr&gt;, &lt;abbr&gt;DIMENSION&lt;/abbr&gt;, orÂ &lt;abbr&gt;PERCENTAGE&lt;/abbr&gt; isÂ aÂ term. IfÂ aÂ calc() expression contains more than theÂ supported number ofÂ terms, itÂ must beÂ treated asÂ ifÂ itÂ were invalid.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;OfÂ course, IÂ tested this aÂ bit andÂ couldn&amp;#39;t found such limitations inÂ theÂ browsers IÂ tested, but there isÂ still aÂ chance either you would write some really complex code that would meet theÂ possible existing limit, orÂ some ofÂ theÂ browsers could introduce this limit inÂ theÂ future, soÂ beÂ careful when using really complex calculations.&lt;/p&gt;
&lt;h2 id=&quot;conditions-for-colors&quot;&gt;Conditions forÂ Colors&lt;/h2&gt;
&lt;p&gt;AsÂ you can see, those calculations could beÂ used only forÂ things that you can &lt;em&gt;calculate&lt;/em&gt;, soÂ there isÂ noÂ chance weÂ could use itÂ forÂ switching theÂ values ofÂ &lt;code&gt;display&lt;/code&gt; property orÂ any other non-numeric ones. But what about colors? Actually, weÂ can calculate theÂ individual components ofÂ theÂ colors. Sadly, right now itÂ would work only inÂ Webkits andÂ Blinks, asÂ &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=984021&quot; title=&quot;Bugzilla ticket&quot;&gt;Firefox don&amp;#39;t yet support&lt;/a&gt; &lt;code&gt;calc()&lt;/code&gt; inside &lt;code&gt;rgba()&lt;/code&gt; andÂ other color functions.&lt;/p&gt;
&lt;p&gt;But when theÂ support would beÂ there (orÂ ifÂ you&amp;#39;d like toÂ experiment onÂ this inÂ browsers with anÂ existing support), weÂ could doÂ things like that:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;:root {
    --is-red: 0;
}

.block {
    background: rgba(
        calc(
            255*var(--is-red) +
            0*(1 - var(--is-red))
            ),
        calc(
            0*var(--is-red) +
            255*(1 - var(--is-red))
            ),
        0, 1);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Here we&amp;#39;d have lime color byÂ default andÂ red ifÂ theÂ &lt;code&gt;--is-red&lt;/code&gt; would beÂ set toÂ &lt;code&gt;1&lt;/code&gt; (note that when theÂ component could beÂ zero weÂ could just omit itÂ atÂ all, making out code more compact, here IÂ kept those forÂ clarity ofÂ anÂ algorithm).&lt;/p&gt;
&lt;p&gt;AsÂ you could doÂ those calculations with any components, itÂ isÂ possible toÂ create those conditions forÂ any colors (andÂ maybe even forÂ gradients? You should try it!).&lt;/p&gt;
&lt;h3 id=&quot;another-trap-in-the-specs&quot;&gt;Another Trap inÂ theÂ Specs&lt;/h3&gt;
&lt;p&gt;When IÂ was testing how theÂ conditions work forÂ colors, IÂ found out aÂ really, &lt;em&gt;really&lt;/em&gt; &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#issue-resolved&quot; id=&quot;issue-resolved&quot;&gt;weird limitation inÂ Specs&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Tab Atkins &lt;a href=&quot;https://github.com/kizu/kizu.github.com/issues/186&quot;&gt;commented&lt;/a&gt; that this issue with color components was fixed inÂ theÂ specs (but isÂ not yet supported byÂ browsers). Yay! Also heÂ said that asÂ another solution weÂ could just use percentages inside &lt;code&gt;rgba&lt;/code&gt;, IÂ totally forgot about this feature, haha.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;. ItÂ isÂ called &lt;a href=&quot;https://twitter.com/kizmarh/status/788504161864261632&quot;&gt;â€œType Checkingâ€&lt;/a&gt;. IÂ now officially hate it. What this means isÂ that ifÂ theÂ property accepts only &lt;code&gt;&amp;lt;integer&amp;gt;&lt;/code&gt; asÂ aÂ value, ifÂ you&amp;#39;d have any divisions orÂ non-integers inside theÂ &lt;code&gt;calc()&lt;/code&gt; forÂ it, even ifÂ theÂ result would beÂ integer, theÂ â€œresolved typeâ€ wouldn&amp;#39;t beÂ &lt;code&gt;&amp;lt;integer&amp;gt;&lt;/code&gt;, itÂ would beÂ &lt;code&gt;&amp;lt;number&amp;gt;&lt;/code&gt;, andÂ that means that those properties won&amp;#39;t accept such values. AndÂ when we&amp;#39;d have calculations involving more than two possible values, we&amp;#39;d need toÂ have aÂ non-integer modifiers. AndÂ that would make our calculation invalid forÂ using with colors orÂ other integer-only properties (like &lt;code&gt;z-index&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;That is:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;calc(255 * (1 - var(--bar)) * (var(--bar) - 2) * -0.5)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Would beÂ invalid when inside ofÂ theÂ &lt;code&gt;rgba()&lt;/code&gt;. Initially IÂ thought that this behaviour isÂ aÂ bug, especially knowing how theÂ color functions can actually accept theÂ values that goÂ beyond theÂ possible ranges (you can doÂ &lt;code&gt;rgba(9001, +9001, -9001, 42)&lt;/code&gt; andÂ get aÂ valid yellow color), but this typing thing seems toÂ beÂ too hard forÂ browsers toÂ handle.&lt;/p&gt;
&lt;h4 id=&quot;solutions-&quot;&gt;Solutions?&lt;/h4&gt;
&lt;p&gt;There isÂ one far from perfect solution. AsÂ inÂ our case weÂ know both theÂ desired value andÂ the problematic modifier, weÂ can pre-calculate them andÂ then round itÂ up. Yep, that means that theÂ resulting value could beÂ not exactly theÂ same, asÂ weÂ would lose some precision inÂ some cases. But itÂ isÂ better than nothing, right?&lt;/p&gt;
&lt;p&gt;But there isÂ another solution that would work forÂ &lt;span class=&quot;nobr&quot;&gt;colorsâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;weÂ can use &lt;code&gt;hsla&lt;/code&gt; instead ofÂ &lt;code&gt;rgba&lt;/code&gt;, asÂ itÂ accepts not integers, but numbers andÂ percentages, soÂ there won&amp;#39;t beÂ aÂ conflict inÂ type resolving. But forÂ other properties like &lt;code&gt;z-index&lt;/code&gt; that solution won&amp;#39;t work. But even with this method there still could beÂ some losses inÂ precision ifÂ you&amp;#39;re going toÂ convert &lt;code&gt;rgb&lt;/code&gt; toÂ &lt;code&gt;hsl&lt;/code&gt;. But those should beÂ less than inÂ previous solution.&lt;/p&gt;
&lt;h2 id=&quot;preprocessing&quot;&gt;Preprocessing&lt;/h2&gt;
&lt;p&gt;When theÂ conditions are binary itÂ isÂ still possible toÂ write them byÂ hand. But when we&amp;#39;re starting toÂ use more complex conditions, orÂ when we&amp;#39;re getting toÂ theÂ colors, we&amp;#39;d better have tools that could make itÂ easier toÂ write. Luckily, weÂ have preprocessors forÂ this purpose.&lt;/p&gt;
&lt;p&gt;Here isÂ how IÂ managed toÂ quickly doÂ itÂ inÂ &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#pen&quot; id=&quot;pen&quot;&gt;Stylus&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;You can look atÂ &lt;a href=&quot;http://codepen.io/kizu/pen/zKmyvG&quot;&gt;CodePen with this code&lt;/a&gt; inÂ action.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;conditional($var, $values...)
  $result = &amp;#39;&amp;#39;

  // If there is only an array passed, use its contents
  if length($values) == 1
    $values = $values[0]

  // Validating the values and check if we need to do anything at all
  $type = null
  $equal = true

  for $value, $i in $values
    if $i &amp;gt; 0 and $value != $values[0]
      $equal = false

    $value_type = typeof($value)
    $type = $type || $value_type
    if !($type == &amp;#39;unit&amp;#39; or $type == &amp;#39;rgba&amp;#39;)
      error(&amp;#39;Conditional function can accept only numbers or colors&amp;#39;)

    if $type != $value_type
      error(&amp;#39;Conditional function can accept only same type values&amp;#39;)

  // If all the values are equal, just return one of them
  if $equal
    return $values[0]

  // Handling numbers
  if $type == &amp;#39;unit&amp;#39;
    $result = &amp;#39;calc(&amp;#39;
    $i_count = 0
    for $value, $i in $values
      $multiplier = &amp;#39;&amp;#39;
      $modifier = 1
      $j_count = 0
      for $j in 0..(length($values) - 1)
        if $j != $i
          $j_count = $j_count + 1
          // We could use just the general multiplier,
          // but for 0 and 1 we can simplify it a bit.
          if $j == 0
            $modifier = $modifier * $i
            $multiplier = $multiplier + $var
          else if $j == 1
            $modifier = $modifier * ($j - $i)
            $multiplier = $multiplier + &amp;#39;(1 - &amp;#39; + $var + &amp;#39;)&amp;#39;
          else
            $modifier = $modifier * ($i - $j)
            $multiplier = $multiplier + &amp;#39;(&amp;#39; + $var + &amp;#39; - &amp;#39; + $j + &amp;#39;)&amp;#39;

          if $j_count &amp;lt; length($values) - 1
            $multiplier = $multiplier + &amp;#39; * &amp;#39;

      // If value is zero, just don&amp;#39;t add it there lol
      if $value != 0
        if $modifier != 1
          $multiplier = $multiplier + &amp;#39; * &amp;#39; + (1 / $modifier)
        $result = $result + ($i_count &amp;gt; 0 ? &amp;#39; + &amp;#39; : &amp;#39;&amp;#39;) + $value + &amp;#39; * &amp;#39; + $multiplier
        $i_count = $i_count + 1

    $result = $result + &amp;#39;)&amp;#39;

  // Handling colors
  if $type == &amp;#39;rgba&amp;#39;
    $hues = ()
    $saturations = ()
    $lightnesses = ()
    $alphas = ()

    for $value in $values
      push($hues, unit(hue($value), &amp;#39;&amp;#39;))
      push($saturations, saturation($value))
      push($lightnesses, lightness($value))
      push($alphas, alpha($value))

    $result = &amp;#39;hsla(&amp;#39; + conditional($var, $hues) + &amp;#39;, &amp;#39; + conditional($var, $saturations) + &amp;#39;, &amp;#39; + conditional($var, $lightnesses) + &amp;#39;, &amp;#39; + conditional($var, $alphas) +  &amp;#39;)&amp;#39;

  return unquote($result)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Yep, there isÂ aÂ lot ofÂ code, but this mixin can generate conditionals both forÂ numbers andÂ colors, andÂ not only forÂ two possible conditions but forÂ many more.&lt;/p&gt;
&lt;p&gt;TheÂ usage isÂ really easy:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;border-width: conditional(var(--foo), 10px, 20px)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;TheÂ first argument isÂ our variable, theÂ second one isÂ theÂ value that should beÂ applied when theÂ variable would beÂ equal toÂ &lt;code&gt;0&lt;/code&gt;, theÂ &lt;span class=&quot;nobr&quot;&gt;thirdâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;when itÂ would beÂ equal toÂ &lt;code&gt;1&lt;/code&gt;, etc.&lt;/p&gt;
&lt;p&gt;This above call would generate proper conditional:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;border-width: calc(10px * (1 - var(--foo)) + 20px * var(--foo));
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;AndÂ here isÂ aÂ more complex example forÂ the color conditionals:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;color: conditional(var(--bar), red, lime, rebeccapurple, orange)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Would generate something that you surely wouldn&amp;#39;t want toÂ write byÂ hand:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;color: hsla(calc(120 * var(--bar) * (var(--bar) - 2) * (var(--bar) - 3) * 0.5 + 270 * var(--bar) * (1 - var(--bar)) * (var(--bar) - 3) * 0.5 + 38.82352941176471 * var(--bar) * (1 - var(--bar)) * (var(--bar) - 2) * -0.16666666666666666), calc(100% * (1 - var(--bar)) * (var(--bar) - 2) * (var(--bar) - 3) * 0.16666666666666666 + 100% * var(--bar) * (var(--bar) - 2) * (var(--bar) - 3) * 0.5 + 49.99999999999999% * var(--bar) * (1 - var(--bar)) * (var(--bar) - 3) * 0.5 + 100% * var(--bar) * (1 - var(--bar)) * (var(--bar) - 2) * -0.16666666666666666), calc(50% * (1 - var(--bar)) * (var(--bar) - 2) * (var(--bar) - 3) * 0.16666666666666666 + 50% * var(--bar) * (var(--bar) - 2) * (var(--bar) - 3) * 0.5 + 40% * var(--bar) * (1 - var(--bar)) * (var(--bar) - 3) * 0.5 + 50% * var(--bar) * (1 - var(--bar)) * (var(--bar) - 2) * -0.16666666666666666), 1);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that there isÂ noÂ detection ofÂ &lt;code&gt;&amp;lt;integer&amp;gt;&lt;/code&gt;-accepting properties, soÂ that won&amp;#39;t work forÂ &lt;code&gt;z-index&lt;/code&gt; andÂ such, but itÂ already converts colors toÂ &lt;code&gt;hsla()&lt;/code&gt; toÂ make them manageble (though even this could beÂ enhanced soÂ this convertation would happen only when itÂ would beÂ needed). Another thing IÂ didn&amp;#39;t implement inÂ this mixin (yet?) isÂ theÂ ability toÂ use &lt;abbr&gt;CSS&lt;/abbr&gt; variables forÂ the values. This would beÂ possible forÂ non-integer numbers asÂ those values would beÂ inserted asÂ isÂ inÂ theÂ conditional calculations. Maybe, when I&amp;#39;ll find time, I&amp;#39;ll fix theÂ mixin toÂ accept not only numbers orÂ colors but also variables. ForÂ the time being itÂ isÂ still possible toÂ doÂ using theÂ algorithm explained inÂ this article.&lt;/p&gt;
&lt;h2 id=&quot;fallbacks&quot;&gt;Fallbacks&lt;/h2&gt;
&lt;p&gt;OfÂ course, ifÂ you&amp;#39;re planning toÂ actually use this, you&amp;#39;ll need toÂ have aÂ way toÂ set fallbacks. They&amp;#39;re easy forÂ browsers that just don&amp;#39;t support variables: you just declare theÂ fallback value before theÂ conditional declaration:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.block {
    padding: 100px; /* fallback */
    padding: calc(
        100px * ((1 - var(--foo)) * (2 - var(--foo)) / 2) +
         20px * (var(--foo) * (2 - var(--foo))) +
          3px * (var(--foo) * (1 - var(--foo)) / -2)
    );
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But when itÂ comes toÂ colors weÂ have aÂ problem: when there isÂ aÂ support forÂ variables, inÂ fact (andÂ that&amp;#39;s another really weird place inÂ specs), &lt;em&gt;just any&lt;/em&gt; declaration containing variables would beÂ considered valid. AndÂ this means that itÂ isÂ not possible inÂ &lt;abbr&gt;CSS&lt;/abbr&gt; toÂ make aÂ fallback forÂ something containing variables:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;background: blue;
background: I ğŸ’© CSS VAR(--I)ABLES;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;IsÂ valid &lt;abbr&gt;CSS&lt;/abbr&gt; andÂ per specs, theÂ background would get anÂ &lt;code&gt;initial&lt;/code&gt; value, not theÂ one provided inÂ aÂ fallback (even though itÂ isÂ obvious that theÂ other parts ofÂ theÂ value are incorrect).&lt;/p&gt;
&lt;p&gt;So, what weÂ need inÂ order toÂ provide aÂ fallback inÂ those &lt;span class=&quot;nobr&quot;&gt;casesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;add &lt;code&gt;@support&lt;/code&gt; wrapper that would test theÂ support forÂ everything &lt;strong&gt;except&lt;/strong&gt; forÂ the variables.&lt;/p&gt;
&lt;p&gt;InÂ our case, weÂ need toÂ wrap our conditional colors forÂ Firefox inÂ something like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.block {
    color: #f00;
}
@supports (color: rgb(0, calc(0), 0)) {
    .block {
        color: rgba(calc(255 * (1 - var(--foo))), calc(255 * var(--foo)), 0, 1);
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Here we&amp;#39;re testing aÂ support forÂ calculations inside color functions andÂ applying theÂ conditional color only inÂ that case.&lt;/p&gt;
&lt;p&gt;ItÂ isÂ also possible toÂ create such fallbacks automatically, but IÂ won&amp;#39;t recommend you toÂ use preprocessors forÂ them asÂ theÂ complexity ofÂ creating such stuff isÂ much more than theÂ capabilities preprocessors provide.&lt;/p&gt;
&lt;h2 id=&quot;use-cases&quot;&gt;Use Cases&lt;/h2&gt;
&lt;p&gt;IÂ really don&amp;#39;t like toÂ provide use cases forÂ the things theÂ need forÂ which isÂ obvious. SoÂ I&amp;#39;ll beÂ brief. AndÂ I&amp;#39;ll state not only theÂ conditions forÂ variables, but also theÂ general conditions, like forÂ the result ofÂ &lt;code&gt;calc()&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;TheÂ conditions forÂ &lt;abbr&gt;CSS&lt;/abbr&gt; variables would beÂ perfect forÂ themifying blocks. This way you could have aÂ number ofÂ numbered themes andÂ then apply them toÂ blocks (andÂ nested ones!) using just one &lt;abbr&gt;CSS&lt;/abbr&gt; variable like &lt;code&gt;--block-variant: 1&lt;/code&gt;. This isÂ not something that isÂ possible through any other means other than variables andÂ when you&amp;#39;d want toÂ have different values forÂ different props inÂ different themes, without theÂ conditionals you&amp;#39;d need toÂ have many different variables andÂ apply all ofÂ them inÂ every case.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Typography. IfÂ itÂ was possible toÂ use theÂ &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;lt;=&lt;/code&gt;, &lt;code&gt;&amp;gt;&lt;/code&gt; andÂ &lt;code&gt;&amp;gt;=&lt;/code&gt; inÂ conditions forÂ variables, itÂ would beÂ possible toÂ have aÂ number ofÂ â€œrulesâ€ forÂ different font sizes, soÂ you could set different line heights, font weights andÂ other properties based onÂ theÂ given font-size. This isÂ possible now, but now when you need toÂ have some â€œstopsâ€ forÂ those valuea andÂ not just theÂ values derived from &lt;code&gt;em&lt;/code&gt;s.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Responsive design. Well, ifÂ there were theÂ conditions forÂ calculations, then itÂ would beÂ almost theÂ same asÂ those elusive â€œelement queriesâ€&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;you could check theÂ &lt;code&gt;vw&lt;/code&gt; orÂ theÂ parent&amp;#39;s widths inÂ percents andÂ decide what toÂ apply inÂ different cases.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There can beÂ other use cases, tell meÂ ifÂ you&amp;#39;d find one! I&amp;#39;m sure IÂ had more ofÂ them myself, but IÂ don&amp;#39;t have that good ofÂ aÂ memory toÂ remember all theÂ things IÂ ever wanted toÂ doÂ with &lt;abbr&gt;CSS&lt;/abbr&gt;. Because its all theÂ things.&lt;/p&gt;
&lt;h2 id=&quot;future&quot;&gt;Future&lt;/h2&gt;
&lt;p&gt;IÂ would really like toÂ see conditions described inÂ &lt;abbr&gt;CSS&lt;/abbr&gt; specs, soÂ weÂ would not rely onÂ calc hacks andÂ could use proper conditions forÂ non-calculatable values too. ItÂ isÂ also impossible right now toÂ have conditions other than strict equality, soÂ noÂ â€œwhen theÂ variable isÂ more than Xâ€ andÂ other stuff like that. IÂ don&amp;#39;t see any reasons why weÂ can&amp;#39;t have proper conditions inÂ &lt;abbr&gt;CSS&lt;/abbr&gt;, soÂ ifÂ you know aÂ fellow spec developer, hint them about this issue. MyÂ only hope isÂ that they won&amp;#39;t tell usÂ toÂ â€œjust use JSâ€ orÂ find out excuses ofÂ why that wouldn&amp;#39;t ever beÂ possible. Here, itÂ isÂ already possible now using theÂ hacks, there can&amp;#39;t beÂ any excuses.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Styling inline code</title>
    <link href="http://kizu.ru/en/blog/styling-inline-code/"/>
    <updated>2016-09-08T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/blog/styling-inline-code</id>
    <content type="html">&lt;h1 id=&quot;styling-inline-code&quot;&gt;Styling inline code&lt;/h1&gt;
&lt;p&gt;When IÂ was working onÂ &lt;a href=&quot;/en/blog/the-new-version-of-this-site/&quot;&gt;myÂ site&amp;#39;s new version&lt;/a&gt;, IÂ tried toÂ think more about how everything should look andÂ read typography-wise. AndÂ one ofÂ theÂ things IÂ always had problems with was how toÂ style inline code blocks. Most ofÂ theÂ time weÂ can see small colorful rectangles inÂ place ofÂ them. AndÂ the more you put those things inside your text, theÂ worse theÂ reading experience becomes.&lt;/p&gt;
&lt;figure class=&quot;Sidenote-Wrapper&quot;&gt;&lt;figcaption class=&quot;Sidenote&quot;&gt;This example isÂ taken from aÂ &lt;a href=&quot;https://en.wikipedia.org/wiki/Cascading_Style_Sheets#Selector&quot;&gt;Wikipedia article onÂ &lt;abbr&gt;CSS&lt;/abbr&gt;&lt;/a&gt;. Look atÂ all those colorful rectangles. Also, note how some ofÂ theÂ things that could beÂ inline code blocks are not marked asÂ such asÂ they surely would introduce even more visual clutter.&lt;/figcaption&gt;&lt;img class=&quot;Sidenote-Context&quot; src=&quot;http://kizu.ru/en/blog/styling-inline-code/example.png&quot; title=&quot;&quot; alt=&quot;Screenshot from Wikipedia&quot;&gt;&lt;/figure&gt;
&lt;p&gt;What ifÂ that overused inline code blocks&amp;#39; style isÂ just redundant?&lt;/p&gt;
&lt;p&gt;Almost everything weÂ see there isÂ coming from how theÂ proper multiline code blocks are often presented. But doÂ weÂ really need all those styles inÂ anÂ &lt;em&gt;inline context&lt;/em&gt;?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;DoÂ weÂ need monospace font?&lt;/strong&gt; Nope. Monospace isÂ useful when weÂ have multiple lines andÂ need toÂ align symbols inÂ aÂ nice way. But inside aÂ regular text? WeÂ don&amp;#39;t need it. GoÂ away, monospace font.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;DoÂ weÂ need borders andÂ any background color?&lt;/strong&gt; Unlikely. When weÂ have aÂ big single code block they&amp;#39;re ok, but those styles become too bright andÂ eye-catching inÂ anÂ inline context. They make your inline code blocks too &lt;strong&gt;bold&lt;/strong&gt;, andÂ itÂ would worsen theÂ text&amp;#39;s readability, asÂ theÂ eye would pay attention toÂ those bright spots before you&amp;#39;ll read theÂ whole text.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;DoÂ weÂ need syntax highlighting?&lt;/strong&gt; IÂ doubt it. ItÂ isÂ useful when weÂ have aÂ lot ofÂ code andÂ need toÂ separate some things from theÂ other, but when weÂ have only one orÂ two words inside out code blocks, theÂ highlighting isÂ just unnecessary andÂ won&amp;#39;t doÂ anything except forÂ getting more ofÂ our attention toÂ it.&lt;/p&gt;
&lt;h2 id=&quot;my-solution&quot;&gt;MyÂ Solution&lt;/h2&gt;
&lt;p&gt;So, ifÂ all those styles are redundant, orÂ even harmful forÂ our text, what should weÂ use instead? After some thoughts about all those issues, IÂ started toÂ look into how people are styling similar entities inÂ regular books. When itÂ comes toÂ theÂ non-obtrusive way ofÂ emphasizing some parts ofÂ theÂ text theÂ solution isÂ obvious. &lt;em&gt;Italic&lt;/em&gt;. AndÂ ifÂ itÂ isÂ useful forÂ the regular texts, why couldn&amp;#39;t weÂ use itÂ forÂ our inline code blocks?&lt;/p&gt;
&lt;figure class=&quot;Sidenote-Wrapper&quot;&gt;&lt;figcaption class=&quot;Sidenote&quot;&gt;MyÂ version ofÂ theÂ above example now reads better asÂ aÂ text. TheÂ bottom inline code blocks, theÂ ones with theÂ whole &lt;abbr&gt;CSS&lt;/abbr&gt; rules, were actually aÂ bit better with theÂ highlighting, soÂ itÂ would beÂ possible toÂ reintroduce itÂ there, but not asÂ brightly asÂ itÂ was before.&lt;/figcaption&gt;&lt;img class=&quot;Sidenote-Context&quot; src=&quot;http://kizu.ru/en/blog/styling-inline-code/solution.png&quot; title=&quot;&quot; alt=&quot;Fixed screenshot from Wikipedia&quot;&gt;&lt;/figure&gt;
&lt;p&gt;Actually, you can look atÂ anÂ inline code block &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#semantics&quot; id=&quot;semantics&quot;&gt;right there&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Here IÂ used just anÂ &lt;code&gt;&amp;lt;em&amp;gt;&lt;/code&gt;, asÂ this post could beÂ seen onÂ &lt;abbr&gt;RSS&lt;/abbr&gt;-readers andÂ inÂ other places where you wouldn&amp;#39;t have theÂ proper code blocks&amp;#39; style like IÂ used forÂ myÂ blog.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;: &lt;em&gt;font-style: italic&lt;/em&gt;. IÂ think that itÂ look rather &lt;span class=&quot;nobr&quot;&gt;niceâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;unobtrusive, but separate from theÂ regular text.&lt;/p&gt;
&lt;p&gt;Italic separates theÂ code from theÂ other text just fine, inÂ most cases, you won&amp;#39;t need anything else there. TheÂ easiest way toÂ make your inline code blocks italic isÂ something like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;:not(pre) &amp;gt; code {
    font: inherit;
    font-style: italic;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This would make your inline code blocks toÂ look like aÂ regular italic text. Note theÂ &lt;code&gt;:not(pre)&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;ifÂ you&amp;#39;ll mark your big code blocks using &lt;code&gt;&amp;lt;pre&amp;gt;&amp;lt;code&amp;gt;&lt;/code&gt;, this selector won&amp;#39;t match them. OfÂ course, ifÂ you&amp;#39;re using some kind ofÂ syntax highlighter, you&amp;#39;ll need toÂ disable itÂ (orÂ override its styles) forÂ inline code blocks. InÂ some cases, when you&amp;#39;re using aÂ different web font forÂ the italic, you&amp;#39;ll need toÂ specify this too toÂ not make aÂ faux italic instead, ofÂ course.&lt;/p&gt;
&lt;p&gt;There can beÂ some cons forÂ this solution. ForÂ example, ifÂ you&amp;#39;d want toÂ have some &lt;em&gt;regular emphasis&lt;/em&gt; you&amp;#39;ll have theÂ same style forÂ both itÂ andÂ inline code blocks. But inÂ most cases reader would know theÂ difference from theÂ context andÂ itÂ won&amp;#39;t matter much.&lt;/p&gt;
&lt;h2 id=&quot;yes-it-39-s-all-subjective&quot;&gt;Yes, It&amp;#39;s All Subjective&lt;/h2&gt;
&lt;p&gt;Italic forÂ inline code blocks can be, ofÂ course, unusual. But I&amp;#39;m not saying that that&amp;#39;s theÂ only possible solution.
Overall, itÂ isÂ aÂ matter ofÂ &lt;span class=&quot;nobr&quot;&gt;styleâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;how you would present your inline code blocks. Sometimes you&amp;#39;d want them toÂ pop andÂ bring reader&amp;#39;s attention. But ifÂ you&amp;#39;d want toÂ have your texts with aÂ lot ofÂ inline code blocks toÂ beÂ more &lt;span class=&quot;nobr&quot;&gt;readableâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;italic could help you.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>The New Version of This Site</title>
    <link href="http://kizu.ru/en/blog/the-new-version-of-this-site/"/>
    <updated>2016-08-13T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/blog/the-new-version-of-this-site</id>
    <content type="html">&lt;h1 id=&quot;the-new-version-of-this-site&quot;&gt;TheÂ New Version ofÂ This Site&lt;/h1&gt;
&lt;p&gt;Around one andÂ aÂ half month ago, onÂ &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#yep&quot; id=&quot;yep&quot;&gt;June, 23rd&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Yep, itÂ was more than aÂ month from theÂ publishing ofÂ aÂ site till IÂ published this &lt;span class=&quot;nobr&quot;&gt;postâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;IÂ wanted toÂ see how theÂ new site would work inÂ production andÂ fix some things here andÂ there.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;, IÂ published aÂ new version ofÂ myÂ site. Once again. ItÂ isÂ rather hard toÂ remember which version number itÂ should beÂ now. IfÂ we&amp;#39;d count itÂ from theÂ very start, from theÂ times when IÂ didn&amp;#39;t know how toÂ markup pages properly, this would beÂ theÂ thirteenth version. OrÂ something around that. OfÂ course, that isÂ ifÂ weÂ won&amp;#39;t count all theÂ unfinished andÂ trashed versions.&lt;/p&gt;
&lt;h2 id=&quot;a-bit-of-history&quot;&gt;AÂ Bit ofÂ History&lt;/h2&gt;
&lt;p&gt;MyÂ very first site was uploaded toÂ theÂ internets onÂ theÂ fourth ofÂ November 2001. IÂ didn&amp;#39;t know what &lt;abbr&gt;CSS&lt;/abbr&gt; is. AtÂ &lt;span class=&quot;nobr&quot;&gt;allâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;theÂ site was made mostly ofÂ frames andÂ tables. That site&amp;#39;s content was mostly aÂ bunch ofÂ myÂ childish creations. Like custom maps forÂ the Heroes ofÂ Might andÂ Magic &lt;abbr&gt;III&lt;/abbr&gt; game, some stupid poetry, some other utter nonsense. TheÂ site moved from one ofÂ numerous free Russian hostings toÂ another, ending atÂ theÂ â€œnarod.ruâ€ where itÂ stayed forÂ quite aÂ long &lt;span class=&quot;nobr&quot;&gt;timeâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;8 different &lt;span class=&quot;nobr&quot;&gt;versionsâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;without any resemblance toÂ what you can see onÂ this site today.&lt;/p&gt;
&lt;p&gt;InÂ December 2006, IÂ happened toÂ read all theÂ &lt;abbr&gt;CSS&lt;/abbr&gt; specifications forÂ the first time, and, aÂ bit more than aÂ year after that, inÂ February 2008, I&amp;#39;ve launched aÂ ninth version ofÂ myÂ site, this time onÂ myÂ own &lt;span class=&quot;nobr&quot;&gt;domainâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;kizu.ru. AtÂ this time IÂ already knew something about how toÂ build web pages, all due toÂ theÂ years ofÂ tweaking theÂ styles forÂ LiveJournal, starting from theÂ &lt;abbr&gt;CSS&lt;/abbr&gt; overrides, andÂ finishing with custom templates onÂ LJ&amp;#39;s own templating engine. Therefore, IÂ decided toÂ dedicate myÂ new site toÂ web development, andÂ all myÂ creative stuff could beÂ now found only inÂ myÂ archives andÂ friends-only LiveJournal entries.&lt;/p&gt;
&lt;p&gt;AtÂ first, IÂ used &lt;a href=&quot;https://movabletype.org/&quot;&gt;Movable Type&lt;/a&gt; asÂ anÂ engine forÂ kizu.ru. Then, inÂ August 2009, when IÂ went deeper andÂ deeper into front-end web development andÂ learned how toÂ make all theÂ things from scratch, IÂ rewrote theÂ site toÂ beÂ just aÂ set ofÂ static &lt;abbr&gt;HTML&lt;/abbr&gt; files. This went until February 2011, when I&amp;#39;ve finally fed upÂ with updating theÂ site manually (using regular expressions andÂ global search-and-replace inÂ myÂ code editor), soÂ IÂ managed toÂ work out some automatization andÂ remade everything IÂ had using &lt;a href=&quot;http://nanoc.ws/&quot;&gt;nanoc&lt;/a&gt; static site generator.&lt;/p&gt;
&lt;p&gt;Another two years passed andÂ onÂ January 17, 2013, IÂ relaunched theÂ whole site once again, this time using &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt;, with theÂ hosting onÂ &lt;a href=&quot;https://pages.github.com/&quot;&gt;GitHub Pages&lt;/a&gt;. This time though, IÂ rethought theÂ whole site&amp;#39;s design andÂ went deeper into achieving readable typography forÂ the content. That was theÂ previous, twelfth version ofÂ myÂ site.&lt;/p&gt;
&lt;h2 id=&quot;thirteenth-version&quot;&gt;Thirteenth Version&lt;/h2&gt;
&lt;h3 id=&quot;engine&quot;&gt;Engine&lt;/h3&gt;
&lt;p&gt;This time, IÂ managed toÂ rewrite everything from scratch. Twice! Jekyll that IÂ endorsed aÂ lot before, started toÂ become too tight forÂ me. When coming from theÂ box (i.e. theÂ version that isÂ there atÂ GitHub Pages) itÂ can&amp;#39;t doÂ too much. Any advanced needs (like some ofÂ theÂ typography quirks) could beÂ achieved only byÂ aÂ really hellish code onÂ its Liquid template engine, orÂ byÂ using external ruby plug-ins. IÂ went far beyond what was possible inÂ Liquid (andÂ made some things there IÂ doubt anyone had gone that far to) andÂ was atÂ its limits, andÂ you couldn&amp;#39;t run theÂ ruby plugins onÂ GitHub Pages. AndÂ ifÂ I&amp;#39;d need toÂ build theÂ site asÂ anÂ extra step andÂ push theÂ built static files, IÂ thought ofÂ using something that I&amp;#39;m more familiar &lt;span class=&quot;nobr&quot;&gt;withâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;JS.&lt;/p&gt;
&lt;p&gt;SoÂ IÂ chose &lt;a href=&quot;http://docpad.org/&quot;&gt;Docpad&lt;/a&gt;. IÂ almost rewrote theÂ whole site using it, but theÂ farther IÂ went, theÂ longer theÂ build time increased. AtÂ one point, when theÂ build time went beyond 90 seconds, IÂ told myself toÂ stop andÂ look atÂ theÂ site with fresh eyes. After some thoughts, after reading both Docpad docs andÂ the docs ofÂ different other static site generators, IÂ concluded that nothing that isÂ there onÂ theÂ market would fit myÂ needs. Everywhere IÂ needed more than theÂ projects could allow meÂ to, so, inÂ any case, I&amp;#39;d need toÂ write more than 90% ofÂ what IÂ need byÂ myself, without using any external plugins. AndÂ that meant fighting with how theÂ static generators were meant toÂ work.&lt;/p&gt;
&lt;p&gt;InÂ theÂ end, IÂ wrote theÂ whole static site generation thing byÂ myself, using gulp asÂ aÂ foundation andÂ reusing some ofÂ theÂ custom JS IÂ wrote forÂ the Docpad version. Disclaimer: &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#don-t&quot; id=&quot;don-t&quot;&gt;don&amp;#39;t look into theÂ source&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;&lt;abbr&gt;BTW&lt;/abbr&gt;, IÂ made aÂ &lt;a href=&quot;https://vimeo.com/album/2588576/video/77929464&quot;&gt;short talk&lt;/a&gt; with this exact name.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;. Everything. Is. Very. Bad. IÂ have learned gulp onÂ theÂ fly, prototyped, experimented. But even this non-optimized andÂ not profiled code runs 10 times faster than what IÂ have managed toÂ get from &lt;span class=&quot;nobr&quot;&gt;Docpadâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;around &lt;span class=&quot;nobr&quot;&gt;8-9&lt;/span&gt; seconds top, with more features andÂ complexity. With watchers, different parts could beÂ rebuilt even faster, andÂ IÂ have plans toÂ add partial rebuilds just forÂ specific posts that would make everything lightning-fast. AndÂ itÂ isÂ already much easier toÂ add new features even with theÂ current messy code base.&lt;/p&gt;
&lt;p&gt;Anyway, I&amp;#39;m glad that IÂ went out ofÂ using theÂ existing static generators andÂ learned theÂ basics ofÂ gulp; maybe one day I&amp;#39;ll separate some parts ofÂ myÂ engine soÂ you could reuse itÂ too. But IÂ can&amp;#39;t promise anything there. Maybe atÂ one point I&amp;#39;ll even rewrite everything onÂ something new, like all that fancy react-webpack stuff, who knows! But right now almost everything isÂ fine forÂ me.&lt;/p&gt;
&lt;h3 id=&quot;markup-design-and-typography&quot;&gt;Markup, Design, andÂ Typography&lt;/h3&gt;
&lt;p&gt;You shouldn&amp;#39;t look into theÂ sources ofÂ &lt;abbr&gt;CSS&lt;/abbr&gt; too. Most ofÂ theÂ styles are there from theÂ previous version ofÂ theÂ site, andÂ while some things are rewritten aÂ bit, I&amp;#39;d like toÂ rewrite everything from scratch there again. No, IÂ still like aÂ lot ofÂ what IÂ wrote, but theÂ source isÂ dirty, badly structured, don&amp;#39;t look atÂ it. TheÂ tastiest stuff would beÂ explained inÂ theÂ &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#i-swear&quot; id=&quot;i-swear&quot;&gt;future posts&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Yeah, IÂ often overpromise all theÂ new posts, but &lt;em&gt;forÂ once&lt;/em&gt;, I&amp;#39;m going toÂ fulfill it, IÂ swear! :)&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; anyway.&lt;/p&gt;
&lt;p&gt;TheÂ design may seem toÂ beÂ theÂ same asÂ itÂ was before atÂ theÂ first glance. But aÂ lot ofÂ little details had changed, especially inÂ typography. I&amp;#39;m still using aÂ custom font that IÂ &lt;span class=&quot;nobr&quot;&gt;boughtâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;a href=&quot;http://www.myfonts.com/fonts/letterheadrussia/21-cent/&quot;&gt;21 Cent&lt;/a&gt; byÂ &lt;a href=&quot;http://www.letterhead.ru/&quot;&gt;Letterhead&lt;/a&gt;, but this time, IÂ bought another font style forÂ the headers. I&amp;#39;ve started toÂ use &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#overused&quot; id=&quot;overused&quot;&gt;more OpenType features&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Maybe even I&amp;#39;ve overused them somewhere just forÂ the sake ofÂ demoing them.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;, added hyphenation, &lt;span class=&quot;nobr&quot;&gt;andâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;ohÂ wow!&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;justified text. AndÂ itÂ even looks not that &lt;span class=&quot;nobr&quot;&gt;awfulâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;thanks toÂ theÂ hyphenation andÂ enough ofÂ available space forÂ the text. Overall, IÂ use aÂ lot ofÂ experimental andÂ not optimal stuff there. I&amp;#39;m sure IÂ would change some ofÂ those things inÂ theÂ future, andÂ IÂ certanly would drop other things ifÂ they would&amp;#39;t work out.&lt;/p&gt;
&lt;h3 id=&quot;content&quot;&gt;Content&lt;/h3&gt;
&lt;p&gt;IÂ have aÂ lot ofÂ plans andÂ ideas about what should beÂ there onÂ this site. Right now there are all theÂ same articles that were there before, but I&amp;#39;m removing theÂ unnecessary splitting toÂ all theÂ different categories (they would beÂ there, but just asÂ one ofÂ many other filters), andÂ created aÂ &lt;a href=&quot;/en/everything/&quot;&gt;list ofÂ everything that IÂ have there&lt;/a&gt; instead, soÂ itÂ would beÂ easier toÂ find anÂ article orÂ anÂ experiment you need. I&amp;#39;m planning toÂ fill itÂ upÂ over time not only with new posts andÂ experiments, but also with different old content that IÂ hadn&amp;#39;t yet published orÂ translated from Russian forÂ some reasons.&lt;/p&gt;
&lt;p&gt;Other than regularily writing new content (hopefully), IÂ would update theÂ basic structure ofÂ theÂ site too. There&amp;#39;ll beÂ aÂ regular â€œabout meâ€ section one day, aside from aÂ proper CV, andÂ alongside other interesting new pages.&lt;/p&gt;
&lt;h2 id=&quot;welcome-&quot;&gt;Welcome!&lt;/h2&gt;
&lt;p&gt;Thank you ifÂ you managed toÂ read this post till this point. AtÂ first, IÂ planned toÂ make just aÂ short post telling you â€œHey! Here isÂ aÂ new version!â€, but IÂ went rather deep into theÂ site&amp;#39;s history andÂ &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#old-versions&quot; id=&quot;old-versions&quot;&gt;versioning&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Maybe one day I&amp;#39;ll write more about all theÂ different old versions. When I&amp;#39;ll beÂ ready.&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;, then submerged into theÂ whole double jekyllâ†’docpadâ†’gulp rewrite. InÂ theÂ end, itÂ became aÂ &lt;span class=&quot;nobr&quot;&gt;not-so&lt;/span&gt;-short post, soÂ sorry forÂ that :)&lt;/p&gt;
&lt;p&gt;AsÂ always, ifÂ you&amp;#39;ll find any typos orÂ mistakes inÂ theÂ texts, orÂ bugs inÂ &lt;span class=&quot;nobr&quot;&gt;markupâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;feel free toÂ write meÂ &lt;a href=&quot;mailto:kizmarh@ya.ru&quot;&gt;anÂ &lt;span class=&quot;nobr&quot;&gt;e-mail&lt;/span&gt;&lt;/a&gt;, fill upÂ anÂ &lt;a href=&quot;https://github.com/kizu/kizu.github.com/issues&quot;&gt;issue atÂ GitHub&lt;/a&gt;, orÂ let meÂ know atÂ &lt;a href=&quot;https://twitter.com/kizmarh&quot;&gt;twitter&lt;/a&gt; anytime. I&amp;#39;ll beÂ glad! IfÂ you&amp;#39;d review theÂ design andÂ typography inÂ details andÂ would have any &lt;span class=&quot;nobr&quot;&gt;questionsâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;they&amp;#39;re welcome too, ofÂ course! While IÂ have plans forÂ future posts, ifÂ you would beÂ interested inÂ something specific, IÂ will beÂ happy toÂ elaborate onÂ it, asÂ this would beÂ aÂ nice motivator forÂ meÂ toÂ continue writing.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Nested Links</title>
    <link href="http://kizu.ru/en/fun/nested-links/"/>
    <updated>2015-02-10T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/fun/nested-links</id>
    <content type="html">&lt;h1 id=&quot;nested-links&quot;&gt;Nested Link&lt;span class=&quot;ss01&quot;&gt;s&lt;/span&gt;&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;http://kizu.ru/en/fun/nested-links/nested-links.jpg&quot; width=&quot;640&quot; height=&quot;480&quot; alt=&quot;Cats playing nested links&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;the-problem&quot;&gt;TheÂ problem&lt;/h2&gt;
&lt;p&gt;&lt;abbr&gt;HTML&lt;/abbr&gt; specification has aÂ lot ofÂ different restrictions. AndÂ IÂ have myÂ doubts about theÂ feasibility ofÂ many ofÂ those. One example which IÂ stumble upon rather &lt;span class=&quot;nobr&quot;&gt;oftenâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;nested links.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.w3.org/TR/html5/text-level-semantics.html#the-a-element&quot;&gt;Spec&lt;/a&gt; straightly forbids such nesting:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;TheÂ &lt;strong&gt;a&lt;/strong&gt; element&lt;/p&gt;
&lt;p&gt;[â€¦]&lt;/p&gt;
&lt;p&gt;Content model: transparent, but there must beÂ noÂ &lt;a href=&quot;http://www.w3.org/TR/html5/dom.html#interactive-content-0&quot;&gt;interactive&lt;/a&gt; content descendant.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;AndÂ ifÂ youâ€™d doÂ this, browserâ€™s parser wonâ€™t understand you and, asÂ soon asÂ itâ€™d see theÂ opening tag forÂ the nested link, itÂ would close theÂ first one right there:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;a href=&amp;quot;#Foo&amp;quot;&amp;gt;
    Foo
    &amp;lt;a href=&amp;quot;#Bar&amp;quot;&amp;gt;
        Bar
    &amp;lt;/a&amp;gt;
    Baz
&amp;lt;/a&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;inÂ theÂ eyes ofÂ theÂ browser would beÂ something like &lt;span class=&quot;nobr&quot;&gt;that&amp;#8202;â€”&lt;/span&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;a href=&amp;quot;#Foo&amp;quot;&amp;gt;
    Foo
    &amp;lt;/a&amp;gt;&amp;lt;a href=&amp;quot;#Bar&amp;quot;&amp;gt;
        Bar
    &amp;lt;/a&amp;gt;
    Baz
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;AndÂ aÂ live example:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/fun/nested-links/#Demo_nested-links-broken&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;However, there are cases when youâ€™d want toÂ nest one link inside another despite theÂ restrictions.&lt;/p&gt;
&lt;p&gt;So, once again, while working onÂ one task IÂ stumbled upon such case. IÂ happen toÂ see andÂ use different workarounds forÂ itÂ before, like anÂ emulation ofÂ theÂ nested links with JS (forÂ example, with banal &lt;code&gt;onclick&lt;/code&gt;), orÂ positioning one ofÂ theÂ links around theÂ &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#shared-wrapper&quot; id=&quot;shared-wrapper&quot;&gt;shared wrapper&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Look atÂ &lt;a href=&quot;http://jsfiddle.net/csswizardry/rxsna/&quot;&gt;such solution&lt;/a&gt; byÂ Harry Roberts&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;, but all those workarounds wouldnâ€™t work inÂ all cases, andÂ wouldnâ€™t work perfectly. Weâ€™d either lose theÂ nativity ofÂ aÂ link, trying toÂ emulate everything from scratch, either wonâ€™t beÂ able toÂ make aÂ workaround work just like properly nested elements would.&lt;/p&gt;
&lt;p&gt;So, after trying andÂ weighing all theÂ known workarounds inÂ myÂ head, IÂ found out that IÂ couldn&amp;#39;t solve theÂ current task byÂ any ofÂ theÂ workarounds other than full JS emulation. But IÂ stopped andÂ decided toÂ experiment aÂ bit more.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;Andâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;found aÂ proper solution. &lt;abbr&gt;HTML&lt;/abbr&gt;-only one, byÂ theÂ way, theÂ one that gives you aÂ way toÂ nest any number ofÂ links one into another.&lt;/p&gt;
&lt;h2 id=&quot;the-solution&quot;&gt;TheÂ solution&lt;/h2&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/fun/nested-links/#Demo_nested-links-simple&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;a href=&amp;quot;#a&amp;quot;&amp;gt;
    Foo
    &amp;lt;object type=&amp;quot;lol/wut&amp;quot;&amp;gt;
        &amp;lt;a href=&amp;quot;#b&amp;quot;&amp;gt;
            Bar
        &amp;lt;/a&amp;gt;
    &amp;lt;/object&amp;gt;
    Baz
&amp;lt;/a&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;What weÂ doÂ there isÂ just placing anÂ object between those links. Yep, itÂ works: all parsers ofÂ modern browsers suddenly see those links independently, andÂ wonâ€™t break your markup anymore. Hooray.&lt;/p&gt;
&lt;h2 id=&quot;why-does-it-work&quot;&gt;Why does itÂ work&lt;/h2&gt;
&lt;p&gt;What are objects, inÂ theory? They are some external entities, with theÂ type set byÂ theÂ &lt;code&gt;type&lt;/code&gt; attribute andÂ the content orÂ aÂ link toÂ itÂ placed into theÂ &lt;code&gt;data&lt;/code&gt; attribute. AndÂ the content between theÂ opening andÂ closing &lt;code&gt;object&lt;/code&gt; tags is, &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#update&quot; id=&quot;update&quot;&gt;inÂ fact&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Actually, see theÂ &lt;a href=&quot;#update-from-2015-03-05&quot;&gt;Update&lt;/a&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;, aÂ fallback, andÂ itÂ would beÂ shown only when browser wouldnâ€™t beÂ capable ofÂ displaying theÂ object defined inÂ theÂ attributes. Like, forÂ example, ifÂ you wonâ€™t have anÂ installed plugin.&lt;/p&gt;
&lt;p&gt;AndÂ ifÂ youâ€™d write some gibberish &lt;abbr&gt;MIME&lt;/abbr&gt;-type into theÂ &lt;code&gt;type&lt;/code&gt; attribute, aÂ browser wouldnâ€™t understand itÂ andÂ would goÂ straight toÂ displaying theÂ fallback. And, inÂ fact, itÂ would doÂ theÂ same even ifÂ youâ€™d omit those â€œrequiredâ€ attributes atÂ all.&lt;/p&gt;
&lt;p&gt;This way, after wrapping any &lt;abbr&gt;HTML&lt;/abbr&gt; with such attributeless &lt;code&gt;&amp;lt;object&amp;gt;&lt;/code&gt; weÂ would get just aÂ wrapper element forÂ this content. But aÂ wrapper with anÂ unusual trait: any content inside ofÂ itÂ would beÂ treated byÂ browserâ€™s parser without looking atÂ theÂ objectâ€™s context. So, using this trait weÂ can, finally, nest one link into another, separating them forÂ aÂ parser.&lt;/p&gt;
&lt;p&gt;IÂ suppose that this behavior was introduced toÂ browsers because those object fallbacks were mostly used forÂ showing links like â€œYou donâ€™t have our marvelous plugin installed, download itÂ now!â€ (like, forÂ flash objects). AndÂ aÂ lot ofÂ developers could use such objects asÂ any other content orÂ &lt;span class=&quot;nobr&quot;&gt;imagesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;nesting into all theÂ other tags they had inÂ &lt;abbr&gt;HTML&lt;/abbr&gt;: links, headers, paragraphs, wherever. So, browsers needed this fallback toÂ display properly inÂ those conditions, andÂ they introduced this behavior, soÂ theÂ â€œwebmastersâ€ would beÂ safe from breaking their sites when inserting some copy-and-pasted code forÂ such external objects into their pages.&lt;/p&gt;
&lt;h2 id=&quot;browser-support&quot;&gt;Browser support&lt;/h2&gt;
&lt;p&gt;Not all ofÂ theÂ browsers had this behavior from theÂ start.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Internet Explorer began toÂ behave like this only from theÂ 9th version.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;Firefoxâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;from theÂ 4th.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;Operaâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;atÂ least from 9th (maybe even &lt;span class=&quot;nobr&quot;&gt;earlierâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;IÂ didnâ€™t dig deeper than that).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;Webkitsâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;all that IÂ checked: Safari atÂ least from 5.1, &lt;span class=&quot;nobr&quot;&gt;Chromeâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;from 14, etc.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Obviously, theÂ only browsers weâ€™d need toÂ support with such conditions are old IE, all other browsers already behave correctly inÂ all ofÂ theÂ widely supported versions.&lt;/p&gt;
&lt;h3 id=&quot;ie-fallback&quot;&gt;IE fallback&lt;/h3&gt;
&lt;p&gt;IÂ donâ€™t know ofÂ any easy solution forÂ this problem inÂ old IE. AtÂ theÂ very least you could try toÂ fix itÂ somehow byÂ â€œremovingâ€ theÂ nested links using conditional comments:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;&amp;lt;a href=&amp;quot;â€¦&amp;quot;&amp;gt;
    content of the main linkâ€¦
    &amp;lt;object&amp;gt;
        &amp;lt;!--[if gte IE 9]&amp;gt;&amp;lt;!--&amp;gt;&amp;lt;a href=&amp;quot;â€¦&amp;quot;&amp;gt;&amp;lt;!--&amp;lt;![endif]--&amp;gt;
            content of the nested linkâ€¦
        &amp;lt;!--[if gte IE 9]&amp;gt;&amp;lt;!--&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;!--&amp;lt;![endif]--&amp;gt;
    &amp;lt;/object&amp;gt;
&amp;lt;/a&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Youâ€™d lose some functionality there, but itÂ could beÂ okÂ forÂ the most cases. &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#try-expressions&quot; id=&quot;try-expressions&quot;&gt;IfÂ not&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Curious ones could think about ifÂ itÂ isÂ possible toÂ make aÂ fallback using expressions&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;, you could then insert those links later, separately, using theÂ same conditional comments, orÂ use other workarounds forÂ this problem.&lt;/p&gt;
&lt;h2 id=&quot;is-it-valid-&quot;&gt;IsÂ itÂ valid?&lt;/h2&gt;
&lt;p&gt;Nope, not even close. ItÂ isÂ not valid because weÂ donâ€™t have any ofÂ theÂ required attributes onÂ anÂ object. WeÂ could set some dummy, but &lt;a href=&quot;http://www.w3.org/TR/html5/infrastructure.html#valid-mime-type&quot;&gt;valid mime-type&lt;/a&gt;, like &lt;code&gt;type=&amp;quot;lol/wut&amp;quot;&lt;/code&gt;, andÂ the object itself would then pass theÂ validation, but asÂ soon asÂ weÂ nest theÂ link inside ofÂ it, theÂ validator would throw usÂ anÂ error.&lt;/p&gt;
&lt;p&gt;Obviously, aÂ validator isÂ aÂ tool not showing anything but theÂ formal specifications compliance. InÂ our case, theÂ usage ofÂ links inside objects isÂ entirely reasonable andÂ wonâ€™t break anything forÂ anyone ifÂ weâ€™d make things inÂ aÂ proper way.&lt;/p&gt;
&lt;p&gt;More than that, IÂ doÂ not see any reasons atÂ all why specs shouldnâ€™t drop those restrictions andÂ allow usÂ toÂ nest theÂ links. NoÂ reasons. None. There are aÂ lot ofÂ cases where this isÂ aÂ crucial requirement, andÂ right now all weÂ have are workarounds andÂ â€œhacksâ€ like this one.&lt;/p&gt;
&lt;h2 id=&quot;usage-examples&quot;&gt;Usage examples&lt;/h2&gt;
&lt;p&gt;AtÂ first, IÂ wanted toÂ describe all theÂ possible use cases forÂ the nested links, with live examples andÂ whatnot, but then IÂ remembered that such examples wonâ€™t convince anyone who isnâ€™t already convinced. Anyone who ever stumbled upon this problem would have everything they need from theÂ solution above, andÂ others would always beÂ negative about things like that, &lt;em&gt;because specs&lt;/em&gt;. Also: itÂ isÂ very tiring toÂ mark upÂ all those examples, soÂ Iâ€™ll just put them into aÂ list:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Excerpts from theÂ articles, when theÂ snippet ofÂ first few sentences could contain links which you wouldnâ€™t want toÂ strip from theÂ markup.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Sidenotes, footnotes, andÂ nested terms are all too can beÂ inside links, why not.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Any complex UI with aÂ lot ofÂ nested entities, which could happen toÂ beÂ described asÂ links. Those could beÂ tweets inÂ any ofÂ theÂ Twitterâ€™s interface, leading toÂ theÂ tweetâ€™s page, but atÂ theÂ same time containing other &lt;span class=&quot;nobr&quot;&gt;linksâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;toÂ users, hashtags, andÂ external pages. Those could beÂ mail interfaces, where theÂ snippet ofÂ aÂ message inÂ anÂ inbox that should beÂ aÂ link toÂ aÂ message itself could contain other &lt;span class=&quot;nobr&quot;&gt;linksâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;attachments, link toÂ threads, labels, etc.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;-&quot;&gt;&lt;em&gt; &lt;/em&gt; *&lt;/h2&gt;
&lt;p&gt;TheÂ one thing Iâ€™d like toÂ say inÂ theÂ end isÂ that that trick with anÂ object could beÂ applied toÂ any content that youâ€™d like toÂ use somewhere where theÂ specs forbid you to.&lt;/p&gt;
&lt;p&gt;AsÂ anÂ example, there are aÂ bunch ofÂ new tags inÂ theÂ latest specs that you already should know, like &lt;code&gt;details&lt;/code&gt; andÂ &lt;code&gt;figure&lt;/code&gt;. Guess what: byÂ specs you can use them only inÂ flow-level contexts: you canâ€™t have pictures with captions illustrating some word inside aÂ paragraph, you canâ€™t have aÂ description orÂ footnotes forÂ some words inside aÂ paragraph orÂ aÂ heading (andÂ what other than &lt;code&gt;details&lt;/code&gt; tag would fit forÂ this?), you canâ€™t have aÂ lot ofÂ cases that someone doing specs couldnâ€™t think of.&lt;/p&gt;
&lt;p&gt;TheÂ &lt;code&gt;&amp;lt;object&amp;gt;&lt;/code&gt; trick solves all those problems. TheÂ question isÂ only ifÂ such usage would beÂ feasible forÂ you. AndÂ Iâ€™d say that aÂ lot ofÂ restrictions onÂ specs are useless andÂ ability toÂ work around them, with valid arguments, isÂ priceless.&lt;/p&gt;
&lt;h2 id=&quot;update-from-2015-03-05&quot;&gt;Update from &lt;span class=&quot;nobr&quot;&gt;2015-03&lt;/span&gt;-05&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/VovanR&quot;&gt;Vladimir Rodkin&lt;/a&gt; found out that Firefoxâ€™ Flashblock plugin removes â€œbroken objectsâ€, andÂ itÂ treats attributeless &lt;code&gt;&amp;lt;object&amp;gt;&lt;/code&gt; asÂ such. Adding unknown mime-type like &lt;code&gt;type=&amp;quot;lol/wut&amp;quot;&lt;/code&gt; fixes this problem andÂ FxÂ starts toÂ show theÂ object correctly.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Battle for Baseline</title>
    <link href="http://kizu.ru/en/blog/flex-baseline/"/>
    <updated>2014-02-10T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/blog/flex-baseline</id>
    <content type="html">&lt;h1 id=&quot;battle-for-baseline&quot;&gt;Battle forÂ Baseline&lt;/h1&gt;
&lt;p&gt;&lt;img src=&quot;http://kizu.ru/en/blog/flex-baseline/flex-baseline.jpg&quot; width=&quot;756&quot; height=&quot;478&quot; alt=&quot;Kitties&quot;&gt;&lt;/p&gt;
&lt;p&gt;TheÂ best solution forÂ inline blocks were, well, inline-blocks. IÂ used toÂ like them because you could solve aÂ lot ofÂ tasks with them. But they&amp;#39;re not ideal. They&amp;#39;re not capable ofÂ doing baseline vertical aligning &lt;em&gt;right&lt;/em&gt;. AndÂ the problems come straight from theÂ &lt;a href=&quot;http://www.w3.org/TR/CSS2/visudet.html#propdef-vertical-align&quot;&gt;specs&lt;/a&gt;, just read theÂ last two paragraphs toÂ see theÂ problems:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;â€œTheÂ baseline ofÂ anÂ &lt;code&gt;inline-block&lt;/code&gt; isÂ theÂ baseline ofÂ its &lt;strong&gt;last&lt;/strong&gt; line box inÂ theÂ normal flow.â€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;â€œIf [&lt;code&gt;inline-block&lt;/code&gt;&amp;#39;s] &lt;code&gt;overflow&lt;/code&gt; property has aÂ computed value other than &lt;code&gt;visible&lt;/code&gt;, [its] baseline isÂ theÂ bottom margin edge.â€&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Those rules make only one lined, simple inline-blocks usable with &lt;code&gt;vertical-align: baseline&lt;/code&gt;, inÂ all other complex cases, weÂ would get not what weÂ would need.&lt;/p&gt;
&lt;p&gt;Here isÂ anÂ example: all three blocks have &lt;code&gt;display: inline-block&lt;/code&gt;, theÂ first one isÂ simple oneliner, but with bigger padding, second one isÂ multiline, but has smaller font-size andÂ the third one has &lt;code&gt;overflow: auto&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://kizu.ru/en/blog/flex-baseline/examples/flex-baseline1.png&quot; alt=&quot;Screenshot&quot; title=&quot;Screenshot&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;small&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/flex-baseline/#Demo_flex-baseline1&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;You &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#safari&quot; id=&quot;safari&quot;&gt;can see&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;Btw, inÂ theÂ latest Safari theÂ block with &lt;code&gt;overflow&lt;/code&gt; don&amp;#39;t behave according toÂ theÂ specs&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; where each block has its baseline inÂ this example.&lt;/p&gt;
&lt;h2 id=&quot;inline-table&quot;&gt;inline-table&lt;/h2&gt;
&lt;p&gt;Actually, there was one place inÂ &lt;abbr&gt;CSS&lt;/abbr&gt;, where theÂ baseline aligning worked &lt;em&gt;properly&lt;/em&gt;: &lt;code&gt;display: inline-table&lt;/code&gt;. IfÂ we&amp;#39;d use itÂ instead ofÂ inline-blocks inÂ our example, we&amp;#39;d get almost what weÂ tried toÂ achieve:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://kizu.ru/en/blog/flex-baseline/examples/flex-baseline2.png&quot; alt=&quot;Screenshot&quot; title=&quot;Screenshot&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;small&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/flex-baseline/#Demo_flex-baseline2&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;You can see anÂ obvious flaw: theÂ &lt;code&gt;overflow: auto&lt;/code&gt; isÂ not working. AndÂ you shouldn&amp;#39;t forget that you&amp;#39;ll need toÂ have &lt;code&gt;table-layout: fixed&lt;/code&gt;. So, &lt;code&gt;inline-table&lt;/code&gt; isÂ nice asÂ long asÂ weÂ don&amp;#39;t need &lt;code&gt;overflow&lt;/code&gt; other than &lt;code&gt;visible&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&quot;trying-flex&quot;&gt;Trying toÂ goÂ flex&lt;/h2&gt;
&lt;p&gt;So, can weÂ doÂ aÂ block both with theÂ proper baseline andÂ with some &lt;code&gt;overflow&lt;/code&gt;? ItÂ seems weÂ can, using &lt;span class=&quot;nobr&quot;&gt;flexboxesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;code&gt;display: inline-flex&lt;/code&gt;. InÂ &lt;a href=&quot;http://www.w3.org/TR/css3-flexbox/#flex-baselines&quot;&gt;theory&lt;/a&gt;, they have aÂ correct baseline position inÂ all complex cases, but what would weÂ get inÂ practice?&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://kizu.ru/en/blog/flex-baseline/examples/flex-baseline3.png&quot; alt=&quot;Screenshot&quot; title=&quot;Screenshot&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;small&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/flex-baseline/#Demo_flex-baseline3&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;IfÂ you&amp;#39;d look atÂ this example inÂ any browser other than Firefox, you&amp;#39;ll see nicely aligned blocks (yep, even inÂ IE10 andÂ Opera 12).&lt;/p&gt;
&lt;p&gt;But inÂ FxÂ theÂ block with &lt;code&gt;overflow: auto&lt;/code&gt;, suddenly, behaves just like theÂ inline-&lt;span class=&quot;nobr&quot;&gt;blocksâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;itÂ loses theÂ baseline. SoÂ sad, this way we&amp;#39;ll need toÂ wait forÂ this &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=969874&quot;&gt;newly reported bug&lt;/a&gt; toÂ beÂ fixed.&lt;/p&gt;
&lt;h2 id=&quot;another-way&quot;&gt;IsÂ there another way?&lt;/h2&gt;
&lt;p&gt;ItÂ isÂ nice weÂ could align &lt;code&gt;inline-flex&lt;/code&gt; blocks with theÂ baselines ofÂ other blocks, ifÂ only there wasn&amp;#39;t this FxÂ bugâ€¦ But what ifÂ we&amp;#39;d goÂ andÂ try toÂ align not different &lt;code&gt;inline-flex&lt;/code&gt; blocks, but their children?&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://kizu.ru/en/blog/flex-baseline/examples/flex-baseline4.png&quot; alt=&quot;Screenshot&quot; title=&quot;Screenshot&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;small&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/flex-baseline/#Demo_flex-baseline4&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;Oh, itÂ works. Butâ€¦ While multiple &lt;code&gt;inline-flex&lt;/code&gt; blocks could wrap onÂ overflow, forÂ elements inside flexbox weÂ would need toÂ use &lt;code&gt;flex-wrap&lt;/code&gt; toÂ wrap them. AndÂ guess what? Firefox didn&amp;#39;t support this property until 28.0.&lt;/p&gt;
&lt;h2 id=&quot;combined&quot;&gt;All together&lt;/h2&gt;
&lt;p&gt;But hey! IfÂ &lt;code&gt;inline-flex&lt;/code&gt; isÂ properly aligned alongside other blocks andÂ the nested block with &lt;code&gt;overflow: auto&lt;/code&gt; also has aÂ proper baseline, then what ifÂ we&amp;#39;d combine those two? WeÂ would add another wrapper inside each element, then move all theÂ paddings andÂ overflow toÂ them:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://kizu.ru/en/blog/flex-baseline/examples/flex-baseline5.png&quot; alt=&quot;Screenshot&quot; title=&quot;Screenshot&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;small&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/flex-baseline/#Demo_flex-baseline5&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;InÂ most browsers you won&amp;#39;t see any changes, but when we&amp;#39;ll look atÂ Fx, weÂ would see that theÂ blocks now won&amp;#39;t have baseline atÂ their bottom margin edge. But they won&amp;#39;t have itÂ atÂ theÂ proper place &lt;span class=&quot;nobr&quot;&gt;eitherâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;they&amp;#39;re shifted from theÂ baseline ofÂ other blocks aÂ little. Let&amp;#39;s measure &lt;span class=&quot;nobr&quot;&gt;itâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;10 pixels. Hey, itÂ isÂ our padding! ByÂ removing paddings from each side weÂ found that theÂ problem isÂ atÂ theÂ top &lt;span class=&quot;nobr&quot;&gt;paddingâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;when weÂ remove itÂ everything works great. So, ifÂ theÂ bug isÂ inÂ theÂ padding (&lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=969880&quot;&gt;andÂ IÂ reported itÂ too&lt;/a&gt;), how could weÂ work around it? Let&amp;#39;s remove itÂ andÂ replace with aÂ pseudo-element:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://kizu.ru/en/blog/flex-baseline/examples/flex-baseline6.png&quot; alt=&quot;Screenshot&quot; title=&quot;Screenshot&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;small&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/flex-baseline/#Demo_flex-baseline6&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;Perfect!&lt;/p&gt;
&lt;h2 id=&quot;finishing-strokes&quot;&gt;Finishing strokes&lt;/h2&gt;
&lt;p&gt;Well, not perfect. There are two small issues that can appear inÂ IE 10 andÂ Opera 12.&lt;/p&gt;
&lt;p&gt;InÂ IE flexbox with theÂ set width wouldn&amp;#39;t have wrapped text inside ofÂ it. That&amp;#39;s aÂ rather strange bug, but weÂ could work around itÂ byÂ adding &lt;code&gt;width: 100%&lt;/code&gt; orÂ &lt;code&gt;-ms-flex-negative: 1&lt;/code&gt; toÂ theÂ inner element, theÂ latter isÂ better.&lt;/p&gt;
&lt;p&gt;Opera has aÂ similar &lt;span class=&quot;nobr&quot;&gt;bugâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;theÂ element inside aÂ flexbox would have theÂ width set toÂ content. TheÂ only fix IÂ found isÂ adding &lt;code&gt;flex-direction: column&lt;/code&gt; toÂ flexbox. AsÂ there would beÂ only one element inside our wrapper, itÂ won&amp;#39;t affect anything else.&lt;/p&gt;
&lt;p&gt;There, &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#without-fallbacks&quot; id=&quot;without-fallbacks&quot;&gt;now it&amp;#39;s perfect&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;NoÂ fallbacks forÂ older browsers though, but this slightly falls out ofÂ this post&amp;#39;s scope&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;, there isÂ theÂ last example with different variants ofÂ blocks andÂ with theÂ wrapping blocks:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://kizu.ru/en/blog/flex-baseline/examples/flex-baseline7.png&quot; alt=&quot;Screenshot&quot; title=&quot;Screenshot&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;small&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/blog/flex-baseline/#Demo_flex-baseline7&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;TheÂ resulting code forÂ this example would be:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.flex {
    display: -ms-inline-flexbox;
    display: -webkit-inline-flex;
    display: inline-flex;

    /* Fixing Opera issue */
    flex-direction: column;

    vertical-align: baseline;
    }

.flex-content {
    padding: 0 10px 10px;
    border: 1px solid lime;

    /* Fixing IE issue */
    -ms-flex-negative: 1;
    }

/* Fixing Fx issue */
.flex-content:before {
    content: &amp;quot;&amp;quot;;
    display: block;
    padding-top: 10px;
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;resume&quot;&gt;Overall&lt;/h2&gt;
&lt;p&gt;Ah, Firefox! Without its bugs (andÂ IE&amp;#39;s one) weÂ could use only one element per block. Also, ifÂ you&amp;#39;ll need just multiline inline blocks, andÂ you&amp;#39;re not afraid ofÂ tables, you could use &lt;code&gt;display: inline-table&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;But, overall, weÂ won. WeÂ can now use baseline vertical aligning forÂ blocks ofÂ any complexity, hooray! But ifÂ you&amp;#39;d want toÂ write even better code inÂ theÂ future, I&amp;#39;d recommend you toÂ goÂ andÂ vote forÂ the &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=969874&quot;&gt;corresponding&lt;/a&gt; &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=969880&quot;&gt;bugs&lt;/a&gt; inÂ Bugzilla.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>New Stylus Features</title>
    <link href="http://kizu.ru/en/issues/new-stylus-features/"/>
    <updated>2013-12-05T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/issues/new-stylus-features</id>
    <content type="html">&lt;h1 id=&quot;new-stylus-features&quot;&gt;New Stylus Features&lt;/h1&gt;
&lt;p&gt;Not soÂ long ago IÂ &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#maintaining&quot; id=&quot;maintaining&quot;&gt;became aÂ maintainer&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;I&amp;#39;ll write someday later how this happened andÂ what exactly IÂ doÂ there, but itÂ worth toÂ mention that I&amp;#39;m &lt;em&gt;aÂ maintainer&lt;/em&gt;, but theÂ main &lt;em&gt;developer&lt;/em&gt; now isÂ myÂ colleague &lt;a href=&quot;gh:panya&quot;&gt;Mikhail Korepanov&lt;/a&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; forÂ &lt;a href=&quot;https://github.com/LearnBoost/stylus&quot;&gt;Stylus&lt;/a&gt; &lt;abbr&gt;CSS&lt;/abbr&gt; preprocessor. AtÂ theÂ end ofÂ theÂ last week, weÂ released aÂ new &lt;span class=&quot;nobr&quot;&gt;versionâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;a href=&quot;https://github.com/LearnBoost/stylus/blob/master/History.md#0410--2013-11-30&quot;&gt;0.41.0&lt;/a&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;where weÂ added some new features. AndÂ inÂ theÂ two earlier releases weÂ added support forÂ the hashes andÂ polished it, soÂ after all this work itÂ isÂ now possible toÂ doÂ aÂ lot ofÂ interesting new things. InÂ this article, I&amp;#39;ll explain one &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#example-sidenote&quot; id=&quot;example-sidenote&quot;&gt;new tech&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;You can goÂ straight toÂ &lt;a href=&quot;#example&quot;&gt;its &lt;span class=&quot;nobr&quot;&gt;step-by&lt;/span&gt;-step explanation&lt;/a&gt;, orÂ toÂ theÂ &lt;a href=&quot;#result&quot;&gt;resulting code&lt;/a&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; that isÂ now possible inÂ theÂ new Stylus, but I&amp;#39;ll describe theÂ new features forÂ aÂ start.&lt;/p&gt;
&lt;h2 id=&quot;block-mixins&quot;&gt;Block mixins&lt;/h2&gt;
&lt;p&gt;Finally! TheÂ thing that was missing from Stylus forÂ soÂ &lt;span class=&quot;nobr&quot;&gt;longâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;theÂ ability toÂ pass blocks ofÂ Stylus code into mixins andÂ then use those blocks inside theÂ mixins&amp;#39; bodies.&lt;/p&gt;
&lt;p&gt;TheÂ syntax forÂ passing theÂ block isÂ rather simple: weÂ call aÂ mixin using aÂ &lt;code&gt;+&lt;/code&gt; prefix, then weÂ pass theÂ block either inÂ theÂ curly braces, orÂ using aÂ new indent level (asÂ you could doÂ with aÂ lot ofÂ things inÂ Stylus):&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;+foo()
  // The block we want to pass
  width: 10px
  height: 10px
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;After weÂ passed theÂ block toÂ theÂ mixin, this block becomes available inside ofÂ itÂ asÂ aÂ named &lt;span class=&quot;nobr&quot;&gt;argumentâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;code&gt;block&lt;/code&gt;. You can then use itÂ anywhere inside theÂ mixin using &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#block-call&quot; id=&quot;block-call&quot;&gt;anÂ interpolation&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;There isÂ aÂ possibility weÂ would add aÂ way ofÂ using itÂ without interpolation inÂ theÂ future though&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;foo()
  width: 20px
  .foo
    {block}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;OrÂ weÂ could pass this asÂ aÂ variable toÂ theÂ next mixin, orÂ use itÂ inÂ any other way.&lt;/p&gt;
&lt;p&gt;Anyway, ifÂ you&amp;#39;ve called aÂ mixin above like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;.bar
  +foo()
    padding: 0
    .baz
      height: 20px
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You would get this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.bar {
  width: 20px;
}
.bar .foo {
  padding: 0;
}
.bar .foo .baz {
  height: 20px;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;With block mixins, weÂ have aÂ way ofÂ wrapping blocks with mixins andÂ then wrapping them with anything. This feature isÂ often used forÂ handling media queries, andÂ myÂ example that you&amp;#39;ll see later inÂ this article isÂ also from theÂ &lt;abbr&gt;RWD&lt;/abbr&gt; area.&lt;/p&gt;
&lt;h2 id=&quot;hashes&quot;&gt;Hashes&lt;/h2&gt;
&lt;p&gt;AsÂ IÂ already mentioned, inÂ theÂ latest releases ofÂ Stylus weÂ added (andÂ polished toÂ aÂ usable state) hashes asÂ aÂ data type. Hashes are objects with key-value pairs, andÂ they look rather simple:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-javascript&quot;&gt;foo = {
  bar: 10px,
  raz: #fff,
  baz: {
    blah: blah
    &amp;#39;10%&amp;#39;: yeah
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;AsÂ you can see from this example, theÂ syntax isÂ similar toÂ theÂ objects inÂ JavaScript: theÂ key could beÂ either anÂ indent orÂ aÂ string, andÂ anything could goÂ into value, even nested hashes. AnÂ important part: while you can use ordinary blocks with orÂ without curly braces inÂ Stylus, they are mandatory forÂ hashes, while theÂ trailing commas &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#codestyle&quot; id=&quot;codestyle&quot;&gt;are not&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;AndÂ asÂ with all other optional syntax features ofÂ Stylus, you should use aÂ consistent code style inÂ your stylesheets. Otherwise your code would beÂ messy asÂ hell&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Then, after you defined aÂ hash, you could add new properties toÂ itÂ orÂ redefine old ones using dots orÂ square brackets:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;foo.bar = 20px
foo[&amp;#39;whatever&amp;#39;] = &amp;#39;hello&amp;#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;TheÂ differences are simple: while you could use only idents with theÂ dot syntax, with square brackets you could pass any string containing any symbols, orÂ use aÂ variable instead. So, theÂ brackets are more flexible, while theÂ dot isÂ not.&lt;/p&gt;
&lt;p&gt;You can get theÂ values from theÂ hash inÂ theÂ same &lt;span class=&quot;nobr&quot;&gt;wayâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;either byÂ using aÂ dot orÂ using theÂ square brackets.&lt;/p&gt;
&lt;p&gt;IÂ won&amp;#39;t describe &lt;a href=&quot;http://learnboost.github.io/stylus/docs/hashes.html&quot;&gt;all theÂ features&lt;/a&gt; ofÂ theÂ hashes, I&amp;#39;ll just mention that you can use theÂ &lt;span class=&quot;nobr&quot;&gt;built-in&lt;/span&gt; &lt;code&gt;length()&lt;/code&gt; function with them, you can iterate through them, use them inÂ conditions (&lt;code&gt;if baz in foo&lt;/code&gt;), andÂ there are also some &lt;span class=&quot;nobr&quot;&gt;built-in&lt;/span&gt; functions toÂ work with hashes (&lt;code&gt;keys()&lt;/code&gt;, &lt;code&gt;values()&lt;/code&gt;, &lt;code&gt;merge()&lt;/code&gt;). AndÂ you can interpolate hashes into &lt;abbr&gt;CSS&lt;/abbr&gt;.&lt;/p&gt;
&lt;h2 id=&quot;selector&quot;&gt;&lt;code&gt;selector()&lt;/code&gt; function&lt;/h2&gt;
&lt;p&gt;There isÂ now one small but important feature inÂ &lt;span class=&quot;nobr&quot;&gt;Stylusâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;code&gt;selector()&lt;/code&gt;. While you can construct complex selectors inÂ Stylus byÂ using nested blocks, interpolations, mixins andÂ other things, you couldn&amp;#39;t &lt;strong&gt;get&lt;/strong&gt; theÂ compiled selector, they only existed inÂ theÂ compiled &lt;abbr&gt;CSS&lt;/abbr&gt;.&lt;/p&gt;
&lt;p&gt;But now, using &lt;code&gt;selector()&lt;/code&gt; function that returns theÂ currently compiled selector, you could doÂ aÂ lot ofÂ useful things, like check theÂ selector forÂ something using theÂ &lt;code&gt;match()&lt;/code&gt; function, orÂ use itÂ forÂ something else. ItÂ isÂ already very useful, andÂ itÂ would become even more soÂ inÂ future releases.&lt;/p&gt;
&lt;p&gt;AsÂ anÂ example, you can take this small chunk ofÂ code:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;if match(&amp;#39;:(before|after)&amp;#39;, selector())
  content: &amp;#39;&amp;#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Here weÂ check ifÂ theÂ selector has any pseudo-elements inÂ itÂ andÂ ifÂ &lt;span class=&quot;nobr&quot;&gt;soâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;weÂ apply theÂ &lt;code&gt;content&lt;/code&gt;. This could beÂ useful ifÂ weÂ have some mixin, containing styles that could beÂ applied both toÂ aÂ normal element andÂ toÂ aÂ pseudo one.&lt;/p&gt;
&lt;h2 id=&quot;example&quot;&gt;Example with cached media queries&lt;/h2&gt;
&lt;p&gt;AsÂ aÂ usage example ofÂ theÂ new Stylus features, I&amp;#39;ll give you aÂ solution forÂ one ofÂ those small, responsive web design problems: theÂ code you need toÂ write forÂ different viewport breakpoints. TheÂ problem isÂ that theÂ syntax ofÂ media queries could beÂ rather long, soÂ you could either use bubbling media queries which would result inÂ not ideal &lt;abbr&gt;CSS&lt;/abbr&gt;, or, inÂ theÂ race forÂ bytes, you&amp;#39;ll need toÂ write all theÂ overrides inÂ one place, andÂ that won&amp;#39;t beÂ very comfortable inÂ aÂ lot ofÂ situations.&lt;/p&gt;
&lt;p&gt;However, inÂ theÂ new Stylus, with block mixins, hashes andÂ the &lt;code&gt;selector()&lt;/code&gt; function, you could work around this problem (andÂ solve some others onÂ your way toÂ it).&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;Brieflyâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;weÂ can create aÂ mixin that could beÂ used instead ofÂ media queries andÂ would cache theÂ given blocks, combining them byÂ conditions, soÂ you could then output all ofÂ them using theÂ second function.&lt;/p&gt;
&lt;p&gt;TheÂ only downside ofÂ this method isÂ theÂ grouping &lt;span class=&quot;nobr&quot;&gt;itselfâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;theÂ selectors would beÂ inÂ aÂ different order, soÂ theÂ specificity ofÂ theÂ selectors could change.&lt;/p&gt;
&lt;p&gt;ForÂ the start weÂ need anÂ object where weÂ would store theÂ cached blocks:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;$media_cache = {}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then weÂ would need aÂ mixin which weÂ could use instead ofÂ media queries; its basic form would beÂ this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;media($condition)
  unless $media_cache[$condition]
    $media_cache[$condition] = ()
  push($media_cache[$condition], block)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This mixin&amp;#39;s logic isÂ rather simple: ifÂ weÂ don&amp;#39;t have aÂ list ofÂ theÂ blocks forÂ aÂ given condition, weÂ initialize itÂ then weÂ pass theÂ block toÂ this list.&lt;/p&gt;
&lt;p&gt;ItÂ won&amp;#39;t beÂ enough forÂ usÂ actually: this mixin could beÂ used only this way:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;+media(&amp;#39;(max-width:640px)&amp;#39;)
  .foo
    display: block;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;WeÂ could only pass full blocks toÂ it, but couldn&amp;#39;t use theÂ bubbling:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;.foo
  +media(&amp;#39;(max-width:640px)&amp;#39;)
    display: block;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;TheÂ code ofÂ our &lt;code&gt;media&lt;/code&gt; mixin doesn&amp;#39;t know anything about theÂ context, theÂ selector where weÂ called &lt;span class=&quot;nobr&quot;&gt;itâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;yet. Here theÂ new &lt;code&gt;selector()&lt;/code&gt; function andÂ anÂ extra helper mixin are required, andÂ with them &lt;code&gt;media&lt;/code&gt; mixin would look like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;media($condition)
  helper($condition)
    unless $media_cache[$condition]
      $media_cache[$condition] = ()
    push($media_cache[$condition], block)

  +helper($condition)
    {selector()}
      {block}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ToÂ save theÂ context weÂ move theÂ initial code ofÂ this mixin inside aÂ helper mixin, then call itÂ passing theÂ &lt;code&gt;block&lt;/code&gt; inside theÂ interpolated&lt;code&gt;selector()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;So, asÂ weÂ now wrap theÂ code with aÂ mixin, itÂ won&amp;#39;t build automatically. WeÂ would need toÂ call aÂ function that would take aÂ cache andÂ put all itÂ contains where weÂ call itÂ (andÂ itÂ would beÂ logical toÂ call itÂ atÂ theÂ end ofÂ our stylesheet):&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;apply_media_cache()
  for $media, $blocks in $media_cache
    @media $media
      for $block in $blocks
        {$block}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ItÂ isÂ rather easy: weÂ iterate through theÂ cache, taking theÂ &lt;span class=&quot;nobr&quot;&gt;conditionâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;code&gt;$media&lt;/code&gt;, andÂ the list ofÂ all theÂ blocks that were called with &lt;span class=&quot;nobr&quot;&gt;itâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;code&gt;$blocks&lt;/code&gt;, then weÂ create theÂ media query with that condition andÂ inside ofÂ itÂ iterate through all theÂ blocks, yielding all ofÂ them one byÂ one.&lt;/p&gt;
&lt;p&gt;So, ifÂ weÂ would then call this function atÂ theÂ end ofÂ theÂ document:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;apply_media_cache()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;WeÂ would get what weÂ want.&lt;/p&gt;
&lt;p&gt;However, there are aÂ few things toÂ improve inÂ this function: weÂ doÂ not want always toÂ write theÂ parentheses, and, actually, weÂ won&amp;#39;t want toÂ write all those &lt;code&gt;only screen and&lt;/code&gt;. Also, weÂ would want toÂ use some keywords instead ofÂ theÂ literal conditions, like &lt;span class=&quot;Sidenote-Wrapper&quot;&gt;&lt;a class=&quot;Sidenote-Context&quot; href=&quot;#keywords&quot; id=&quot;keywords&quot;&gt;&lt;code&gt;palm&lt;/code&gt;, &lt;code&gt;portable&lt;/code&gt;, &lt;code&gt;desk&lt;/code&gt;&lt;/a&gt;&lt;span class=&quot;Sidenote&quot; role=&quot;note&quot;&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt; (&lt;/span&gt;I&amp;#39;ve taken theÂ names from theÂ great &lt;a href=&quot;http://inuitcss.com/&quot;&gt;inuit.css&lt;/a&gt; framework byÂ &lt;a href=&quot;@csswizardry&quot;&gt;Harry Roberts&lt;/a&gt;&lt;span class=&quot;Sidenote-Misc&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;a class=&quot;Sidenote-Close&quot; href=&quot;#x&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;/a&gt;&lt;/span&gt; andÂ soÂ on. With those improvements andÂ all theÂ previous steps theÂ resulting code would beÂ this:&lt;/p&gt;
&lt;h3 id=&quot;result&quot;&gt;Resulting code&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;// Define the cache and the aliases
$media_cache = {}
$media_aliases = {
  palm:       &amp;#39;(max-width: 480px)&amp;#39;
  lap:        &amp;#39;(min-width: 481px) and (max-width: 1023px)&amp;#39;
  lap-and-up: &amp;#39;(min-width: 481px)&amp;#39;
  portable:   &amp;#39;(max-width: 1023px)&amp;#39;
  desk:       &amp;#39;(min-width: 1024px)&amp;#39;
  desk-wide:  &amp;#39;(min-width: 1200px)&amp;#39;
}

// Mixin for caching the blocks with the given conditions
media($condition)
  helper($condition)
    unless $media_cache[$condition]
      $media_cache[$condition] = ()
    push($media_cache[$condition], block)

  +helper($condition)
    {selector() + &amp;#39;&amp;#39;}
      {block}

// Function we would use to call all the cached styles
apply_media_cache()
  for $media, $blocks in $media_cache
    $media = unquote($media_aliases[$media] || $media)
    $media = &amp;#39;(%s)&amp;#39; % $media unless match(&amp;#39;\(&amp;#39;, $media)
    $media = &amp;#39;only screen and %s&amp;#39; % $media
    @media $media
      for $block in $blocks
        {$block}

// Here would be our main styles, using the `media` mixin
// â€¦

// Here we call all the cached styles
apply_media_cache()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then weÂ could write our stylesheets like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-styl&quot;&gt;.foo
  width: 10px

  +media(&amp;#39;lap&amp;#39;)
    width: 20px

  +media(&amp;#39;desk&amp;#39;)
    width: 30px

  +media(&amp;#39;min-width: 200px&amp;#39;)
    width: 60px

.bar
  height: 10px

  +media(&amp;#39;lap&amp;#39;)
    height: 20px

  +media(&amp;#39;desk&amp;#39;)
    height: 30px

  +media(&amp;#39;min-width: 200px&amp;#39;)
    height: 50px

  +media(&amp;#39;(min-width: 500px) and (max-width: 700px)&amp;#39;)
    height: 50px
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;AndÂ get this result afterwards:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt;.foo {
  width: 10px;
}
.bar {
  height: 10px;
}
@media only screen and (min-width: 481px) and (max-width: 1023px) {
  .foo {
    width: 20px;
  }
  .bar {
    height: 20px;
  }
}
@media only screen and (min-width: 1024px) {
  .foo {
    width: 30px;
  }
  .bar {
    height: 30px;
  }
}
@media only screen and (min-width: 200px) {
  .foo {
    width: 60px;
  }
  .bar {
    height: 50px;
  }
}
@media only screen and (min-width: 500px) and (max-width: 700px) {
  .bar {
    height: 50px;
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;InÂ theÂ resulting code, weÂ can see that weÂ added theÂ hash with aliases, weÂ can also call theÂ mixin with conditions lacking parentheses.&lt;/p&gt;
&lt;p&gt;ByÂ using this code weÂ can now use media queries bubbling anywhere weÂ want andÂ don&amp;#39;t even need toÂ think about theÂ extra &lt;span class=&quot;nobr&quot;&gt;bytesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;everything would beÂ nicely grouped inside non-doubling media queries. All thanks toÂ theÂ new Stylus features.&lt;/p&gt;
&lt;p&gt;OfÂ course, this code isÂ not ideal, andÂ there could beÂ aÂ lot ofÂ ways toÂ improve it, but myÂ goal was toÂ demonstrate theÂ new features andÂ how they work, after all.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Updated Jekyll</title>
    <link href="http://kizu.ru/en/blog/updated-jekyll/"/>
    <updated>2013-06-05T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/blog/updated-jekyll</id>
    <content type="html">&lt;h1 id=&quot;updated-jekyll&quot;&gt;Updated Jekyll&lt;/h1&gt;
&lt;p&gt;Not that long ago Jekyll become that &lt;span class=&quot;nobr&quot;&gt;bigâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;version â€œ1.0â€ &lt;a href=&quot;https://github.com/blog/1502-jekyll-turns-1-0&quot;&gt;was released&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;There are aÂ lot ofÂ stuff inÂ &lt;a href=&quot;https://github.com/mojombo/jekyll/blob/master/History.markdown#100â€”2013-05-06&quot;&gt;theÂ changelog&lt;/a&gt;: there are new features, there are aÂ lot ofÂ fixes. You can read what&amp;#39;s theÂ most important &lt;a href=&quot;http://jekyllrb.com/docs/upgrading/&quot;&gt;inÂ this article&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;IÂ moved myÂ site toÂ this version. Well, not actually &lt;em&gt;moved&lt;/em&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;everything worked anyway, but there were some stuff inÂ aÂ new version that IÂ could use toÂ make things inÂ aÂ better way. So, I&amp;#39;ll write aÂ bit onÂ what IÂ personally liked inÂ this new version.&lt;/p&gt;
&lt;h2 id=&quot;page-path&quot;&gt;&lt;code&gt;page.path&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;It&amp;#39;s one ofÂ those things IÂ wanted theÂ Jekyll toÂ &lt;span class=&quot;nobr&quot;&gt;haveâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;IÂ even &lt;a href=&quot;https://github.com/mojombo/jekyll/issues/633#issuecomment-11678912&quot;&gt;pinged developers aÂ bit&lt;/a&gt; inÂ aÂ corresponding issue atÂ GitHub.&lt;/p&gt;
&lt;p&gt;Old version ofÂ Jekyll had one flaw: there were noÂ ways toÂ retrieve theÂ path ofÂ theÂ source files forÂ pages orÂ blog posts. Why isÂ this important? TheÂ blog orÂ aÂ site that&amp;#39;s hosted atÂ GitHub would profit aÂ lot from giving aÂ way forÂ its users toÂ edit theÂ content. ToÂ make itÂ really easy itÂ would beÂ handy toÂ provide aÂ link that would goÂ either straight toÂ theÂ GitHub&amp;#39;s edit file page, orÂ atÂ any other service that provides such possibility, like prose.io (which IÂ use). This link would need toÂ have theÂ url toÂ theÂ source encoded inÂ it; without proper method toÂ doÂ itÂ there were only theÂ dirtiest hacks available toÂ implement this behavior.&lt;/p&gt;
&lt;p&gt;AndÂ now itÂ became really &lt;span class=&quot;nobr&quot;&gt;simpleâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;theÂ data ofÂ theÂ posts andÂ pages now contains theÂ &lt;code&gt;path&lt;/code&gt; variable, which contains theÂ path toÂ theÂ source ofÂ theÂ page. Hooray!&lt;/p&gt;
&lt;h2 id=&quot;absolute-permalinks&quot;&gt;Absolute permalinks&lt;/h2&gt;
&lt;p&gt;Permalinks set inÂ &lt;abbr&gt;YAML&lt;/abbr&gt; front matter were relative before. Even more, you couldn&amp;#39;t set them toÂ point atÂ theÂ upper levels, like using &lt;code&gt;../&lt;/code&gt; (orÂ IÂ couldn&amp;#39;t find how toÂ make itÂ work). But inÂ aÂ new Jekyll you could use absolute permalinks. Actually, right now, inÂ 1.0, you need toÂ enable them inÂ theÂ config using &lt;code&gt;relative_permalinks:false&lt;/code&gt;, but with 1.1 this would beÂ theÂ default behavior. So, ifÂ you&amp;#39;re using relative permalinks now andÂ don&amp;#39;t want them toÂ become absolute atÂ one moment, you&amp;#39;ll need toÂ either change them toÂ absolute ones, orÂ just set theÂ &lt;code&gt;relative_permalinks:true&lt;/code&gt;, soÂ nothing would goÂ wrong when 1.1 would beÂ there.&lt;/p&gt;
&lt;p&gt;Absolute permalinks made aÂ lot ofÂ things easier forÂ &lt;span class=&quot;nobr&quot;&gt;meâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;IÂ could move all index pages forÂ categories etc. toÂ aÂ single folder, forÂ example.&lt;/p&gt;
&lt;h2 id=&quot;changed-syntax-in-cli&quot;&gt;Changed syntax inÂ &lt;abbr&gt;CLI&lt;/abbr&gt;&lt;/h2&gt;
&lt;p&gt;New Jekyll comes with changed syntax inÂ &lt;abbr&gt;CLI&lt;/abbr&gt;, andÂ one ofÂ theÂ most interesting features isÂ anÂ ability toÂ use additional configs.&lt;/p&gt;
&lt;p&gt;IfÂ you&amp;#39;d like toÂ run Jekyll with both theÂ default config &lt;code&gt;_config.yml&lt;/code&gt; andÂ anÂ extra one, like &lt;code&gt;_config-dev.yml&lt;/code&gt;, you could run Jekyll this way:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;jekyll serve --config _config.yml,_config-dev.yml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Using this you could easily set upÂ theÂ dev environment, where you could change theÂ absolute urls toÂ beÂ localhost, turn onÂ theÂ display ofÂ theÂ drafts andÂ doÂ anything extra that won&amp;#39;t show upÂ inÂ theÂ production.&lt;/p&gt;
&lt;h2 id=&quot;drafts&quot;&gt;Drafts&lt;/h2&gt;
&lt;p&gt;InÂ new Jekyll you could create proper drafts. IfÂ you&amp;#39;d create aÂ &lt;code&gt;_drafts&lt;/code&gt; folder, its content won&amp;#39;t render byÂ default, but ifÂ you&amp;#39;d run your local copy with &lt;code&gt;--drafts&lt;/code&gt; key inÂ &lt;abbr&gt;CLI&lt;/abbr&gt;, theÂ content ofÂ theÂ drafts would beÂ rendered like ifÂ itÂ had been placed inÂ theÂ &lt;code&gt;_posts&lt;/code&gt; directory. One useful thing here isÂ that you won&amp;#39;t need toÂ set theÂ date inÂ theÂ posts&amp;#39; filename, andÂ when you&amp;#39;d need toÂ publish theÂ draft you&amp;#39;ll just need move theÂ post from theÂ &lt;code&gt;_drafts&lt;/code&gt; toÂ theÂ &lt;code&gt;_posts&lt;/code&gt; andÂ add theÂ date toÂ its filename.&lt;/p&gt;
&lt;p&gt;While I&amp;#39;m not using such drafts right now, it&amp;#39;s looking like aÂ nice feature, soÂ I&amp;#39;ll think ifÂ itÂ could beÂ used forÂ myÂ site.&lt;/p&gt;
&lt;h2 id=&quot;other-stuff&quot;&gt;Other stuff&lt;/h2&gt;
&lt;p&gt;There are aÂ lot ofÂ other things mentioned inÂ &lt;a href=&quot;https://github.com/mojombo/jekyll/blob/master/History.markdown#minor-enhancements-3&quot;&gt;theÂ changelog&lt;/a&gt;, but all that matters forÂ meÂ IÂ mentioned inÂ this post.&lt;/p&gt;
&lt;p&gt;Overall, I&amp;#39;m happy toÂ use Jekyll 1.0 now andÂ recommend itÂ toÂ &lt;span class=&quot;nobr&quot;&gt;anyoneâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;itÂ become aÂ bit easier toÂ use with all theÂ new stuff.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Application shortcuts</title>
    <link href="http://kizu.ru/en/blog/application-shortcuts/"/>
    <updated>2013-06-03T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/blog/application-shortcuts</id>
    <content type="html">&lt;h1 id=&quot;application-shortcuts&quot;&gt;Application shortcuts&lt;/h1&gt;
&lt;p&gt;Here isÂ one workflow thing IÂ use all theÂ time andÂ IÂ want toÂ &lt;span class=&quot;nobr&quot;&gt;shareâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;using keyboard shortcuts toÂ switch between applications.&lt;/p&gt;
&lt;p&gt;Iâ€™m talking not about those system &lt;span class=&quot;nobr&quot;&gt;shortcutsâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;code&gt;cmd+tab&lt;/code&gt;/&lt;code&gt;alt+tab&lt;/code&gt;. They are &lt;span class=&quot;nobr&quot;&gt;awfulâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;because they are modal. You canâ€™t tell atÂ any given time what would beÂ theÂ result ofÂ using such shortcut: those shortcuts switch focus between theÂ recent used apps, soÂ you need toÂ remember which applications you used andÂ inÂ which order. Which could beÂ rather frustrating when you use more than two applications.&lt;/p&gt;
&lt;p&gt;TheÂ solution isÂ rather easy (myÂ colleague Vitaly Harisov shown meÂ itÂ atÂ december 2009): you just need toÂ set aÂ shortcut toÂ any often-used application.&lt;/p&gt;
&lt;p&gt;InÂ 2009 IÂ used Spaces inÂ Mac OS forÂ &lt;span class=&quot;nobr&quot;&gt;thisâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;you could make aÂ lot ofÂ spaces, each with just one app, andÂ then set upÂ theÂ shortcut forÂ each ofÂ those spaces. WeÂ used shortcuts like &lt;code&gt;option+A&lt;/code&gt;, &lt;code&gt;option+S&lt;/code&gt;, &lt;code&gt;option+D&lt;/code&gt; etc.&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;those keys are always under your fingers, andÂ the symbols youâ€™d get byÂ those native shortcuts are not that useful anyway, soÂ weÂ could live without them.&lt;/p&gt;
&lt;p&gt;Vitaly offered meÂ this layout: inÂ theÂ centre raw ofÂ letters there were shortcuts forÂ browsers, soÂ you could switch between often toÂ check your markup (something had changed there since 2009, but theÂ main idea isÂ clear):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;option+A&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;Opera, that was our main browser, soÂ letter &lt;strong&gt;A&lt;/strong&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;option+S&lt;/code&gt; â€”&lt;strong&gt;S&lt;/strong&gt;afari;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;option+D&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;IE, &lt;code&gt;D&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&amp;#39;cause itÂ was &lt;strong&gt;D&lt;/strong&gt;umb;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;option+F&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;strong&gt;F&lt;/strong&gt;irefox.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Other apps were somewhere near:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;option+Q&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;Terminal, &lt;code&gt;Q&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;rather close toÂ other shortcuts;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;option+W&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;Finder, forÂ the same reason;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;option+E&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;TheÂ main code &lt;strong&gt;E&lt;/strong&gt;ditor.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;IÂ also added shortcuts using &lt;code&gt;shift&lt;/code&gt;, soÂ &lt;code&gt;option+shift+E&lt;/code&gt; went forÂ the secondary code editor, &lt;code&gt;option+shift+A&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;forÂ the Opera Next etc.&lt;/p&gt;
&lt;p&gt;Right now IÂ have shortcuts forÂ messenger, mail, image editor, iA Writer andÂ aÂ lot ofÂ other stuff IÂ use.&lt;/p&gt;
&lt;p&gt;With one Mac OS version Spaces become worse toÂ use with shortcuts andÂ atÂ theÂ same time IÂ bought great &lt;a href=&quot;http://www.alfredapp.com&quot;&gt;Alfred Powerpack&lt;/a&gt;, which had aÂ very handy way toÂ set any apps orÂ files toÂ keyboard shortcuts. With Alfred theÂ setup ofÂ such shortcuts become soÂ much easier, IÂ got theÂ sync forÂ those settings across myÂ two MacBooks using Dropbox, andÂ the switch between apps become even faster than with Spaces (even after disabling theÂ space switching animation). AsÂ IÂ know, there are aÂ bunch ofÂ similar apps forÂ Mac like &lt;a href=&quot;http://qsapp.com/&quot;&gt;QuickSilver&lt;/a&gt; orÂ &lt;a href=&quot;http://www.boastr.de&quot;&gt;BetterTouchTool&lt;/a&gt;, that can doÂ theÂ same trick. IÂ think there should beÂ apps forÂ other OS like this, soÂ ifÂ there &lt;span class=&quot;nobr&quot;&gt;areâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;write meÂ andÂ Iâ€™ll add them here.&lt;/p&gt;
&lt;p&gt;Anyway, you really should try &lt;span class=&quot;nobr&quot;&gt;themâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;your workflow would beÂ soÂ much faster andÂ seamless with them:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;When youâ€™ll need toÂ switch toÂ any app, you&amp;#39;ll just press its keys. You donâ€™t need toÂ remember which app you used before, ifÂ itÂ isÂ already launched orÂ not (Alfred would launch itÂ forÂ you ifÂ itâ€™s not) andÂ about aÂ lot ofÂ other needless hassles.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Itâ€™s way much faster andÂ easier than using other ways ofÂ &lt;span class=&quot;nobr&quot;&gt;switchingâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;like using your mouse orÂ touchpad, orÂ calling apps using Spotlight, Quicksilver orÂ Alfred prompts.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;AndÂ ifÂ youâ€™d use theÂ same shortcuts inÂ teams, itÂ would beÂ really easy toÂ come andÂ show anything onÂ your colleaguesâ€™ &lt;span class=&quot;nobr&quot;&gt;machinesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;youâ€™ll know what toÂ press toÂ get theÂ kind ofÂ app you need, even ifÂ your friends uses vim instead ofÂ your lovely ST, orÂ another browser, orÂ anything else. AndÂ they could have Dock hidden inÂ aÂ place youâ€™d never guess (orÂ another monitor). But with theÂ agreement onÂ theÂ common shortcuts forÂ apps you could just work with their environment asÂ with yours.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;

    </content>
  </entry>
  <entry>
    <title>â€œBlogâ€</title>
    <link href="http://kizu.ru/en/blog/hello-blog/"/>
    <updated>2013-05-07T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/blog/hello-blog</id>
    <content type="html">&lt;h1 id=&quot;-blog-&quot;&gt;â€œBlogâ€&lt;/h1&gt;
&lt;p&gt;Hello! AsÂ IÂ wrote inÂ aÂ &lt;a href=&quot;/en/issues/restart/&quot;&gt;post onÂ theÂ relaunch ofÂ myÂ site&lt;/a&gt;, theÂ main goal forÂ the new version was toÂ ease theÂ process ofÂ adding new entries. However, beyond theÂ technical side IÂ completely forgot about &lt;em&gt;what exactly&lt;/em&gt; IÂ wanted toÂ write inÂ that easy andÂ simple way.&lt;/p&gt;
&lt;p&gt;Until today everything IÂ published onÂ myÂ site could beÂ divided toÂ two categories: &lt;a href=&quot;/issues/&quot;&gt;â€œissuesâ€&lt;/a&gt; andÂ &lt;a href=&quot;/fun/&quot;&gt;â€œexperimentsâ€&lt;/a&gt;. InÂ â€œissuesâ€ IÂ tried toÂ publish mostly objective things with all theÂ proper arguments andÂ thoughts went through aÂ lot ofÂ thinking. Maybe those things could beÂ called â€œarticlesâ€, but IÂ donâ€™t like this word. InÂ â€œexperimentsâ€went all those things like prototypes forÂ different interesting things, made mostly just forÂ fun, not asÂ production solutions, almost without any descriptions whatsoever. While &lt;em&gt;now&lt;/em&gt; IÂ see aÂ bit ofÂ sense inÂ describing things (like IÂ did with myÂ experiment onÂ &lt;a href=&quot;:rotated-text&quot;&gt;rotated text&lt;/a&gt;), IÂ still donâ€™t like theÂ style ofÂ &lt;span class=&quot;nobr&quot;&gt;step-by&lt;/span&gt;-step tutorials that describe every letter here andÂ there. So, those things IÂ publish asÂ â€œexperimentsâ€ couldnâ€™t goÂ into â€œissuesâ€.&lt;/p&gt;
&lt;p&gt;So, why did IÂ made itÂ easy toÂ write posts forÂ myÂ site? Itâ€™s because IÂ wanted toÂ write &lt;em&gt;more often&lt;/em&gt;. Not toÂ publish articles orÂ experiments (not that often forÂ those), but toÂ maintain aÂ &lt;em&gt;blog&lt;/em&gt;. Not toÂ post objective, complicated things, not forÂ some crazy experiments with hardcore code, but toÂ have aÂ platform where IÂ could share something simple, something casual maybe. Simple ideas, thoughts, critics forÂ stuff thatâ€™s going onÂ inÂ theÂ todayâ€™s frontend world.&lt;/p&gt;
&lt;p&gt;When itÂ was hard toÂ publish aÂ new post onÂ aÂ site IÂ didnâ€™t thought ofÂ itÂ asÂ aÂ blog, but then IÂ came toÂ itÂ andÂ remade myÂ site from scratch, but inÂ aÂ process I, again, forgot why IÂ did all those things toÂ Jekyll andÂ &lt;span class=&quot;nobr&quot;&gt;myselfâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;forgot that IÂ wanted itÂ there forÂ the short andÂ simple posts. So, after theÂ relaunch ofÂ aÂ site there were not that much ofÂ new posts, but atÂ theÂ same time there were aÂ lot ofÂ drafts andÂ sketches forÂ them. IÂ forgot that you could post things not polished toÂ theÂ shining, but short, rough andÂ unfinished posts (andÂ Iâ€™ll complete all those drafts andÂ publish them someday, but IÂ wonâ€™t haste myself andÂ would doÂ itÂ properly, without aÂ hard schedule).&lt;/p&gt;
&lt;p&gt;AndÂ now IÂ remembered about all those thing, andÂ here itÂ &lt;span class=&quot;nobr&quot;&gt;isâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;span class=&quot;nobr&quot;&gt;blogâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;aÂ new category onÂ myÂ site. Well, â€œcategoryâ€ isÂ aÂ strong word here, itâ€™s just aÂ way toÂ cheat onÂ myself andÂ make meÂ toÂ write those &lt;span class=&quot;nobr&quot;&gt;not-so&lt;/span&gt;-long things. TheÂ fact isÂ all those posts would still goÂ toÂ &lt;a href=&quot;http://feeds.feedburner.com/kizuruen&quot; title=&quot;Atom actually, but is there a better term for it?&quot;&gt;&lt;abbr&gt;RSS&lt;/abbr&gt;&lt;/a&gt;, IÂ still would share them onÂ twitter, soÂ nothing new there forÂ you, except all those posts Iâ€™ll write actually.&lt;/p&gt;
&lt;p&gt;So, hooray, here itÂ is, aÂ blog. Iâ€™ll try toÂ post here some stupid things often :)&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Rotated text</title>
    <link href="http://kizu.ru/en/fun/rotated-text/"/>
    <updated>2013-04-30T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/fun/rotated-text</id>
    <content type="html">&lt;h1 id=&quot;rotated-text&quot;&gt;Rotated text&lt;/h1&gt;
&lt;p&gt;Once IÂ already shared this solution onÂ twitter, but this time Iâ€™m going toÂ write aÂ bit more onÂ it.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TheÂ task&lt;/strong&gt; isÂ toÂ get theÂ text rotated byÂ 90 degrees.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TheÂ problem&lt;/strong&gt;: itâ€™s widely known that when you use &lt;code&gt;transform&lt;/code&gt;, theÂ block behaves similar toÂ theÂ &lt;code&gt;position:relative&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;its place inÂ theÂ flow isÂ not changed after theÂ transformation, soÂ theÂ change isÂ only visual.&lt;/p&gt;
&lt;p&gt;However, rather often youâ€™ll &lt;em&gt;need&lt;/em&gt; toÂ rotate theÂ block inÂ aÂ way theÂ flow would change either. Like ifÂ weâ€™d want toÂ put some rotated blocks inÂ aÂ row, orÂ ifÂ weâ€™d want toÂ have vertical headers inÂ &lt;span class=&quot;nobr&quot;&gt;tablesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;inÂ those cases weÂ would need theÂ height ofÂ theÂ block toÂ beÂ its width after theÂ rotate andÂ vice versa.&lt;/p&gt;
&lt;p&gt;IÂ managed toÂ make this work with one &lt;span class=&quot;nobr&quot;&gt;assumptionâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;weÂ would need toÂ know theÂ height ofÂ theÂ rotated element. InÂ such case theÂ solution would beÂ rather simple:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;WeÂ would need toÂ have anÂ extra element. &lt;abbr&gt;HTML&lt;/abbr&gt; forÂ each block would beÂ like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt; &amp;lt;span class=&amp;quot;rotated-text&amp;quot;&amp;gt;
     &amp;lt;span class=&amp;quot;rotated-text__inner&amp;quot;&amp;gt;
         Rotated foo
     &amp;lt;/span&amp;gt;
 &amp;lt;/span&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Wrapper would get those styles:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt; .rotated-text {
     display: inline-block;
     overflow: hidden;

     width: 1.5em;
     line-height: 1.5;
 }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; Here weÂ make our element toÂ beÂ inline-block (thatâ€™s not critical, theÂ block display would work too, but inline-block isÂ often handier), then weÂ remove all theÂ extra things using overflow (weÂ would need this later) andÂ set theÂ width toÂ theÂ current elementsâ€™ &lt;span class=&quot;nobr&quot;&gt;heightâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;theÂ mentioned assumption (andÂ &lt;code&gt;line-height&lt;/code&gt; isÂ placed here asÂ anÂ example ofÂ what defines theÂ blocksâ€™ height).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Then weÂ make theÂ inner element toÂ beÂ inline-block too, soÂ its width would beÂ collapsed toÂ its content. After this weÂ make itÂ have &lt;code&gt;white-space:nowrap&lt;/code&gt;, soÂ nothing would wrap (because ofÂ theÂ fixed width inÂ theÂ previous step), andÂ then weÂ actually rotate theÂ block from theÂ left top corner using &lt;code&gt;transform-origin&lt;/code&gt; (forÂ readability theÂ transform properties are given without proper prefixes):&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt; .rotated-text__inner {
     display: inline-block;
     white-space: nowrap;

     transform: translate(0,100%) rotate(-90deg);
     transform-origin: 0 0;
 }
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;AndÂ now theÂ key part ofÂ myÂ solution: weÂ need toÂ make this inner element toÂ beÂ &lt;em&gt;square&lt;/em&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;this would make theÂ resulting element toÂ have theÂ height ofÂ its width, andÂ the width would beÂ equal toÂ theÂ assumed height onÂ theÂ wrapper. So, toÂ make anÂ element squarish weÂ use this trick:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-css&quot;&gt; .rotated-text__inner:after {
     content: &amp;quot;&amp;quot;;
     float: left;
     margin-top: 100%;
 }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt; Not that hard, but not aÂ lot ofÂ people remember that top andÂ bottom paddings andÂ margins set inÂ percents are using theÂ width ofÂ theÂ parent element, not its height. This behavior isÂ not widely used, but here isÂ aÂ case where itâ€™s useful atÂ last.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;So, inÂ theÂ end weÂ got aÂ square element, whose width isÂ hidden byÂ theÂ overflow onÂ wrapper andÂ this element could beÂ used inÂ any context, soÂ itÂ would beÂ affected byÂ &lt;code&gt;text-align&lt;/code&gt; orÂ &lt;code&gt;vertical-align&lt;/code&gt;. ItÂ isÂ rather â€œfairâ€ rotated block.&lt;/p&gt;
&lt;p&gt;AndÂ just some basic examples ofÂ usage:&lt;/p&gt;
&lt;h2 id=&quot;table-headers&quot;&gt;Table headers&lt;/h2&gt;
&lt;p&gt;AnÂ obvious &lt;span class=&quot;nobr&quot;&gt;exampleâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;compact table headers what donâ€™t take that much ofÂ horizontal space:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/fun/rotated-text/#Demo_rotated-text&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;-bookshelf-&quot;&gt;â€œBookshelfâ€&lt;/h2&gt;
&lt;p&gt;AsÂ all theÂ rotated blocks have fair place inÂ aÂ flow, you could arrange them inÂ aÂ row soÂ they wonâ€™t overlap each other andÂ the height ofÂ theÂ whole row would beÂ equal toÂ theÂ â€œhighestâ€ ofÂ them:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/fun/rotated-text/#Demo_rotated-text_books&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;So, thatâ€™s it.&lt;/p&gt;
&lt;p&gt;Once again: weÂ need toÂ know theÂ initial height ofÂ theÂ rotated block, soÂ ifÂ weâ€™d need toÂ rotate multiline blocks, weâ€™d need toÂ change their resulting width accordingly.&lt;/p&gt;
&lt;p&gt;Also, this method could work inÂ &lt;span class=&quot;nobr&quot;&gt;IEâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;byÂ adding matrix filter andÂ converting aÂ pseudo-element toÂ anÂ actual &lt;span class=&quot;nobr&quot;&gt;oneâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;but Iâ€™m lazy enough toÂ doÂ this. But ifÂ youâ€™d like, you could make itÂ byÂ yourself andÂ even submit aÂ Pull Requests toÂ &lt;a href=&quot;https://github.com/kizu/kizu.github.com/blob/master/demos/rotated-text.html&quot;&gt;those&lt;/a&gt; &lt;a href=&quot;https://github.com/kizu/kizu.github.com/blob/master/demos/rotated-text_books.html&quot;&gt;examples&lt;/a&gt; :)&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Markdowning YAML for Jekyll</title>
    <link href="http://kizu.ru/en/issues/markdowning-yaml/"/>
    <updated>2013-04-21T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/issues/markdowning-yaml</id>
    <content type="html">&lt;h1 id=&quot;markdowning-yaml-for-jekyll&quot;&gt;Markdowning &lt;abbr&gt;YAML&lt;/abbr&gt; forÂ Jekyll&lt;/h1&gt;
&lt;p&gt;While Iâ€™m struggling toÂ write aÂ lengthy article, here isÂ aÂ small one, onÂ aÂ little Jekyll trick IÂ use.&lt;/p&gt;
&lt;p&gt;InÂ Jekyll you need toÂ use &lt;abbr&gt;YAML&lt;/abbr&gt; front matter toÂ add any metadata toÂ theÂ post orÂ page. Actually, Jekyll â€œseesâ€ only those files that have theÂ &lt;abbr&gt;YAML&lt;/abbr&gt; front matter, soÂ itÂ isÂ aÂ somewhat important thing.&lt;/p&gt;
&lt;p&gt;Most ofÂ theÂ time this front matter would look like this:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-yaml&quot;&gt;---
layout: docs
title: Resources
prev_section: sites
---
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ItÂ could seem toÂ beÂ ok. However, asÂ IÂ use Jekyll right onÂ GitHub, myÂ perfectionism tells meÂ that theÂ source ofÂ all myÂ posts inÂ markdown should look perfect when looked atÂ GitHub. AndÂ itÂ would render all theÂ markdown documents instead ofÂ showing their content. So, theÂ &lt;abbr&gt;YAML&lt;/abbr&gt; front matter inÂ that case would look like this:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://img-fotki.yandex.ru/get/6430/1076905.1/0_9789a_239b2fc2_orig.png&quot; alt=&quot;Bad code&quot;&gt;&lt;/p&gt;
&lt;p&gt;Not that readable, huh? AndÂ the last line suddenly became aÂ &lt;span class=&quot;nobr&quot;&gt;headerâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;IÂ donâ€™t think itâ€™s what weÂ could want there.&lt;/p&gt;
&lt;p&gt;However, itÂ can beÂ fixed with ease: you just need toÂ add some extra lines &lt;span class=&quot;nobr&quot;&gt;in-between&lt;/span&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-yaml&quot;&gt;---

layout: docs

title: Resources

prev_section: sites

---
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;AndÂ this would look soÂ much better atÂ GitHub:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://img-fotki.yandex.ru/get/5625/1076905.1/0_97899_16bfcbbf_orig.png&quot; alt=&quot;Good code&quot;&gt;&lt;/p&gt;
&lt;p&gt;Instead ofÂ aÂ useless header weÂ would get &lt;abbr&gt;YAML&lt;/abbr&gt; nicely separated from content, andÂ every line would become aÂ paragraph there.&lt;/p&gt;
&lt;p&gt;AsÂ most ofÂ posts wonâ€™t have aÂ lot ofÂ metadata, those extra lines wonâ€™t bloat theÂ code. And, inÂ myÂ opinion, this code style isÂ also more readable when youâ€™re working with actual code, soÂ IÂ donâ€™t see any reasons why you shouldnâ€™t use itÂ all theÂ time forÂ &lt;abbr&gt;YAML&lt;/abbr&gt; front matters.&lt;/p&gt;
&lt;p&gt;TheÂ only thing IÂ donâ€™t like there isÂ that &lt;abbr&gt;YAML&lt;/abbr&gt; isÂ soÂ strict. You canâ€™t add indents inÂ theÂ front ofÂ data, orÂ use lists with hyphens &lt;span class=&quot;nobr&quot;&gt;hereâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;those could beÂ rendered even nicer. Also, ifÂ someone would see any other possibility toÂ enhance theÂ readability ofÂ theÂ &lt;abbr&gt;YAML&lt;/abbr&gt; front &lt;span class=&quot;nobr&quot;&gt;mattersâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;tell meÂ via twitter orÂ byÂ issues onÂ GitHub.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Jekyll</title>
    <link href="http://kizu.ru/en/issues/going-jekyll/"/>
    <updated>2013-01-30T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/issues/going-jekyll</id>
    <content type="html">&lt;h1 id=&quot;jekyll&quot;&gt;Jekyll&lt;/h1&gt;
&lt;p&gt;InÂ aÂ &lt;a href=&quot;/en/issues/restart/&quot;&gt;post onÂ site relaunch&lt;/a&gt; IÂ told Iâ€™ll write aÂ lot ofÂ articles onÂ Jekyll. Thatâ€™s theÂ first post inÂ theÂ series, anÂ introduction.&lt;/p&gt;
&lt;p&gt;IÂ wonâ€™t write onÂ how toÂ install &lt;a href=&quot;https://github.com/mojombo/jekyll&quot;&gt;Jekyll&lt;/a&gt;, how theÂ files are structured there, andÂ soÂ &lt;span class=&quot;nobr&quot;&gt;onâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;there are already aÂ lot ofÂ articles onÂ that (look forÂ some atÂ theÂ &lt;a href=&quot;#links&quot;&gt;â€œlinksâ€&lt;/a&gt;). ToÂ describe Jekyll briefly, itâ€™s aÂ blog-aware static site generator. AnÂ awesome one.&lt;/p&gt;
&lt;h2 id=&quot;github-pages&quot;&gt;GitHub Pages&lt;/h2&gt;
&lt;p&gt;IÂ need toÂ tell one thing from theÂ start: this andÂ all other future articles would beÂ inÂ theÂ context ofÂ &lt;a href=&quot;http://pages.github.com&quot;&gt;GitHub Pages&lt;/a&gt;. While GitHub allows you toÂ host any static sites onÂ it, there isÂ also aÂ way toÂ host sites wrote with Jekyll. So, theÂ Jekyll isÂ theÂ only way toÂ actually generate something right atÂ GitHub without use ofÂ any other services orÂ any front-end solutions.&lt;/p&gt;
&lt;p&gt;With Jekyll you can just create aÂ file inÂ markdown, add aÂ &lt;abbr&gt;YAML&lt;/abbr&gt; front matter toÂ &lt;span class=&quot;nobr&quot;&gt;itâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;andÂ start writing. After pushing this file toÂ theÂ repo onÂ GitHub, theÂ whole site would beÂ regenerated andÂ youâ€™ll see theÂ corresponding post both asÂ aÂ page onÂ your site andÂ inÂ all theÂ listings onÂ other pages asÂ well. AndÂ you could push your changes from any place: you could even use just GitHubâ€™s site forÂ this orÂ any web app using GitHubâ€™s &lt;abbr&gt;API&lt;/abbr&gt;.&lt;/p&gt;
&lt;p&gt;AndÂ another thing IÂ need toÂ mention right from theÂ start: aÂ lot ofÂ things Iâ€™ll describe inÂ theÂ next articles could beÂ made &lt;em&gt;soÂ mush&lt;/em&gt; easier using plugins. But IÂ wonâ€™t goÂ anÂ easy &lt;span class=&quot;nobr&quot;&gt;wayâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;Iâ€™d like toÂ make everything inÂ aÂ way more people could use it: even inÂ places where theÂ plugins are &lt;span class=&quot;nobr&quot;&gt;disabledâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;asÂ onÂ GitHub Pages.&lt;/p&gt;
&lt;h2 id=&quot;-hello-world-&quot;&gt;â€œHello worldâ€&lt;/h2&gt;
&lt;p&gt;Minimal document youâ€™ll need toÂ generate aÂ site onÂ Jekyll should contain theÂ &lt;a href=&quot;http://en.wikipedia.org/wiki/YAML&quot;&gt;&lt;abbr&gt;YAML&lt;/abbr&gt;&lt;/a&gt; front matter with atÂ least one &lt;span class=&quot;nobr&quot;&gt;fieldâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;code&gt;layout&lt;/code&gt; (you could actually make one without it, with empty &lt;abbr&gt;YAML&lt;/abbr&gt; front matter, but inÂ that case your page wonâ€™t have any layout atÂ all). So, theÂ minimal &lt;code&gt;hello-world.md&lt;/code&gt; forÂ Jekyll would look like&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;---
layout: default
---

Hello world!
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;InÂ real world youâ€™d like toÂ add atÂ least aÂ title orÂ some other data, but forÂ the most trivial cases thatâ€™s theÂ minimal code toÂ start from.&lt;/p&gt;
&lt;h2 id=&quot;dates&quot;&gt;Dates&lt;/h2&gt;
&lt;p&gt;One ofÂ theÂ features IÂ like inÂ Jekyll isÂ its format forÂ posts. You need toÂ name theÂ files asÂ &lt;code&gt;YYYY-MM-DD-title&lt;/code&gt; andÂ IÂ think thatâ€™s awesome. ItÂ makes you toÂ maintain aÂ better file hierarchy that would beÂ sorted byÂ date automatically, andÂ also you wonâ€™t need toÂ write theÂ date inÂ theÂ post &lt;span class=&quot;nobr&quot;&gt;itselfâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;Jekyll would use theÂ date from theÂ filename. Yes, inÂ some cases youâ€™ll want toÂ use theÂ &lt;code&gt;published&lt;/code&gt; field inÂ &lt;abbr&gt;YAML&lt;/abbr&gt; toÂ override theÂ date from theÂ filename, but itâ€™s upÂ toÂ you. InÂ most cases you wonâ€™t need it.&lt;/p&gt;
&lt;h2 id=&quot;prose-io&quot;&gt;Prose.io&lt;/h2&gt;
&lt;p&gt;AndÂ ifÂ you donâ€™t like toÂ fill upÂ &lt;abbr&gt;YAML&lt;/abbr&gt; byÂ yourself, andÂ you donâ€™t want toÂ use any scripts forÂ itÂ (like itâ€™s done inÂ Jekyll Bootstrap), you could use aÂ service like &lt;a href=&quot;http://prose.io&quot;&gt;Prose.io&lt;/a&gt;. This awesome service allows you toÂ &lt;a href=&quot;http://prose.io/help/handbook.html#metadata_defaults&quot;&gt;describe all theÂ metadata defaults&lt;/a&gt; inÂ aÂ config, soÂ when you create aÂ new post using Prose, all theÂ metadata would beÂ filled forÂ you (actually, inÂ most basic cases youâ€™d need toÂ atÂ least look atÂ theÂ metadata, but thatâ€™s another story Iâ€™ll tell someday later).&lt;/p&gt;
&lt;h2 id=&quot;links&quot;&gt;Links&lt;/h2&gt;
&lt;p&gt;There isÂ aÂ lot ofÂ useful info inÂ theÂ internets onÂ Jekyll, Iâ€™ll try toÂ sum all theÂ useful links inÂ this post forÂ you (andÂ for myself). There are links that would help you toÂ start with Jekyll, andÂ the links that are useful all theÂ time youâ€™re tinkering with theÂ logic behind Jekyllâ€™s templates.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://jekyllrb.com&quot;&gt;Jekyllâ€™s official site&lt;/a&gt;;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://prose.io/help/handbook.html&quot;&gt;configuring Prose.io forÂ Jekyll&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There are also aÂ lot ofÂ helpful pages onÂ Jekyll inÂ theÂ &lt;a href=&quot;http://jekyllbootstrap.com&quot;&gt;Jekyll Bootstrap&lt;/a&gt; project. IÂ found those ones toÂ beÂ theÂ most useful:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://jekyllbootstrap.com/lessons/jekyll-introduction.html&quot;&gt;Introduction toÂ Jekyll&lt;/a&gt;;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://jekyllbootstrap.com/api/template-data-api.html&quot;&gt;template data &lt;abbr&gt;API&lt;/abbr&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Jekyll uses &lt;a href=&quot;http://www.liquidmarkup.org&quot;&gt;Liquid&lt;/a&gt; forÂ templating. GitHub recently &lt;a href=&quot;https://github.com/blog/1366-github-pages-updated-to-jekyll-0-12-0&quot;&gt;updated Jekyll&lt;/a&gt;, soÂ now you could use almost all theÂ tags from theÂ docs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/shopify/liquid/wiki/liquid-for-designers&quot;&gt;list ofÂ all theÂ default liquid tags&lt;/a&gt;;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/mojombo/jekyll/wiki/liquid-extensions&quot;&gt;extra liquid tags available inÂ Jekyll&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Before this update you couldnâ€™t use theÂ powerful &lt;code&gt;split&lt;/code&gt; &lt;span class=&quot;nobr&quot;&gt;tagâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;almost theÂ only way toÂ make aÂ lot ofÂ different things with Jekyll (guess &lt;span class=&quot;nobr&quot;&gt;whatâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;there would beÂ some article onÂ meÂ hacking with that tag).&lt;/p&gt;
&lt;p&gt;ForÂ writing posts IÂ recommend toÂ use markdown. While there are other ways, like plain &lt;abbr&gt;HTML&lt;/abbr&gt; orÂ Textile, forÂ most cases theÂ markdown would fit theÂ best.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ForÂ aÂ markdown engine Iâ€™d recommend toÂ use &lt;a href=&quot;http://kramdown.rubyforge.org&quot;&gt;kramdown&lt;/a&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;itâ€™s theÂ best option soÂ far, Iâ€™d write why inÂ one ofÂ theÂ next articles.&lt;/li&gt;
&lt;li&gt;ForÂ configuring theÂ site orÂ any specific post youâ€™ll need toÂ use &lt;a href=&quot;http://en.wikipedia.org/wiki/YAML&quot;&gt;&lt;abbr&gt;YAML&lt;/abbr&gt;&lt;/a&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;soÂ ifÂ youâ€™re not familiar with its &lt;span class=&quot;nobr&quot;&gt;syntaxâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;goÂ andÂ read about it, itâ€™s nice.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Overall, Iâ€™m very happy Iâ€™ve chosen theÂ Jekyll forÂ myÂ new site. There are aÂ lot ofÂ issues with Liquid templates, but theÂ overall result has been worth it.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Correct Cursor on Active Elements</title>
    <link href="http://kizu.ru/en/issues/cursor-pointer/"/>
    <updated>2013-01-22T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/issues/cursor-pointer</id>
    <content type="html">&lt;h1 id=&quot;correct-cursor-on-active-elements&quot;&gt;Correct Cursor onÂ Active Elements&lt;/h1&gt;
&lt;p&gt;Every active element must have aÂ set &lt;code&gt;cursor&lt;/code&gt; onÂ hover. AndÂ itÂ should beÂ &lt;code&gt;cursor:pointer&lt;/code&gt; inÂ most cases.&lt;/p&gt;
&lt;p&gt;ByÂ active elements IÂ mean links, buttons, selects, labels with checkboxes andÂ radio buttons, andÂ other similar elements.&lt;/p&gt;
&lt;p&gt;Those elements should beÂ treated asÂ â€œactiveâ€ when clicking onÂ such element results inÂ any action. Thereby aÂ menu item forÂ the current page, checked radio button orÂ disabled buttons orÂ links are not active elements, soÂ they shouldnâ€™t have any change onÂ hover.&lt;/p&gt;
&lt;p&gt;AtÂ first IÂ thought itâ€™s obvious, but then IÂ found out there are aÂ lot ofÂ developers who think otherwise. AndÂ IÂ didnâ€™t find any proper arguments against &lt;code&gt;cursor:pointer&lt;/code&gt; forÂ active elements after reading all their points ofÂ view.&lt;/p&gt;
&lt;p&gt;InÂ this article Iâ€™ll tell you myÂ arguments atÂ first, andÂ then Iâ€™ll discuss all theÂ arguments against myÂ point ofÂ view, describing why those arguments hadnâ€™t incline meÂ from it.&lt;/p&gt;
&lt;h2 id=&quot;benefits-of-using-cursor-pointer&quot;&gt;Benefits ofÂ using &lt;code&gt;cursor:pointer&lt;/code&gt;&lt;/h2&gt;
&lt;h3 id=&quot;visual-feedback&quot;&gt;Visual Feedback&lt;/h3&gt;
&lt;p&gt;ForÂ meÂ theÂ main profit from changed cursor isÂ theÂ visual feedback. Ideally every custom element should change its state onÂ hover. However, inÂ real life such state could beÂ absent orÂ wouldnâ€™t differ much from theÂ original state, orÂ would happen with aÂ transition. SoÂ there would beÂ noÂ feedback, orÂ itÂ would beÂ not obvious.&lt;/p&gt;
&lt;p&gt;But you surely would see when theÂ cursor &lt;span class=&quot;nobr&quot;&gt;changesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;this happens instantly andÂ stable. TheÂ click that could follow theÂ mouseover would beÂ &lt;em&gt;intuitive&lt;/em&gt;, otherwise theÂ brain would need toÂ match theÂ position ofÂ theÂ cursor with theÂ element orÂ spot theÂ elementâ€™s change andÂ then find out ifÂ itâ€™s aÂ hover state over this elementâ€™s active area orÂ something else.&lt;/p&gt;
&lt;p&gt;Changing ofÂ theÂ cursor isÂ theÂ most natural, noticeable andÂ obvious feedback you could easily add toÂ any element. OfÂ course, itâ€™s not theÂ best variant, but itâ€™s cheap andÂ easy. IfÂ you could add aÂ distinct visual state onÂ hover, then itÂ would beÂ even better.&lt;/p&gt;
&lt;h3 id=&quot;delimitation-of-the-active-area&quot;&gt;Delimitation ofÂ theÂ active area&lt;/h3&gt;
&lt;p&gt;There are aÂ lot ofÂ cases when you should hint toÂ theÂ users that they could click already. You could often want toÂ increase theÂ clickable area ofÂ different elements, like forÂ small icons orÂ forÂ menu items placed near theÂ window edges. InÂ those cases adding aÂ cursor onÂ hover would help users toÂ find out when they could click onÂ anÂ element.&lt;/p&gt;
&lt;p&gt;InÂ some cases, when there are adjacent elements, theÂ cursor wouldnâ€™t beÂ enough toÂ tell which element isÂ &lt;span class=&quot;nobr&quot;&gt;hoveredâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;inÂ those cases you should change theÂ visual state ofÂ those elements.&lt;/p&gt;
&lt;p&gt;Anyway, ifÂ youâ€™d hint users when toÂ use any specific active element, users would know itÂ andÂ itÂ would beÂ easier forÂ them toÂ use theÂ UI next &lt;span class=&quot;nobr&quot;&gt;timeâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;theyâ€™d need toÂ aim with less precision, because theyâ€™d know that active area ofÂ anÂ element could beÂ bigger than itÂ can beÂ seen. AndÂ when theyâ€™d move theÂ cursor they could click right atÂ theÂ moment theÂ cursor would change. Otherwise, ifÂ anÂ element donâ€™t change its cursor onÂ hover, theÂ users would need toÂ aim carefully toÂ hit theÂ area ofÂ aÂ small element like icon orÂ checkbox.&lt;/p&gt;
&lt;p&gt;AndÂ IÂ could argue ifÂ someone would say theÂ active area ofÂ anÂ element should beÂ asÂ big asÂ its visual representation, but Iâ€™ll keep myÂ arguments onÂ this topic forÂ another article.&lt;/p&gt;
&lt;h2 id=&quot;arguments-against-changing-the-cursor&quot;&gt;Arguments against changing theÂ cursor&lt;/h2&gt;
&lt;p&gt;IÂ really did try, but hadnâ€™t find any proper arguments against changing theÂ cursor over theÂ active elements. Most ofÂ those arguments can beÂ described asÂ â€œDonâ€™t break usersâ€™ habits!â€&lt;/p&gt;
&lt;p&gt;But you canâ€™t treat theÂ presence ofÂ habits asÂ anÂ argument. This means there was one ofÂ theÂ possible solutions andÂ itÂ was either theÂ only one there, either itÂ was theÂ best atÂ theÂ moment. TheÂ habit should beÂ treated inÂ its context, andÂ inÂ context ofÂ &lt;em&gt;what&lt;/em&gt; would happen ifÂ weâ€™d brake it. Would itÂ beÂ destructive inÂ some way, orÂ itÂ would beÂ just aÂ matter ofÂ minor usersâ€™ discomfort?&lt;/p&gt;
&lt;p&gt;Another fact isÂ that not all ofÂ theÂ habits are good. IfÂ weâ€™d always stay with theÂ usersâ€™ desires, theÂ progress would stop. Often users become used toÂ theÂ things that only hinder them. AÂ clear example ofÂ such bad habit are labels forÂ checkboxes andÂ radio buttons. Lazy developers didnâ€™t bind them together forÂ years, soÂ users often donâ€™t know what theÂ labels could beÂ actually clicked, soÂ they spend their time andÂ efforts trying toÂ hit those little areas ofÂ those little controls even ifÂ theÂ labels are clickable too. Itâ€™s aÂ great example why you should not only bind theÂ inputs with labels, but also tell users about itÂ with all possible ways.&lt;/p&gt;
&lt;p&gt;WeÂ could divide theÂ â€œhabits argumentsâ€ into different categories. Iâ€™d try toÂ answer theÂ most frequently used arguments against theÂ changing ofÂ theÂ cursor onÂ hover.&lt;/p&gt;
&lt;h3 id=&quot;-the-cursor-doesn-t-change-in-users-os-&quot;&gt;â€œTheÂ cursor doesnâ€™t change inÂ usersâ€™ OSâ€&lt;/h3&gt;
&lt;p&gt;InÂ OS theÂ most used cursor isÂ just anÂ arrow. ItÂ doesnâ€™t change over most ofÂ theÂ system controls like buttons. However, theÂ question isÂ â€œIs this really good?â€ IsÂ itÂ familiar? Yes. But isÂ itÂ usable andÂ could itÂ beÂ better? IÂ often see how some desktop app isÂ not usable because IÂ need toÂ guess where toÂ &lt;span class=&quot;nobr&quot;&gt;clickâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;there are noÂ signs ofÂ active areas.&lt;/p&gt;
&lt;p&gt;When weÂ are talking about desktop weÂ should also talk about games too. Unlike apps, games often have custom cursors that are changed over different UI elements. InÂ comparison with modern games most ofÂ theÂ web apps feel like theÂ old games with pixel-&lt;span class=&quot;nobr&quot;&gt;huntingâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;you have toÂ guess where toÂ click andÂ where toÂ hover inÂ order toÂ doÂ something. However, recently theÂ web apps tend toÂ use more cursors forÂ different actions like &lt;span class=&quot;nobr&quot;&gt;drag-n&lt;/span&gt;-drop orÂ resize. But why then use theÂ default cursor forÂ buttons? &lt;code&gt;cursor:pointer&lt;/code&gt; would fit great there. AndÂ when weâ€™d look atÂ theÂ checkboxes andÂ radio buttons, then there should beÂ not only aÂ distinct visual hover state like changed background, but you shouldnâ€™t forget toÂ set theÂ &lt;code&gt;cursor:default&lt;/code&gt; forÂ &lt;span class=&quot;nobr&quot;&gt;themâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;thatâ€™s theÂ cursor theÂ desktop apps mostly use toÂ &lt;em&gt;select&lt;/em&gt; something. But ifÂ selecting theÂ checkbox orÂ radio button results inÂ aÂ UI change like expanding theÂ accordionâ€™s section, then theÂ best cursor would beÂ aÂ pointer &lt;span class=&quot;nobr&quot;&gt;oneâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;telling something would happen after youâ€™d click.&lt;/p&gt;
&lt;p&gt;Web apps are not theÂ same asÂ desktop apps, there are aÂ lot ofÂ new patterns andÂ UI elements there, soÂ itâ€™s time toÂ think again andÂ decide which habits toÂ forget.&lt;/p&gt;
&lt;h3 id=&quot;-i-see-a-pointer-cursor-and-think-it-s-a-link-&quot;&gt;â€œI see aÂ pointer cursor andÂ think itâ€™s aÂ link!â€&lt;/h3&gt;
&lt;p&gt;Ah, thatâ€™s another often used argument. When there were noÂ web apps, there were only linked textual documents. TheÂ apps mostly didnâ€™t have such links, soÂ inÂ browsers, toÂ tell users what theÂ &lt;abbr&gt;HTML&lt;/abbr&gt; &lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt; is, there appeared underline, blue color andÂ aÂ pointer cursor. AndÂ asÂ all theÂ buttons andÂ inputs were system controls, they inherited theÂ default behavior with theÂ default cursor.&lt;/p&gt;
&lt;p&gt;Years passed andÂ sites become more complex andÂ &lt;span class=&quot;nobr&quot;&gt;UI-rich&lt;/span&gt;, designers created new controls andÂ they often were just theÂ links disguised asÂ buttons andÂ other elements. AndÂ inÂ most cases nobody removed theÂ linksâ€™ cursors. SoÂ ifÂ youâ€™d look atÂ theÂ modern sites, most custom buttons would beÂ actually links andÂ would have &lt;code&gt;cursor:pointer&lt;/code&gt; there.&lt;/p&gt;
&lt;p&gt;InÂ fact, you should forget theÂ â€œpointer isÂ forÂ linksâ€ thing aÂ long ago.&lt;/p&gt;
&lt;h3 id=&quot;-but-you-could-open-links-in-new-windows-get-the-contextual-menus-for-them-&quot;&gt;â€œBut you could open links inÂ new windows, get theÂ contextual menus forÂ themâ€¦â€&lt;/h3&gt;
&lt;p&gt;Well, &lt;span class=&quot;nobr&quot;&gt;yeahâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;links are not buttons, andÂ buttons are not links. But that doesnâ€™t mean theÂ behavior ofÂ hover forÂ links andÂ buttons should differ.&lt;/p&gt;
&lt;p&gt;Nobody would expect anÂ ability toÂ open something inÂ aÂ new tab from theÂ button. InÂ each case both theÂ links andÂ the buttons would have their context where users could either await theÂ linkâ€™s behavior, either they would just use theÂ control they have. AndÂ itÂ really doesnâ€™t matter which cursor theÂ users would &lt;span class=&quot;nobr&quot;&gt;seeâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;ifÂ users would see aÂ cursor inÂ aÂ linksâ€™ context, they would treat itÂ asÂ aÂ link. But ifÂ users wonâ€™t expect aÂ link, theÂ button underneath would beÂ ok. IfÂ users would like toÂ attach aÂ file, they wonâ€™t need theÂ linkâ€™s behavior. IfÂ users would like toÂ send aÂ form, they would just doÂ it, even ifÂ thereâ€™d beÂ aÂ &lt;code&gt;cursor:pointer&lt;/code&gt; onÂ it, theÂ users wonâ€™t goÂ away andÂ wonâ€™t try toÂ open itÂ inÂ aÂ new &lt;span class=&quot;nobr&quot;&gt;windowâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;they already know how toÂ use search forms. TheÂ only place when theÂ users would beÂ &lt;span class=&quot;nobr&quot;&gt;confusedâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;ifÂ youâ€™d doÂ itÂ reverse: make aÂ button look like aÂ &lt;span class=&quot;nobr&quot;&gt;linkâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;beÂ blue andÂ underlined.&lt;/p&gt;
&lt;p&gt;Further &lt;span class=&quot;nobr&quot;&gt;moreâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;there are already aÂ lot ofÂ links that donâ€™t look like ones andÂ other elements that are disguised asÂ links. Different dropdown handles, filters, cuts, closing icons, â€œcancelâ€ &lt;span class=&quot;nobr&quot;&gt;linksâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;aÂ lot ofÂ sites have aÂ lot ofÂ elements using different tags inÂ &lt;abbr&gt;HTML&lt;/abbr&gt; forÂ them andÂ having this &lt;code&gt;cursor:pointer&lt;/code&gt;. Why would then simple buttons orÂ selects have default cursor instead ofÂ theÂ one all other controls have?&lt;/p&gt;
&lt;p&gt;There isÂ aÂ great example from one companyâ€™s service:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://kizu.ru/en/issues/cursor-pointer/cursor-pointer.png&quot; alt=&quot;Active areas example&quot;&gt;&lt;/p&gt;
&lt;p&gt;You could try toÂ guess which marked elements are links, which are not; which have &lt;code&gt;cursor:pointer&lt;/code&gt;, which donâ€™t. What would happen when youâ€™ll hover orÂ click any ofÂ those elements? You can think forÂ aÂ while, andÂ Iâ€™ll give you anÂ answer later.&lt;/p&gt;
&lt;p&gt;IfÂ youâ€™d say straightforwardly â€œonly everything that have &lt;code&gt;href&lt;/code&gt; must have aÂ cursorâ€ then aÂ lot ofÂ confusing things could appear. ForÂ example, ifÂ there would beÂ one element visually, but with different tags underneath (like &lt;a href=&quot;http://twitter.github.com/bootstrap/base-css.html#buttons&quot;&gt;bootstrapâ€™s buttons&lt;/a&gt; are), then itÂ would beÂ strange andÂ confusing ifÂ thereâ€™d beÂ aÂ difference between theÂ button made ofÂ &lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt; andÂ &lt;code&gt;&amp;lt;button&amp;gt;&lt;/code&gt;. So, IÂ hope everyone would agree that theÂ cursor over every such element should beÂ consistent. AndÂ IfÂ youâ€™d make theÂ &lt;code&gt;default&lt;/code&gt; one, then itÂ would become really confusing, â€™cause there could beÂ aÂ disabled state forÂ this button andÂ you would need toÂ spot theÂ change ofÂ theÂ buttonâ€™s background inÂ order toÂ know could itÂ beÂ pressed orÂ no. AndÂ then ifÂ youâ€™d remove theÂ &lt;code&gt;cursor:pointer&lt;/code&gt; from anÂ actual link itÂ wonâ€™t beÂ any better, soÂ theÂ only proper way isÂ toÂ have &lt;code&gt;cursor:pointer&lt;/code&gt; inÂ both cases.&lt;/p&gt;
&lt;p&gt;WeÂ could find aÂ lot ofÂ examples with buttons, links andÂ their states would conflict with each other andÂ the overall UX. Making theÂ &lt;code&gt;cursor:pointer&lt;/code&gt; toÂ mark only actionable elements makes sense andÂ wonâ€™t create any conflicts other than slight discomfort forÂ some persons.&lt;/p&gt;
&lt;p&gt;AndÂ letâ€™s get back toÂ one strange service:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://kizu.ru/en/issues/cursor-pointer/cursor-pointer.png&quot; alt=&quot;Active areas example&quot;&gt;&lt;/p&gt;
&lt;p&gt;So, whatâ€™s there?&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Itâ€™s theÂ postâ€™s permalink. Ok, itâ€™s anÂ actual link, there isÂ anÂ underline andÂ aÂ pointer onÂ hover.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Hey, itâ€™s not aÂ link, itâ€™s just aÂ text, not clickable atÂ all.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Thatâ€™s pseudo-link, there isÂ noÂ actual link, but there isÂ aÂ hover state asÂ theÂ one onÂ permalink: underline andÂ pointer. Clicking here calls aÂ dropdown toÂ appear.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Another control that behaves like link (changes color onÂ hover andÂ gets &lt;code&gt;cursor:pointer&lt;/code&gt;), but there isÂ noÂ actual link. Again, dropdown onÂ click.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;This icon isÂ not aÂ link andÂ clicking onÂ itÂ does nothing, while theÂ other parts ofÂ theÂ &lt;span class=&quot;nobr&quot;&gt;snippetâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;header andÂ &lt;span class=&quot;nobr&quot;&gt;pictureâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;are links.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;There are two links: userpic andÂ username. Theyâ€™re not connected andÂ have their own hovers: pointer andÂ anÂ underline forÂ username.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Itâ€™s aÂ pseudo-link, noÂ &lt;code&gt;href&lt;/code&gt; seen. AndÂ the underline onÂ hover andÂ pointer.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Oh, aÂ button! AÂ custom button. But whatâ€™t that? NoÂ pointer onÂ hover! AndÂ even &lt;span class=&quot;nobr&quot;&gt;moreâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;hover brings theÂ dropdown, IÂ feel like onÂ aÂ minefield there.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;So, theÂ button was treated asÂ aÂ â€œsystemâ€ element, but whatâ€™s with checkbox? ItÂ andÂ its label have &lt;code&gt;cursor:pointer&lt;/code&gt;. Wow.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;So, what could IÂ say? There isÂ noÂ even slight consistency andÂ aÂ lot ofÂ other UI mistakes. But hey, there isÂ noÂ &lt;code&gt;cursor:pointer&lt;/code&gt; onÂ aÂ button! IÂ wonder which excuses theÂ developer have forÂ this.&lt;/p&gt;
&lt;p&gt;&lt;abbr&gt;BTW&lt;/abbr&gt; itâ€™s very interesting toÂ look atÂ different services inÂ theÂ search forÂ consistency, almost noÂ one isÂ perfect, soÂ you could often find things toÂ think about andÂ toÂ criticise on.&lt;/p&gt;
&lt;h3 id=&quot;-but-the-specs-say-&quot;&gt;â€œBut theÂ specs sayâ€¦â€&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://twitter.com/SelenIT2&quot;&gt;SelenIT&lt;/a&gt; brings &lt;a href=&quot;http://habrahabr.ru/qa/19097/&quot;&gt;another argument&lt;/a&gt; (inÂ Russian): both theÂ &lt;a href=&quot;http://www.w3.org/TR/CSS21/ui.html#propdef-cursor&quot;&gt;&lt;abbr&gt;CSS&lt;/abbr&gt;2.1&lt;/a&gt; spec andÂ the &lt;a href=&quot;http://www.w3.org/TR/css3-ui/#links-and-status-cursors&quot;&gt;&lt;abbr&gt;CSS&lt;/abbr&gt;3 Basic UI&lt;/a&gt; clearly state that â€œtheÂ cursor isÂ aÂ pointer that indicates aÂ linkâ€. HeÂ also gives aÂ link toÂ aÂ &lt;a href=&quot;http://lists.w3.org/Archives/Public/public-css-testsuite/2010Jul/0024.html&quot;&gt;GÃ©rard Talbotâ€™s message&lt;/a&gt;, where heÂ declines aÂ change toÂ one ofÂ theÂ &lt;abbr&gt;CSS&lt;/abbr&gt;2.1 tests. However, itÂ couldnâ€™t beÂ anÂ argument forÂ this &lt;span class=&quot;nobr&quot;&gt;issueâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;theÂ context ofÂ this message isÂ aÂ &lt;strong&gt;test forÂ spec&lt;/strong&gt;, andÂ ifÂ spec says something, then theÂ test should cover only this.&lt;/p&gt;
&lt;p&gt;InÂ specs itÂ isÂ only said theÂ pointer isÂ supposed toÂ beÂ used forÂ links, but itÂ donâ€™t imply you &lt;em&gt;canâ€™t&lt;/em&gt; use itÂ forÂ anything other than link. ItÂ states theÂ default use ofÂ such cursor, nothing more. Moreover, IÂ think this part inÂ specs should beÂ changed toÂ something like â€œTheÂ cursor isÂ aÂ pointer that indicates anÂ element that can beÂ clickedâ€ toÂ reflect modern state ofÂ theÂ &lt;span class=&quot;nobr&quot;&gt;webâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;â€™cause theÂ current statement isÂ come atÂ least from theÂ &lt;a href=&quot;http://www.w3.org/TR/WD-CSS2-971104/ui.html#propdef-cursor&quot;&gt;year 1997&lt;/a&gt; andÂ aÂ lot ofÂ things did happen since then.&lt;/p&gt;
&lt;h3 id=&quot;-flickering-&quot;&gt;â€œFlickeringâ€&lt;/h3&gt;
&lt;p&gt;Here isÂ another, different from habit ones, argument. IfÂ there would beÂ aÂ lot ofÂ actionable elements, they say, theÂ cursor would blink aÂ lot when youâ€™d move itÂ here andÂ there.&lt;/p&gt;
&lt;p&gt;But thatâ€™s not aÂ proper argument, itâ€™s aÂ pointer forÂ one ofÂ another problems:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Active elements could beÂ placed not that close one toÂ another. InÂ that case itÂ would beÂ harder forÂ users toÂ hit those elements andÂ there would beÂ symptomatic flickering when youâ€™d move theÂ cursor from one such element toÂ another. Ideally, those elements should have continuous active areas. AndÂ toÂ delimit different elements inÂ that case you should use theÂ visual hover like changing background andÂ not theÂ cursorless gaps.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Another &lt;span class=&quot;nobr&quot;&gt;problemâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;cluttered interface. IfÂ youâ€™d have whole page covered inÂ active elements, &lt;span class=&quot;nobr&quot;&gt;thenâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;span class=&quot;nobr&quot;&gt;yeahâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;theÂ cursor would change aÂ lot (however, itÂ already changes aÂ lot when you hover over text orÂ other static elements). When you have aÂ lot ofÂ active areas, itÂ could beÂ that you need toÂ simplify something there.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;recap&quot;&gt;Recap&lt;/h2&gt;
&lt;p&gt;InÂ ideal situation every active element should have aÂ distinct visual hover state. But even with such state itÂ wonâ€™t hurt toÂ add aÂ &lt;code&gt;cursor:pointer&lt;/code&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;itÂ would only add clarity andÂ would remove possible UI conflicts. AndÂ ifÂ you canâ€™t find how toÂ make aÂ visual state onÂ hover, adding pointer would beÂ enough forÂ most cases (however, ifÂ youâ€™re working with aÂ designer, itÂ would beÂ better toÂ ask them toÂ give you aÂ correct visual hover state).&lt;/p&gt;
&lt;p&gt;AndÂ there are just noÂ other arguments against cursor over active elements than user habits. AndÂ there would beÂ more happy users than those who moan.&lt;/p&gt;
&lt;p&gt;However, ifÂ you have any other arguments IÂ didnâ€™t &lt;span class=&quot;nobr&quot;&gt;coverâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;IÂ would like toÂ hear them. IfÂ you know ofÂ any A/&lt;span class=&quot;nobr&quot;&gt;B-testing&lt;/span&gt; with different &lt;span class=&quot;nobr&quot;&gt;cursorsâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;itÂ would beÂ very cool toÂ look atÂ theÂ results ofÂ those.&lt;/p&gt;
&lt;p&gt;Anyway, IÂ hope &lt;em&gt;now&lt;/em&gt; this topic isÂ obvious andÂ you would goÂ andÂ add theÂ &lt;code&gt;cursor:pointer&lt;/code&gt; toÂ anywhere onÂ you page where itÂ isÂ needed.&lt;/p&gt;
&lt;h2 id=&quot;links&quot;&gt;Links&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://css-tricks.com/snippets/css/give-clickable-elements-a-pointer-cursor/&quot;&gt;Chris Coyerâ€™s snippet onÂ adding pointer cursor&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; Except forÂ the snippet itself, inÂ theÂ comments there are all theÂ same arguments onÂ habits andÂ points ofÂ view without arguments atÂ all.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.usabilitypost.com/2009/10/26/mouse-cursor-affordance/&quot;&gt;Dmitry Fadeyevâ€™s article onÂ cursorâ€™s affordance&lt;/a&gt;&lt;/p&gt;
&lt;p&gt; InÂ this article Dmitry comes with this statement: â€œIf theÂ cursor type isÂ wrong, specify itÂ using theÂ &lt;abbr&gt;CSS&lt;/abbr&gt; &lt;code&gt;cursor&lt;/code&gt; propertyâ€ andÂ gives asÂ anÂ example custom buttons andÂ input placeholders.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://pepelsbey.net/pres/push-it/&quot;&gt;Vadim Makeevâ€™s slides&lt;/a&gt; (inÂ Russian)&lt;/p&gt;
&lt;p&gt; Nice slides onÂ using theÂ right elements forÂ right purposes andÂ all those things, however Vadim says you shouldnâ€™t make aÂ pointer cursor forÂ buttons andÂ IÂ disagree there. Hope heâ€™ll make upÂ his mind after this article.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;

    </content>
  </entry>
  <entry>
    <title>Restarting kizu.ru</title>
    <link href="http://kizu.ru/en/issues/restart/"/>
    <updated>2013-01-17T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/issues/restart</id>
    <content type="html">&lt;h1 id=&quot;restarting-kizu-ru&quot;&gt;Restarting kizu.ru&lt;/h1&gt;
&lt;p&gt;HiÂ there! That was aÂ long way andÂ IÂ think Iâ€™m somewhere near theÂ &lt;span class=&quot;nobr&quot;&gt;endâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;Iâ€™m relaunching myÂ site. IÂ canâ€™t remember how many versions ofÂ itÂ were there when itÂ was entirely inÂ Russian, but that would beÂ theÂ second version ofÂ myÂ site inÂ English.&lt;/p&gt;
&lt;p&gt;Oh, did IÂ say Iâ€™m near theÂ end? IÂ lied. You know what isÂ theÂ main feature ofÂ this version? Itâ€™s rough. Itâ€™s terribly, awfully draft, it&amp;#39;s broken andÂ smelling. Donâ€™t look atÂ theÂ &lt;span class=&quot;nobr&quot;&gt;sourceâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;you wonâ€™t find there anything better than ugly, barely working code. Really, Iâ€™m not joking. Why isÂ itÂ so? IÂ decided toÂ fight myÂ perfectionism. IÂ tended toÂ polish, refine andÂ then polish again myÂ site before; IÂ tried toÂ show only theÂ bestestest code IÂ wrote. But now, this &lt;span class=&quot;nobr&quot;&gt;versionâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;itÂ isÂ soÂ far from anything IÂ would like before. AndÂ thatâ€™s awesome.&lt;/p&gt;
&lt;h2 id=&quot;the-goal&quot;&gt;TheÂ Goal&lt;/h2&gt;
&lt;p&gt;So, why did IÂ rewrote theÂ whole site from scratch? Why doÂ IÂ think that itâ€™s superior toÂ theÂ previous variants even inÂ itâ€™s deeply rough form?&lt;/p&gt;
&lt;p&gt;Thatâ€™s easy. IÂ set theÂ goal forÂ myself: make aÂ site that &lt;strong&gt;would beÂ easy toÂ update&lt;/strong&gt;. Thatâ€™s &lt;span class=&quot;nobr&quot;&gt;itâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;all other versions with all engines IÂ tried forÂ them werenâ€™t handy forÂ me. IÂ had aÂ lot ofÂ things toÂ doÂ forÂ updating andÂ filling theÂ site orÂ changing any parts ofÂ it. AndÂ IÂ wanted toÂ just write, write aÂ lot. IÂ have aÂ lot ofÂ ideas forÂ posts andÂ things toÂ publish atÂ myÂ site, but Iâ€™m lazy. Any previous version was like aÂ wall forÂ me, theÂ wall IÂ couldnâ€™t make myself toÂ jump over.&lt;/p&gt;
&lt;p&gt;However, after aÂ lot ofÂ prototypes, different engines andÂ rewriting theÂ whole thing several times, IÂ came upÂ with theÂ solution that would fit meÂ andÂ would make updating myÂ site aÂ pleasure. AndÂ here itÂ is. All theÂ basic features that IÂ wanted are complete, soÂ IÂ can&amp;#39;t wait anymore andÂ launch it. But why isÂ itÂ pleasure toÂ update theÂ site now?&lt;/p&gt;
&lt;h2 id=&quot;github-amp-jekyll&quot;&gt;GitHub &amp;amp; Jekyll&lt;/h2&gt;
&lt;p&gt;IÂ could praise andÂ praise &lt;span class=&quot;nobr&quot;&gt;GitHubâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;all theÂ work those people doÂ isÂ worth aÂ bunch ofÂ articles. But Iâ€™ll mention just one thing now.&lt;/p&gt;
&lt;p&gt;GitHub gives you aÂ way toÂ host static &lt;span class=&quot;nobr&quot;&gt;sitesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;a href=&quot;http://pages.github.com&quot;&gt;GitHub Pages&lt;/a&gt;. You could take your repo, throw some static files inÂ itÂ andÂ after aÂ few simple actions you could look atÂ your own static site either atÂ GitHub, orÂ atÂ your own domain ifÂ youâ€™d set itÂ up.&lt;/p&gt;
&lt;p&gt;But there isÂ more: other than just hosting plain dull static files, GitHub allows you toÂ autogenerate them forÂ &lt;span class=&quot;nobr&quot;&gt;youâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;using &lt;a href=&quot;https://github.com/mojombo/jekyll#readme&quot;&gt;Jekyll&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You could easily make aÂ basic blog using &lt;span class=&quot;nobr&quot;&gt;Jekyllâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;itÂ has everything youâ€™d need forÂ it: categories, tags, permalinks, generating feeds, etc. AndÂ asÂ itâ€™s aÂ &lt;em&gt;generator&lt;/em&gt;, every page isÂ generated just once, onÂ your push toÂ theÂ repo, soÂ itÂ makes itÂ nice forÂ performance andÂ server &lt;span class=&quot;nobr&quot;&gt;loadâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;users would get just plain htmls. AÂ lot ofÂ people chosen theÂ GitHub asÂ aÂ hosting forÂ their blogs.&lt;/p&gt;
&lt;p&gt;Iâ€™ve chosen too. Iâ€™ve always had aÂ lot ofÂ demands forÂ aÂ static &lt;span class=&quot;nobr&quot;&gt;generatorsâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;IÂ write inÂ two languages, have aÂ lot ofÂ experiments embedded inÂ posts andÂ aÂ lot ofÂ other stuff. Jekyll uses &lt;a href=&quot;http://liquidmarkup.org&quot;&gt;Liquid&lt;/a&gt; templating engine. Itâ€™s rather simple, but with some guts you could doÂ complex things with it. Iâ€™ve dig itÂ aÂ bit andÂ made aÂ lot ofÂ small improvements forÂ myÂ &lt;span class=&quot;nobr&quot;&gt;blogâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;there would beÂ atÂ least several articles onÂ that. AndÂ maybe someday Iâ€™ll refine andÂ rewrite all those things toÂ aÂ state ofÂ aÂ standalone project that could beÂ used asÂ aÂ boilerplate forÂ aÂ simple nice andÂ powerful blog with all interesting features included. So, wait forÂ &lt;span class=&quot;nobr&quot;&gt;updatesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;there would beÂ some.&lt;/p&gt;
&lt;h2 id=&quot;prose-io&quot;&gt;Prose.io&lt;/h2&gt;
&lt;p&gt;Ok, soÂ Iâ€™m using GitHub, soÂ IÂ can just push theÂ changes toÂ itÂ andÂ theyâ€™ll goÂ live. But GitHub have aÂ nice &lt;nobr&gt;&lt;abbr&gt;API&lt;/abbr&gt;&amp;#8202;â€”&lt;/nobr&gt;&amp;#8202;soÂ there are some web apps that already use itÂ andÂ doÂ aÂ great job with it. One ofÂ them isÂ &lt;a href=&quot;http://prose.io&quot;&gt;prose.io&lt;/a&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;andÂ itÂ works really well, IÂ think Iâ€™ll write anÂ article orÂ two onÂ itÂ someday. IÂ really liked it.&lt;/p&gt;
&lt;h2 id=&quot;-write-an-article-&quot;&gt;â€œWrite anÂ articleâ€&lt;/h2&gt;
&lt;p&gt;How much times did IÂ say â€œIâ€™ll write anÂ article onÂ thatâ€ already? TheÂ point isÂ IÂ came with that New Yearâ€™s Resolution: toÂ write atÂ least one article aÂ week after launching theÂ new site. But everything tells meÂ there would beÂ more articles: IÂ have aÂ lot ofÂ drafts andÂ ideas toÂ tell andÂ write on.&lt;/p&gt;
&lt;p&gt;So, just wait forÂ it! Iâ€™ll try toÂ mix articles onÂ theÂ making ofÂ theÂ new version ofÂ site with those IÂ have already ideas forÂ orÂ with just anything that would fly there inÂ aÂ front ofÂ myÂ eyes.&lt;/p&gt;
&lt;p&gt;Iâ€™m not sure about theÂ format ofÂ theÂ blog/site, because everything could easily change, but Iâ€™m sure itÂ would beÂ fun.&lt;/p&gt;
&lt;h2 id=&quot;markup-amp-design&quot;&gt;Markup &amp;amp; Design&lt;/h2&gt;
&lt;p&gt;AsÂ IÂ already &lt;span class=&quot;nobr&quot;&gt;mentionedâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;right now there isÂ only basement forÂ the site that gives meÂ anÂ easy way toÂ write aÂ new article, change any previous one orÂ just play with anything. Everything else isÂ unfinished.&lt;/p&gt;
&lt;p&gt;Markup isÂ inÂ aÂ state ofÂ anÂ early prototype, there isÂ almost nothing interesting here. Well, some nice touches are there hopefully, but they are covered with layers ofÂ trash. Bad selectors, noÂ continuous code style (theÂ styles are generated from Stylus actually), aÂ lot ofÂ copy-and-pasting, extra code andÂ other bad things. Donâ€™t read myÂ &lt;abbr&gt;CSS&lt;/abbr&gt;. All theÂ things that &lt;em&gt;are&lt;/em&gt; nice Iâ€™ll mention inÂ all theÂ new shiny posts, soÂ you could just subscribe toÂ theÂ &lt;abbr&gt;RSS&lt;/abbr&gt; orÂ &lt;a href=&quot;https://twitter.com/kizmarh&quot;&gt;follow updates inÂ myÂ twitter&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Design, onÂ theÂ other hand, isÂ almost stable. Yeah, there would beÂ changes andÂ aÂ lot ofÂ them, but theÂ whole concept isÂ there.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;TheÂ Font. IÂ spend aÂ lot ofÂ attention toÂ it. There isÂ aÂ lot ofÂ theÂ Font: Iâ€™ve chosen aÂ big one forÂ body, big enough forÂ meÂ atÂ least. IfÂ itÂ seems too big forÂ &lt;span class=&quot;nobr&quot;&gt;youâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;you could reduce itÂ using your browser orÂ just sit farther from theÂ display. IÂ think itâ€™s better toÂ please those who are not that good atÂ looking atÂ small letters than those with eagle eyes.&lt;/p&gt;
&lt;p&gt; Also, theÂ font isÂ serif. TheÂ sad part isÂ that myÂ blog isÂ both onÂ English andÂ onÂ &lt;span class=&quot;nobr&quot;&gt;Russianâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;andÂ there are very few good free fonts with cyrillic subset. AndÂ aÂ little more paid ones. Iâ€™ve chosen toÂ pay. TheÂ font isÂ &lt;a href=&quot;http://www.letterhead.ru/Fonts/21cent.html&quot;&gt;â€œ21 centâ€&lt;/a&gt; byÂ &lt;a href=&quot;http://www.letterhead.ru&quot;&gt;Letterhead Studio&lt;/a&gt;. Donâ€™t know why, but IÂ really like this font. IÂ bought itÂ from &lt;a href=&quot;http://www.myfonts.com/fonts/letterheadrussia/21-cent/&quot;&gt;myfonts.net&lt;/a&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;itâ€™s nice they have itÂ â€™cause almost all other paid font providers are somewhat &lt;span class=&quot;nobr&quot;&gt;greedyâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;IÂ donâ€™t think paying monthly fee forÂ aÂ font isÂ nice.&lt;/p&gt;
&lt;p&gt; TheÂ whole font story isÂ really tough andÂ long. You can guess ifÂ itÂ would translate into anÂ article someday.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Minimalism. Iâ€™ve already mentioned itÂ atÂ &lt;span class=&quot;nobr&quot;&gt;twitterâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;itâ€™s very hard toÂ make aÂ minimalistic textual site andÂ not fall into cloning great &lt;a href=&quot;http://informationarchitects.net&quot;&gt;iAâ€™s site&lt;/a&gt;. Some ofÂ theÂ iterations IÂ did forÂ myÂ site were dangerously close toÂ that one. Maybe thatâ€™s not that bad after all, but Iâ€™ve stopped andÂ tried toÂ find what toÂ doÂ toÂ make myÂ site somehow stand out ofÂ similar ones. Minimalistic text-only sites are aÂ trend, soÂ itÂ would beÂ nice ifÂ myÂ site would beÂ recognisable inÂ some way. OfÂ course, itâ€™s not finished, but IÂ hope theÂ shape can beÂ seen.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Visual features. Iâ€™ll certainly write more posts onÂ that, soÂ only briefly now: look atÂ theÂ gamma andÂ colors. IÂ tried toÂ reduce number ofÂ plain black andÂ gray colors (andÂ plain white too), using aÂ small tint toÂ everything. Also look atÂ theÂ header andÂ footer (onÂ desktop)&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;IÂ know, itâ€™s not aÂ new effect, but IÂ kinda liked itÂ andÂ wanted toÂ use itÂ there asÂ itÂ perfectly fits into theme. AndÂ look atÂ theÂ &lt;span class=&quot;nobr&quot;&gt;linksâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;theÂ colors, theÂ visited ones andÂ especially look atÂ theÂ small thingy that can beÂ visible onÂ theÂ underline that appears onÂ hover.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;open-source&quot;&gt;Open Source&lt;/h2&gt;
&lt;p&gt;Despite theÂ rough trashy code inside, theÂ code ofÂ this site isÂ onÂ GitHub. Yeah, itâ€™s needed forÂ all this Jekyll magic toÂ work, but there isÂ also another thing: theÂ power ofÂ open source. Anyone could goÂ andÂ fix all those awful mistakes IÂ doÂ while writing theÂ posts inÂ English (inÂ aÂ verrry bad English IÂ guess, sorry!)&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;now itâ€™s very easy. Every article onÂ site have two links atÂ theÂ bottom: one forÂ creating anÂ issue onÂ GitHub straight &lt;span class=&quot;nobr&quot;&gt;awayâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;soÂ you can point meÂ toÂ any errors orÂ add something toÂ theÂ post, andÂ ifÂ youâ€™re that generous, there isÂ aÂ link toÂ theÂ article atÂ prose.&lt;span class=&quot;nobr&quot;&gt;ioâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;soÂ you could goÂ andÂ fix it.&lt;/p&gt;
&lt;p&gt;Those actions would beÂ very fast asÂ long asÂ you have GitHub account, soÂ IÂ hope you would use it. Thank you inÂ advance!&lt;/p&gt;
&lt;p&gt;This whole idea onÂ going open source forÂ articles isÂ great, soÂ there would beÂ aÂ lot ofÂ articles onÂ that coming.&lt;/p&gt;
&lt;h2 id=&quot;that-s-it-or-tl-dr&quot;&gt;Thatâ€™s itÂ orÂ tl;dr&lt;/h2&gt;
&lt;p&gt;Ok, soÂ you can see theÂ first post from aÂ list ofÂ all those Iâ€™ll &lt;span class=&quot;nobr&quot;&gt;writeâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;with aÂ new site under them. Itâ€™s drafty, broken inÂ aÂ lot ofÂ ways andÂ smells inside, but that would change someday. Everything would beÂ better andÂ better andÂ Iâ€™ll try toÂ cover all theÂ changes IÂ doÂ either inÂ articles, orÂ just inÂ twitter.&lt;/p&gt;
&lt;p&gt;So, thank you forÂ reading this lengthy post (orÂ scrolling till theÂ end atÂ least). Follow theÂ updates, send pull requests andÂ stay tuned!&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>bemto</title>
    <link href="http://kizu.ru/en/projects/bemto/"/>
    <updated>2012-07-02T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/projects/bemto</id>
    <content type="html">&lt;h1 id=&quot;bemto&quot;&gt;bemto&lt;/h1&gt;
&lt;p&gt;OhÂ hi. IÂ created this &lt;span class=&quot;nobr&quot;&gt;thingâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;&lt;a href=&quot;https://github.com/kizu/bemto&quot;&gt;bemto&lt;/a&gt;
â€”&amp;#8202;some mixins forÂ &lt;a href=&quot;https://github.com/visionmedia/jade&quot;&gt;Jade&lt;/a&gt; that makes itÂ easy andÂ fun toÂ write theÂ code inÂ &lt;a href=&quot;http://bem.github.com/bem-method/pages/beginning/beginning.en.html&quot;&gt;&lt;abbr&gt;BEM&lt;/abbr&gt;&lt;/a&gt; notation.&lt;/p&gt;
&lt;p&gt;IÂ really love writing code inÂ bem style andÂ really like Jade, soÂ IÂ though that adding some bem toÂ Jade would beÂ aÂ great little thing that atÂ least IÂ would use aÂ lot. AndÂ IÂ hope that itÂ would beÂ helpful toÂ someone else too.&lt;/p&gt;
&lt;p&gt;IfÂ you hadnâ€™t already read theÂ &lt;a href=&quot;http://coding.smashingmagazine.com/2012/04/16/a-new-front-end-methodology-bem/&quot;&gt;articles onÂ &lt;abbr&gt;BEM&lt;/abbr&gt;&lt;/a&gt; onÂ SM, orÂ Nicolas Gallagharâ€™s &lt;a href=&quot;http://nicolasgallagher.com/about-html-semantics-front-end-architecture/&quot;&gt;article onÂ front-end architecture&lt;/a&gt;,&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;goÂ forÂ it! Those articles explain some great ways toÂ write extendable andÂ mainainable code.&lt;/p&gt;
&lt;p&gt;AndÂ Jade isÂ theÂ template engine heavily influenced byÂ Haml byÂ &lt;a href=&quot;http://tjholowaychuk.com/&quot;&gt;TJ Holowaychuk&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Long story short: read &lt;a href=&quot;https://github.com/kizu/bemto#readme&quot;&gt;theÂ readme ofÂ theÂ project&lt;/a&gt; forÂ more details. Especially look atÂ &lt;a href=&quot;https://github.com/kizu/bemto/blob/master/README.md#using-for-building-complex-mixins&quot;&gt;theÂ extended use-case&lt;/a&gt;&lt;span class=&quot;nobr&quot;&gt;â€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;itÂ shows how you can use bemto toÂ create reusable andÂ &lt;span class=&quot;nobr&quot;&gt;easy-to&lt;/span&gt;-use blocks.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Legends and Headings</title>
    <link href="http://kizu.ru/en/fun/legends-and-headings/"/>
    <updated>2012-04-27T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/fun/legends-and-headings</id>
    <content type="html">&lt;h1 id=&quot;legends-and-headings&quot;&gt;Legends andÂ Headings&lt;/h1&gt;
&lt;p&gt;One day inÂ theÂ last december IÂ tried toÂ find out what weÂ can doÂ with theÂ &lt;code&gt;legend&lt;/code&gt; element. IÂ wanted toÂ move itÂ inÂ theÂ fieldsetâ€™s frame, andÂ didnâ€™t want toÂ style itÂ out â€™cause theÂ fieldsets with legend have this special behavior: theÂ fieldsetâ€™s border gets theÂ gap forÂ the legend toÂ fit in.&lt;/p&gt;
&lt;p&gt;So, IÂ made some tricks toÂ emulate different behaviors: move theÂ legend toÂ theÂ right, center orÂ even make visually two legends inÂ one fieldset.&lt;/p&gt;
&lt;p&gt;TheÂ easiest part isÂ theÂ positioning ofÂ theÂ legend toÂ theÂ right: use theÂ &lt;code&gt;direction: rtl&lt;/code&gt; andÂ the position ofÂ theÂ legend would adjuct accordingly. AndÂ donâ€™t forget toÂ bring back theÂ &lt;code&gt;ltr&lt;/code&gt; direction onÂ theÂ child elements.&lt;/p&gt;
&lt;p&gt;ForÂ the centered andÂ the double one IÂ used aÂ hack with extra elements andÂ stretched legend. There could beÂ pseudos instead ofÂ some extra elements, but there were some bugs with them there, soÂ IÂ just used theÂ extras here. OfÂ course itâ€™s not that Â«fairÂ», but you can style itÂ soÂ itÂ would look like borders, soâ€¦ Here isÂ aÂ dabblet with those fieldsets andÂ legends:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/fun/legends-and-headings/#Demo_legends&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;AndÂ there isÂ aÂ simplier demo ofÂ theÂ headings with rulers onÂ theÂ sides. TheÂ main point isÂ toÂ use only one element andÂ toÂ make theÂ borders somewhat Â«fairÂ», soÂ ifÂ there would beÂ aÂ background, there would beÂ visual gaps. Other similar methods IÂ saw used theÂ fake background onÂ theÂ centered item toÂ cover theÂ line under it.&lt;/p&gt;
&lt;p&gt;Itâ€™s sad that you canâ€™t doÂ multiline variant using only one &lt;span class=&quot;nobr&quot;&gt;elementâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;soÂ inÂ that case there isÂ one extra span. InÂ other cases there isÂ only theÂ header andÂ the &lt;span class=&quot;nobr&quot;&gt;pseudosâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;andÂ itÂ must degrade gracefully. SoÂ here isÂ itâ€™s dabblet:&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/fun/legends-and-headings/#Demo_headings&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Scrolling shadows</title>
    <link href="http://kizu.ru/en/fun/shadowscroll/"/>
    <updated>2012-04-21T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/fun/shadowscroll</id>
    <content type="html">&lt;h1 id=&quot;scrolling-shadows&quot;&gt;Scrolling shadows&lt;/h1&gt;
&lt;p&gt;Hereâ€™s anÂ old idea, but recreated with pure &lt;abbr&gt;CSS&lt;/abbr&gt;.&lt;/p&gt;
&lt;p&gt;Originally, IÂ had anÂ extra wrapper andÂ two extra pseudo-elements onÂ it. Later IÂ decided toÂ rewrite theÂ code andÂ toÂ use just aÂ single element (byÂ using radial gradients).&lt;/p&gt;
&lt;p&gt;While this method isÂ simple, there are some limitations: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;theÂ background must beÂ solid&lt;ul&gt;
&lt;li&gt;however, ifÂ you&amp;#39;d try &lt;code&gt;background-attachment: fixed&lt;/code&gt;â€¦)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;there are some positioning issues&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;But inÂ most regards this method isÂ rather bulletproof. &lt;/p&gt;
&lt;p&gt;IfÂ you replace theÂ &lt;abbr&gt;CSS&lt;/abbr&gt;-gradients with simple images, this method could work inÂ IE. (ItÂ might need aÂ few more small fixes; IÂ didn&amp;#39;t check.)&lt;/p&gt;
&lt;p&gt;Enjoy!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update:&lt;/strong&gt; &lt;a href=&quot;https://twitter.com/leaverou&quot;&gt;Lea Verou&lt;/a&gt; updated this experiment using theÂ &lt;code&gt;background-attachment: local&lt;/code&gt;. &lt;a href=&quot;http://lea.verou.me/2012/04/background-attachment-local/&quot;&gt;Read about itÂ inÂ her post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/fun/shadowscroll/#Demo_shadowscroll&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Multi-directional hover</title>
    <link href="http://kizu.ru/en/fun/multi-directional-hover/"/>
    <updated>2012-03-19T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/fun/multi-directional-hover</id>
    <content type="html">&lt;h1 id=&quot;multi-directional-hover&quot;&gt;Multi-directional hover&lt;/h1&gt;
&lt;p&gt;Try toÂ hover this block from different directions&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/fun/multi-directional-hover/#Demo_hovers&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>CSS3 convex polygons</title>
    <link href="http://kizu.ru/en/fun/polygons/"/>
    <updated>2011-09-18T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/fun/polygons</id>
    <content type="html">&lt;h1 id=&quot;css3-convex-polygons&quot;&gt;&lt;abbr&gt;CSS&lt;/abbr&gt;3 convex polygons&lt;/h1&gt;
&lt;p&gt;Using, &lt;code&gt;overflow:hidden&lt;/code&gt; andÂ &lt;code&gt;visibility:hidden&lt;/code&gt; forÂ wrappers with &lt;code&gt;visibility:visible&lt;/code&gt; onÂ aÂ last shild, weÂ could doÂ almost any convex masks which would beÂ clickable andÂ hoverable onÂ their areas.&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/fun/polygons/#Demo_polygons&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Text-overflow emulation and gradient overflow</title>
    <link href="http://kizu.ru/en/fun/overflower/"/>
    <updated>2011-03-08T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/fun/overflower</id>
    <content type="html">&lt;h1 id=&quot;text-overflow-emulation-and-gradient-overflow&quot;&gt;Text-overflow emulation andÂ gradient overflow&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;TheÂ Â«overflowÂ» effect isÂ visible only ifÂ there isÂ something toÂ hide (so, there wouldnâ€™t beÂ aÂ case when there isÂ anÂ overlayed gradient that hides aÂ part ofÂ text, that would beÂ visible whole anyway).&lt;/li&gt;
&lt;li&gt;Also, you can add aÂ &lt;code&gt;title&lt;/code&gt; attribute toÂ aÂ block, that would appear only when something isÂ hidden.&lt;/li&gt;
&lt;li&gt;You can use this method starting from theÂ IE7 (however, IÂ hadnâ€™t optimise itÂ forÂ this experiment, soÂ barely only title would beÂ visible)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Resize theÂ browserâ€™s window toÂ see theÂ switching ofÂ overflow effect.&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/fun/overflower/#Demo_overflower&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Filtering elements without JS</title>
    <link href="http://kizu.ru/en/fun/filters/"/>
    <updated>2011-02-06T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/fun/filters</id>
    <content type="html">&lt;h1 id=&quot;filtering-elements-without-js&quot;&gt;Filtering elements without JS&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Colors are just checkboxes.&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;nobr&quot;&gt;Shapesâ€‰â€”&lt;/span&gt;&lt;span class=&quot;thinsp&quot;&gt;â€‰&lt;/span&gt;radiobuttons with anÂ upgrade: you can uncheck once it&amp;#39;s checked.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Just &lt;abbr&gt;CSS&lt;/abbr&gt;, noÂ JS, enjoy!&lt;/p&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/fun/filters/#Demo_filters&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Only modern browsers supported, can beÂ emulated inÂ IE via expressions, but I&amp;#39;m lazy enough not toÂ doÂ itÂ here.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Popups and dropdowns only by CSS</title>
    <link href="http://kizu.ru/en/fun/popups/"/>
    <updated>2011-02-05T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/fun/popups</id>
    <content type="html">&lt;h1 id=&quot;popups-and-dropdowns-only-by-css&quot;&gt;Popups andÂ dropdowns only byÂ &lt;abbr&gt;CSS&lt;/abbr&gt;&lt;/h1&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/fun/popups/#Demo_popups&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;

    </content>
  </entry>
  <entry>
    <title>Custom CSS3 controls</title>
    <link href="http://kizu.ru/en/fun/controls/"/>
    <updated>2011-02-03T00:00:00+03:00</updated>
    <id>http://kizu.ru/en/fun/controls</id>
    <content type="html">&lt;h1 id=&quot;custom-css3-controls&quot;&gt;Custom &lt;abbr&gt;CSS&lt;/abbr&gt;3 controls&lt;/h1&gt;
&lt;p&gt;Look at the demo &lt;a href=&quot;http://kizu.ru/en/fun/controls/#Demo_controls&quot;&gt;embedded in the post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This experiment features theÂ heavy-css-styled radio-buttons, made without any use ofÂ JS using theÂ &lt;code&gt;:checked&lt;/code&gt; pseudo-class. AndÂ with somewhat graceful degradation forÂ some old browsers.&lt;/p&gt;
&lt;p&gt;Also, there isÂ some strange non-semantic structure, inÂ which IÂ tried toÂ overcome one old &lt;a href=&quot;http://css-tricks.com/8439-webkit-sibling-bug/&quot;&gt;webkitâ€™s bug&lt;/a&gt;. Since there isÂ aÂ better solution forÂ this problem (using theÂ always-runnng animation), this experiment was useful toÂ meÂ â€™cause, you know, itâ€™s always fun toÂ overcome aÂ bug andÂ create something that works asÂ intended. InÂ theÂ further experiments I&amp;#39;d use theÂ animation bug-fix.&lt;/p&gt;
&lt;p&gt;IÂ have aÂ lot ofÂ other thoughts forÂ custom inputs, soÂ stay tuned!&lt;/p&gt;

    </content>
  </entry>
</feed>